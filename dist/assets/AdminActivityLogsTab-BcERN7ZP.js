import{c as h,r as l,a7 as B,a8 as D,j as e,U as G,S as U,C as V,b as P}from"./index-WlGrQmAx.js";import{R as _}from"./refresh-cw-951XaR2c.js";import{E}from"./eye-Dspwyz28.js";import{A as N}from"./activity-VypiHLgi.js";import{G as F}from"./globe-D4JZIzwx.js";import{C as q}from"./circle-help-CJAsWPuT.js";import{S as K}from"./shield-_SVAcYOe.js";import{B as I}from"./building-CaU0ufPn.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=h("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=h("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=h("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),ee=()=>{const[y,v]=l.useState([]),[w,u]=l.useState(!0),[a,k]=l.useState({totalPageViews:0,uniqueVisitors:0,todayPageViews:0,todayUniqueVisitors:0,topPages:[],userTypeBreakdown:[],deviceBreakdown:[]}),[m,T]=l.useState(""),[i,S]=l.useState("all"),[n,A]=l.useState("all"),[r,z]=l.useState("all");l.useEffect(()=>{j()},[i,n,r]);const j=async()=>{u(!0);try{let s;const t=new Date;r==="today"?s=t.toISOString().split("T")[0]:r==="week"?s=new Date(t.getTime()-6048e5).toISOString():r==="month"&&(s=new Date(t.getTime()-2592e6).toISOString());const[c,o]=await Promise.all([B({limit:500,userType:i!=="all"?i:void 0,activityType:n!=="all"?n:void 0,startDate:s}),D()]);v(c),k(o)}catch(s){console.error("❌ Activity verisi yüklenemedi:",s)}finally{u(!1)}},p=y.filter(s=>{var t,c,o,d;if(m){const x=m.toLowerCase();return((t=s.pageUrl)==null?void 0:t.toLowerCase().includes(x))||((c=s.userEmail)==null?void 0:c.toLowerCase().includes(x))||((o=s.userName)==null?void 0:o.toLowerCase().includes(x))||((d=s.browser)==null?void 0:d.toLowerCase().includes(x))}return!0}),g=s=>{switch(s){case"customer":return e.jsx(P,{size:14,className:"text-blue-600"});case"partner":return e.jsx(I,{size:14,className:"text-green-600"});case"admin":return e.jsx(K,{size:14,className:"text-purple-600"});default:return e.jsx(q,{size:14,className:"text-slate-400"})}},b=s=>{switch(s){case"customer":return"Müşteri";case"partner":return"Partner";case"admin":return"Admin";default:return"Anonim"}},C=s=>({page_view:"Sayfa Görüntüleme",login:"Giriş",logout:"Çıkış",request_create:"Talep Oluşturma",offer_create:"Teklif Gönderme",offer_accept:"Teklif Kabul",job_complete:"İş Tamamlama",signup:"Kayıt",button_click:"Buton Tıklama",form_submit:"Form Gönderme"})[s]||s,f=s=>{switch(s){case"mobile":return e.jsx(O,{size:14,className:"text-slate-500"});case"tablet":return e.jsx(R,{size:14,className:"text-slate-500"});default:return e.jsx(M,{size:14,className:"text-slate-500"})}},L=s=>s?new Date(s).toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return w?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),e.jsx("span",{className:"ml-3 text-slate-600",children:"Aktiviteler yükleniyor..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Aktivite Takibi"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Kullanıcı ve partner aktivitelerini izleyin"})]}),e.jsxs("button",{onClick:j,className:"px-4 py-2 bg-orange-600 text-white rounded-xl font-bold hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(_,{size:18}),"Yenile"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(E,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Toplam Görüntüleme"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:a.totalPageViews.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(G,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Tekil Ziyaretçi"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:a.uniqueVisitors.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:e.jsx(N,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Bugün Görüntüleme"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:a.todayPageViews.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(F,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Bugün Tekil"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:a.todayUniqueVisitors.toLocaleString()})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"Kullanıcı Tipi Dağılımı"}),e.jsxs("div",{className:"space-y-2",children:[a.userTypeBreakdown.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(s.userType),e.jsx("span",{className:"text-sm text-slate-600",children:b(s.userType)})]}),e.jsx("span",{className:"font-bold text-slate-900",children:s.count})]},t)),a.userTypeBreakdown.length===0&&e.jsx("p",{className:"text-sm text-slate-400",children:"Veri yok"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"Cihaz Dağılımı"}),e.jsxs("div",{className:"space-y-2",children:[a.deviceBreakdown.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f(s.deviceType),e.jsx("span",{className:"text-sm text-slate-600 capitalize",children:s.deviceType||"Bilinmiyor"})]}),e.jsx("span",{className:"font-bold text-slate-900",children:s.count})]},t)),a.deviceBreakdown.length===0&&e.jsx("p",{className:"text-sm text-slate-400",children:"Veri yok"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"En Çok Ziyaret Edilen"}),e.jsxs("div",{className:"space-y-2",children:[a.topPages.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[150px]",title:s.pageUrl,children:s.pageUrl}),e.jsx("span",{className:"font-bold text-slate-900",children:s.count})]},t)),a.topPages.length===0&&e.jsx("p",{className:"text-sm text-slate-400",children:"Veri yok"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(U,{size:18,className:"absolute left-3 top-3.5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Sayfa, email veya kullanıcı ara...",value:m,onChange:s=>T(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none"})]}),e.jsxs("select",{value:i,onChange:s=>S(s.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none min-w-[150px]",children:[e.jsx("option",{value:"all",children:"Tüm Kullanıcılar"}),e.jsx("option",{value:"customer",children:"Müşteriler"}),e.jsx("option",{value:"partner",children:"Partnerler"}),e.jsx("option",{value:"admin",children:"Adminler"}),e.jsx("option",{value:"anonymous",children:"Anonim"})]}),e.jsxs("select",{value:n,onChange:s=>A(s.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none min-w-[180px]",children:[e.jsx("option",{value:"all",children:"Tüm Aktiviteler"}),e.jsx("option",{value:"page_view",children:"Sayfa Görüntüleme"}),e.jsx("option",{value:"login",children:"Giriş"}),e.jsx("option",{value:"logout",children:"Çıkış"}),e.jsx("option",{value:"signup",children:"Kayıt"}),e.jsx("option",{value:"request_create",children:"Talep Oluşturma"}),e.jsx("option",{value:"offer_create",children:"Teklif Gönderme"})]}),e.jsxs("select",{value:r,onChange:s=>z(s.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none min-w-[150px]",children:[e.jsx("option",{value:"all",children:"Tüm Zamanlar"}),e.jsx("option",{value:"today",children:"Bugün"}),e.jsx("option",{value:"week",children:"Son 7 Gün"}),e.jsx("option",{value:"month",children:"Son 30 Gün"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Kullanıcı"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Aktivite"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Sayfa"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Cihaz"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Tarayıcı"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase",children:"Tarih"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:p.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-4 py-12 text-center text-slate-500",children:[e.jsx(N,{size:48,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"Aktivite bulunamadı"}),e.jsx("p",{className:"text-sm",children:"Filtreleri değiştirerek tekrar deneyin"})]})}):p.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g(s.userType),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.userName||s.userEmail||"Anonim"}),e.jsx("p",{className:"text-xs text-slate-500",children:b(s.userType)})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs font-medium",children:C(s.activityType)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-slate-600 max-w-[200px] truncate block",title:s.pageUrl,children:s.pageUrl||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[f(s.deviceType),e.jsx("span",{className:"text-xs text-slate-500",children:s.os})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-slate-600",children:s.browser})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-600",children:[e.jsx(V,{size:14,className:"text-slate-400"}),L(s.createdAt)]})})]},s.id))})]})}),e.jsx("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-200",children:e.jsxs("p",{className:"text-sm text-slate-600",children:["Toplam ",p.length," aktivite gösteriliyor"]})})]})]})};export{ee as default};

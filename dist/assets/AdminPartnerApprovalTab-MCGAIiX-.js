import{r as i,s as d,j as e,S as w,P as j,o as b}from"./index-D7DAox1V.js";import{u as B,L as P,E as C}from"./AdminDashboard-_xoncaYT.js";import{B as f}from"./building-BTZaUNff.js";import{M as g}from"./mail-G-y0M2XW.js";import{C as S}from"./calendar-CC1mERTk.js";import{E as A}from"./eye-D127WwNK.js";import{C as N}from"./circle-check-big-BWYsEs7U.js";import"./activity-boTQSFBB.js";import"./tag-BL8Qmre2.js";import"./wallet-DCz2Uy4f.js";import"./credit-card-Bx9QuFqM.js";import"./star-DIAfouR6.js";import"./log-out-CHdvlf2Q.js";import"./file-text-CoQrWOnj.js";import"./dollar-sign-ewyyKfX1.js";import"./StatusBadge-CCWrMZb5.js";import"./shield-CS6reTNY.js";import"./user-plus-bY2NAf9m.js";import"./square-pen-ByzbfLyF.js";import"./trash-2-pXfwjhmN.js";const Z=()=>{var u;const[x,y]=i.useState([]),[v,o]=i.useState(!0),[a,l]=i.useState(null),{filtered:m,searchTerm:n,setSearchTerm:k}=B(x,{searchKeys:["company_name","first_name","last_name","email","phone"]});i.useEffect(()=>{c()},[]);const c=async()=>{try{o(!0);const s=await d.partners.getAll();console.log("ðŸ“‹ TÃ¼m partnerler:",s);const t=s.filter(r=>r.status==="pending");console.log("â³ Pending partnerler:",t),y(t)}catch(s){console.error("Onay bekleyen partnerler yÃ¼klenemedi:",s)}finally{o(!1)}},p=async s=>{if(confirm("Bu partner baÅŸvurusunu onaylamak istediÄŸinize emin misiniz?"))try{const t=await d.partners.update(s,{status:"active"});alert(`Partner baÅŸvurusu onaylandÄ±! (${(t==null?void 0:t.id)||s})`),c()}catch(t){console.error("Partner onaylama hatasÄ±:",t),alert("Onaylama iÅŸlemi baÅŸarÄ±sÄ±z oldu.")}},h=async s=>{if(confirm("Bu partner baÅŸvurusunu reddetmek istediÄŸinize emin misiniz?"))try{const t=await d.partners.update(s,{status:"suspended"});alert(`Partner baÅŸvurusu reddedildi. (${(t==null?void 0:t.id)||s})`),c()}catch(t){console.error("Partner reddetme hatasÄ±:",t),alert("Reddetme iÅŸlemi baÅŸarÄ±sÄ±z oldu.")}};return v?e.jsx(P,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Partner Onay"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Onay bekleyen partner baÅŸvurularÄ±nÄ± deÄŸerlendirin"})]}),e.jsxs("div",{className:"px-4 py-2 bg-orange-100 rounded-xl",children:[e.jsx("p",{className:"text-xs text-orange-700 font-bold",children:"Bekleyen BaÅŸvuru"}),e.jsx("p",{className:"text-2xl font-black text-orange-900",children:x.length})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"BaÅŸvuru ara (ÅŸirket adÄ±, yetkili, e-posta, telefon)...",className:"w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none",value:n,onChange:s=>k(s.target.value)})]}),m.length===0?e.jsx(C,{title:n?"BaÅŸvuru BulunamadÄ±":"Onay Bekleyen BaÅŸvuru Yok",description:n?"Arama kriterine uygun baÅŸvuru bulunamadÄ±.":"Åžu anda onay bekleyen partner baÅŸvurusu bulunmuyor."}):e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Åžirket Bilgileri"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Ä°letiÅŸim"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Hizmetler"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"BaÅŸvuru Tarihi"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-600 uppercase",children:"Ä°ÅŸlemler"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:m.map(s=>{var t,r;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(f,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:s.company_name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.first_name," ",s.last_name]}),s.tax_number&&e.jsxs("p",{className:"text-xs text-slate-400",children:["VKN: ",s.tax_number]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(g,{size:14,className:"text-slate-400"}),s.email]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(j,{size:14,className:"text-slate-400"}),s.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(t=s.service_types)==null?void 0:t.slice(0,2).map((z,_)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:z},_)),((r=s.service_types)==null?void 0:r.length)>2&&e.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-medium",children:["+",s.service_types.length-2]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(S,{size:14,className:"text-slate-400"}),new Date(s.created_at).toLocaleDateString("tr-TR")]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"DetaylarÄ± GÃ¶rÃ¼ntÃ¼le",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:()=>p(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Onayla",children:e.jsx(N,{size:18})}),e.jsx("button",{onClick:()=>h(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reddet",children:e.jsx(b,{size:18})})]})})]},s.id)})})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Partner BaÅŸvuru DetaylarÄ±"}),e.jsx("button",{onClick:()=>l(null),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100",children:"âœ•"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(f,{size:16,className:"text-orange-600"}),"Åžirket Bilgileri"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Åžirket AdÄ±"}),e.jsx("p",{className:"font-bold text-slate-900",children:a.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Yetkili KiÅŸi"}),e.jsxs("p",{className:"font-bold text-slate-900",children:[a.first_name," ",a.last_name]})]}),a.tax_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Vergi Kimlik No"}),e.jsx("p",{className:"font-bold text-slate-900",children:a.tax_number})]}),a.trade_registry_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Ticaret Sicil No"}),e.jsx("p",{className:"font-bold text-slate-900",children:a.trade_registry_number})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Ä°letiÅŸim Bilgileri"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(g,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(j,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:a.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Hizmet Tipleri"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(u=a.service_types)==null?void 0:u.map((s,t)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:s},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[e.jsxs("button",{onClick:()=>{p(a.id),l(null)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(N,{size:20}),"Onayla"]}),e.jsxs("button",{onClick:()=>{h(a.id),l(null)},className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(b,{size:20}),"Reddet"]})]})]})]})})]})};export{Z as default};

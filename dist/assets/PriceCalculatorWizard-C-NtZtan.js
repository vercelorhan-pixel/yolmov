import{j as e,r as c,R as be,m as k,A as ge,M as Z,L as E,S as J,N as X,I as ee,K as pe,t as fe}from"./index-DaJmY93P.js";import{q as je,i as te,a as K,c as Ne}from"./priceCalculator-Bv36E9gB.js";import{C as ae}from"./calculator-6oWniIqb.js";import{C as ye}from"./circle-check-D2Bt3Nn5.js";import{B as we}from"./bus-DYzNIrnw.js";import{I as ve}from"./info-CGVtJGFV.js";import{T as ke}from"./trending-up-y9vmxh6I.js";const Se="https://router.project-osrm.org",Ce="https://nominatim.openstreetmap.org";let se=0;const le=1100,Le=async()=>{const r=Date.now()-se;if(r<le){const i=le-r;console.log(`â³ Nominatim rate limit: ${i}ms bekleniyor...`),await new Promise(s=>setTimeout(s,i))}se=Date.now()},ie=(a,r)=>{const i=`${a.latitude.toFixed(6)},${a.longitude.toFixed(6)}-${r.latitude.toFixed(6)},${r.longitude.toFixed(6)}`;return btoa(i).replace(/[^a-zA-Z0-9]/g,"")};async function Me(a,r,i=!0){try{if(i){const u=await Re(a,r);if(u)return console.log("ğŸ¯ Route cache hit!"),{distance:u.distanceKm,duration:u.durationSeconds,geometry:u.routeGeometry,fromCache:!0}}console.log("ğŸŒ Fetching route from OSRM...");const s=`${Se}/route/v1/driving/${a.longitude},${a.latitude};${r.longitude},${r.latitude}?overview=full&geometries=geojson`,l=await fetch(s,{headers:{"User-Agent":"Yolmov/1.0"}});if(!l.ok)throw new Error(`OSRM API error: ${l.status}`);const n=await l.json();if(n.code!=="Ok"||!n.routes||n.routes.length===0)throw new Error("No route found");const d=n.routes[0],x=d.distance/1e3,m=d.duration,w=d.geometry.coordinates.map(u=>[u[1],u[0]]),f={distance:parseFloat(x.toFixed(2)),duration:Math.round(m),geometry:w,fromCache:!1};return i&&await Te(a,r,f),f}catch(s){console.error("âŒ OSRM calculateRoute error:",s);const l=_e(a,r);return console.warn(`âš ï¸ Using fallback distance: ${l} KM`),{distance:l,duration:Math.round(l*90),geometry:void 0,fromCache:!1}}}function _e(a,r){const s=S(r.latitude-a.latitude),l=S(r.longitude-a.longitude),n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(S(a.latitude))*Math.cos(S(r.latitude))*Math.sin(l/2)*Math.sin(l/2),x=6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)));return parseFloat(x.toFixed(2))}function S(a){return a*(Math.PI/180)}async function re(a,r="tr",i=5){try{await Le();let s=a.trim();r==="tr"&&!s.toLowerCase().includes("turkey")&&!s.toLowerCase().includes("tÃ¼rkiye")&&(s=`${s}, Turkey`);const l=new URLSearchParams({q:s,format:"json",limit:i.toString(),addressdetails:"1","accept-language":"tr"}),n=`${Ce}/search?${l.toString()}`;console.log("ğŸ” Nominatim Request:",{originalQuery:a,enhancedQuery:s,encodedUrl:n});const d=await fetch(n,{headers:{"User-Agent":"Yolmov/1.0 (contact@yolmov.com)","Accept-Language":"tr-TR,tr;q=0.9,en;q=0.8"}});if(!d.ok){console.error("âŒ Nominatim API error:",d.status,d.statusText);const m=await d.text();throw console.error("Response body:",m),new Error(`Nominatim API error: ${d.status}`)}const x=await d.json();return console.log("ğŸ“ Nominatim Response:",{query:a,resultCount:x.length,results:x.map(m=>({name:m.display_name,lat:m.lat,lon:m.lon}))}),!x||x.length===0?(console.warn("âš ï¸ No geocoding results for:",s),[]):(console.log(`ğŸ—ºï¸ Geocoding: "${a}" â†’ ${x.length} sonuÃ§ bulundu`),x.map(m=>({coords:{latitude:parseFloat(m.lat),longitude:parseFloat(m.lon)},address:m.display_name,name:a})))}catch(s){return console.error("âŒ Geocoding multiple error:",s),[]}}const Ae=["Ä°stanbul","Ankara","Ä°zmir","Bursa","Antalya","Adana","Konya","Gaziantep","ÅanlÄ±urfa","Kocaeli","Mersin","DiyarbakÄ±r","Hatay","Manisa","Kayseri","Samsun","BalÄ±kesir","KahramanmaraÅŸ","Van","AydÄ±n","KÃ¼tahya","Denizli","Sakarya","EskiÅŸehir","TekirdaÄŸ","MuÄŸla","Malatya","Erzurum","Trabzon","ElazÄ±ÄŸ","TavÅŸanlÄ±","Simav","Gediz","Emet","GÃ¶meÃ§","Edremit","AyvalÄ±k","BandÄ±rma"];async function Re(a,r){try{const i=ie(a,r),{data:s,error:l}=await window.supabase.from("route_cache").select("*").eq("route_hash",i).gt("expires_at",new Date().toISOString()).single();return l||!s?null:(await window.supabase.from("route_cache").update({hit_count:s.hit_count+1,last_used_at:new Date().toISOString()}).eq("id",s.id),{id:s.id,routeHash:s.route_hash,startLat:s.start_lat,startLng:s.start_lng,endLat:s.end_lat,endLng:s.end_lng,distanceKm:parseFloat(s.distance_km),durationSeconds:s.duration_seconds,routeGeometry:s.route_geometry,hitCount:s.hit_count,lastUsedAt:s.last_used_at,createdAt:s.created_at,expiresAt:s.expires_at})}catch(i){return console.error("Cache read error:",i),null}}async function Te(a,r,i){try{const s=ie(a,r),l=new Date;l.setDate(l.getDate()+30),await window.supabase.from("route_cache").insert({route_hash:s,start_lat:a.latitude,start_lng:a.longitude,end_lat:r.latitude,end_lng:r.longitude,distance_km:i.distance,duration_seconds:i.duration,route_geometry:i.geometry,expires_at:l.toISOString()}),console.log("âœ… Route saved to cache")}catch(s){console.warn("âš ï¸ Cache save error (non-critical):",s)}}function Be({startLocation:a,endLocation:r,route:i,onStartChange:s,onEndChange:l,height:n="400px",className:d=""}){return e.jsx("div",{className:`bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl border-2 border-blue-200 flex items-center justify-center ${d}`,style:{height:n},children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ—ºï¸"}),e.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"Harita ModÃ¼lÃ¼"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-md",children:"React-Leaflet entegrasyonu tamamlandÄ±ktan sonra buraya interaktif harita yÃ¼klenecek."}),a&&e.jsxs("div",{className:"mt-4 p-3 bg-white/70 rounded-lg text-left",children:[e.jsx("p",{className:"text-xs font-bold text-green-700",children:"ğŸ“ BaÅŸlangÄ±Ã§"}),e.jsx("p",{className:"text-sm text-slate-700",children:a.address||"Konum seÃ§ildi"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[a.coords.latitude.toFixed(6),", ",a.coords.longitude.toFixed(6)]})]}),r&&e.jsxs("div",{className:"mt-2 p-3 bg-white/70 rounded-lg text-left",children:[e.jsx("p",{className:"text-xs font-bold text-red-700",children:"ğŸ BitiÅŸ"}),e.jsx("p",{className:"text-sm text-slate-700",children:r.address||"Konum seÃ§ildi"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[r.coords.latitude.toFixed(6),", ",r.coords.longitude.toFixed(6)]})]}),i&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-bold text-blue-700",children:"ğŸ›£ï¸ Rota Bilgisi"}),e.jsxs("p",{className:"text-sm text-blue-900",children:[i.distance," KM â€¢ ",Math.round(i.duration/60)," dakika"]}),i.fromCache&&e.jsx("span",{className:"text-xs text-blue-600",children:"âš¡ Cache'den yÃ¼klendi"})]})]})})}const ne=[{id:1,title:"AraÃ§ ve Konum"},{id:2,title:"Detaylar"},{id:3,title:"Fiyat HesabÄ±"}],Ee=[{id:"sedan",label:"Sedan",icon:ee,description:"Standart binek araÃ§"},{id:"suv",label:"SUV/4x4",icon:ee,description:"Arazi aracÄ± (+%15)"},{id:"minibus",label:"MinibÃ¼s/Ticari",icon:we,description:"BÃ¼yÃ¼k araÃ§ (+%30)"}],Ke=[{id:"working",label:"ğŸŸ¢ Ã‡alÄ±ÅŸÄ±r Durumda",description:"Motor Ã§alÄ±ÅŸÄ±yor"},{id:"broken",label:"ğŸŸ¡ ArÄ±zalÄ±",description:"Motor arÄ±zalÄ± (+%15)"},{id:"accident",label:"ğŸ”´ Kaza Durumu",description:"HasarlÄ± araÃ§ (+%25)"},{id:"ditch",label:"âš« Åarampole DÃ¼ÅŸmÃ¼ÅŸ",description:"Ã–zel kurtarma (+%100)"}],$e=[{id:"now",label:"âš¡ Hemen",description:"Acil hizmet (+%30)"},{id:"week",label:"ğŸ“… Bu Hafta",description:"Normal hizmet"},{id:"later",label:"ğŸ—“ï¸ Daha Sonra",description:"PlanlÄ± hizmet"}];function Ge(){const[a,r]=c.useState(1),[i,s]=c.useState(!1),[l,n]=c.useState({}),[d,x]=c.useState("sedan"),[m,w]=c.useState(!1),[f,u]=c.useState("working"),[$,z]=c.useState("now"),[F,I]=c.useState(!1),[g,C]=c.useState(null),[p,L]=c.useState(null),[j,v]=c.useState(""),[N,M]=c.useState(""),[D,P]=c.useState(!1),[H,O]=c.useState(!1),[_,oe]=c.useState([]),[A,ce]=c.useState([]),[G,R]=c.useState(!1),[q,T]=c.useState(!1),[h,U]=c.useState(null),[o,Y]=c.useState(null),[B,Q]=c.useState(null);c.useEffect(()=>{h&&je(h.distance).then(Q)},[h]);const V=async()=>{if(!j.trim()){n({...l,startLocation:"LÃ¼tfen bir adres girin"});return}P(!0),n({...l,startLocation:""}),R(!1);try{console.log("ğŸ” BaÅŸlangÄ±Ã§ aramasÄ±:",j);const t=await re(j,"tr",5);console.log("ğŸ“Š SonuÃ§ sayÄ±sÄ±:",t.length),t.length===0?n({...l,startLocation:`"${j}" iÃ§in sonuÃ§ bulunamadÄ±. YazÄ±mÄ± kontrol edin veya ÅŸehir ekleyin (Ã¶rn: "BalÄ±kesir, GÃ¶meÃ§")`}):t.length===1?(C(t[0]),console.log("âœ… Start location:",t[0])):(oe(t),R(!0),console.log(`ğŸ” ${t.length} sonuÃ§ bulundu:`,t))}catch(t){console.error("Geocoding error:",t),n({...l,startLocation:"Adres arama hatasÄ±. LÃ¼tfen tekrar deneyin."})}finally{P(!1)}},W=async()=>{if(!N.trim()){n({...l,endLocation:"LÃ¼tfen bir adres girin"});return}O(!0),n({...l,endLocation:""}),T(!1);try{console.log("ğŸ” BitiÅŸ aramasÄ±:",N);const t=await re(N,"tr",5);console.log("ğŸ“Š SonuÃ§ sayÄ±sÄ±:",t.length),t.length===0?n({...l,endLocation:`"${N}" iÃ§in sonuÃ§ bulunamadÄ±. YazÄ±mÄ± kontrol edin veya ÅŸehir ekleyin (Ã¶rn: "BalÄ±kesir, GÃ¶meÃ§")`}):t.length===1?(L(t[0]),console.log("âœ… End location:",t[0])):(ce(t),T(!0),console.log(`ğŸ” ${t.length} sonuÃ§ bulundu:`,t))}catch(t){console.error("Geocoding error:",t),n({...l,endLocation:"Adres arama hatasÄ±. LÃ¼tfen tekrar deneyin."})}finally{O(!1)}},de=async()=>{if(!g||!p){n({route:"LÃ¼tfen hem baÅŸlangÄ±Ã§ hem de bitiÅŸ noktasÄ± seÃ§in"});return}s(!0),n({});try{const t=await Me(g.coords,p.coords,!0);U(t),console.log("âœ… Route calculated:",t),r(2)}catch(t){console.error("Route calculation error:",t),n({route:"Rota hesaplanamadÄ±. LÃ¼tfen tekrar deneyin."})}finally{s(!1)}},me=async()=>{if(!g||!p||!h){n({price:"Ã–nce rota hesaplanmalÄ±"});return}s(!0),n({});try{const t={startLocation:g,endLocation:p,distance:h.distance,vehicleType:d,vehicleCondition:f,isLuxury:m,timing:$,hasLoad:F,requestTime:new Date,isWeekend:K()},b=await Ne(t,h);Y(b),console.log("âœ… Price calculated:",b),r(3)}catch(t){console.error("Price calculation error:",t),n({price:"Fiyat hesaplanamadÄ±. LÃ¼tfen tekrar deneyin."})}finally{s(!1)}},xe=()=>{a===1?de():a===2&&me()},ue=()=>{a>1&&r(a-1)},he=()=>{r(1),C(null),L(null),U(null),Y(null),Q(null),v(""),M(""),x("sedan"),u("working"),z("now"),I(!1),w(!1),n({})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(ae,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"AnlÄ±k Fiyat Hesaplama"}),e.jsx("p",{className:"text-lg text-slate-600",children:"Yol yardÄ±m hizmeti iÃ§in ÅŸeffaf ve anÄ±nda fiyat teklifi"})]}),e.jsx("div",{className:"flex items-center justify-center mb-12",children:ne.map((t,b)=>e.jsxs(be.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full font-bold transition-all ${a>=t.id?"bg-gradient-to-br from-blue-600 to-indigo-600 text-white shadow-lg scale-110":"bg-gray-200 text-gray-500"}`,children:a>t.id?e.jsx(ye,{className:"w-6 h-6"}):t.id}),e.jsx("div",{className:"ml-3 text-left",children:e.jsx("p",{className:`text-sm font-bold ${a>=t.id?"text-blue-600":"text-gray-400"}`,children:t.title})})]}),b<ne.length-1&&e.jsx("div",{className:`w-16 h-1 mx-4 rounded-full transition-all ${a>t.id?"bg-blue-600":"bg-gray-200"}`})]},t.id))}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl p-8",children:[e.jsxs(ge,{mode:"wait",children:[a===1&&e.jsxs(k.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"ğŸ“ BaÅŸlangÄ±Ã§ ve BitiÅŸ NoktalarÄ±"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[e.jsx(Z,{className:"inline w-4 h-4 mr-2 text-green-600"}),"BaÅŸlangÄ±Ã§ NoktasÄ±"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:j,onChange:t=>v(t.target.value),onKeyDown:t=>t.key==="Enter"&&V(),placeholder:"Ã–rn: BalÄ±kesir, GÃ¶meÃ§ veya KadÄ±kÃ¶y, Ä°stanbul",className:`w-full px-4 py-3 border-2 rounded-xl ${l.startLocation?"border-red-500":"border-gray-200"}`}),G&&_.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-500 px-3 py-1",children:[_.length," sonuÃ§ bulundu - Birini seÃ§in:"]}),_.map((t,b)=>{var y;return e.jsx("button",{onClick:()=>{C(t),R(!1),v(t.address||"")},className:"w-full text-left px-3 py-2 hover:bg-green-50 rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-green-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:((y=t.address)==null?void 0:y.split(",")[0])||"Konum"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.address||"Adres bilgisi yok"})]})]})},b)})]})})]}),e.jsx("button",{onClick:V,disabled:D,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 disabled:opacity-50",children:D?e.jsx(E,{className:"w-5 h-5 animate-spin"}):e.jsx(J,{className:"w-5 h-5"})})]}),l.startLocation&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.startLocation}),g&&!G&&e.jsxs("p",{className:"text-green-600 text-sm mt-2",children:["âœ… ",g.address]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[e.jsx(X,{className:"inline w-4 h-4 mr-2 text-red-600"}),"BitiÅŸ NoktasÄ±"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:N,onChange:t=>M(t.target.value),onKeyDown:t=>t.key==="Enter"&&W(),placeholder:"Ã–rn: BalÄ±kesir, GÃ¶meÃ§ veya BeÅŸiktaÅŸ, Ä°stanbul",className:`w-full px-4 py-3 border-2 rounded-xl ${l.endLocation?"border-red-500":"border-gray-200"}`}),q&&A.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-500 px-3 py-1",children:[A.length," sonuÃ§ bulundu - Birini seÃ§in:"]}),A.map((t,b)=>{var y;return e.jsx("button",{onClick:()=>{L(t),T(!1),M(t.address||"")},className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-red-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:((y=t.address)==null?void 0:y.split(",")[0])||"Konum"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.address||"Adres bilgisi yok"})]})]})},b)})]})})]}),e.jsx("button",{onClick:W,disabled:H,className:"px-6 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 disabled:opacity-50",children:H?e.jsx(E,{className:"w-5 h-5 animate-spin"}):e.jsx(J,{className:"w-5 h-5"})})]}),l.endLocation&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.endLocation}),p&&!q&&e.jsxs("p",{className:"text-red-600 text-sm mt-2",children:["âœ… ",p.address]})]}),e.jsx(Be,{startLocation:g,endLocation:p,route:h,height:"300px",className:"mb-6"}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-bold text-blue-900 mb-2",children:"ğŸ’¡ PopÃ¼ler Åehirler"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ae.slice(0,8).map(t=>e.jsx("button",{onClick:()=>v(t),className:"px-3 py-1 bg-white text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100",children:t},t))})]}),l.route&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-red-700",children:l.route})})]},"step1"),a===2&&e.jsxs(k.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"ğŸš— AraÃ§ ve Hizmet DetaylarÄ±"}),h&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 mb-6 border-2 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-bold",children:"ğŸ“ Mesafe"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[h.distance," KM"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-bold",children:"â±ï¸ SÃ¼re"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["~",Math.round(h.duration/60)," dk"]})]}),B&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-bold",children:"ğŸ’° Tahmini"}),e.jsxs("p",{className:"text-xl font-bold text-blue-900",children:[B.min.toLocaleString()," - ",B.max.toLocaleString()," â‚º"]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"ğŸš— AraÃ§ Tipi"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ee.map(t=>e.jsxs("button",{onClick:()=>x(t.id),className:`p-4 rounded-xl border-2 transition-all ${d===t.id?"border-blue-600 bg-blue-50 shadow-lg scale-105":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx(t.icon,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"font-bold text-sm",children:t.label}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]},t.id))})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-yellow-500",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:t=>w(t.target.checked),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:"ğŸ’ LÃ¼ks AraÃ§"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ã–zel ekipman gerekli (+%20)"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"âš ï¸ AraÃ§ Durumu"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ke.map(t=>e.jsxs("button",{onClick:()=>u(t.id),className:`p-4 rounded-xl border-2 text-left transition-all ${f===t.id?"border-blue-600 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("p",{className:"font-bold text-sm mb-1",children:t.label}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]},t.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"â° Zaman Tercihi"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:$e.map(t=>e.jsxs("button",{onClick:()=>z(t.id),className:`p-4 rounded-xl border-2 transition-all ${$===t.id?"border-blue-600 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("p",{className:"font-bold text-sm mb-1",children:t.label}),e.jsx("p",{className:"text-xs text-gray-600",children:t.description})]},t.id))})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-amber-500",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:t=>I(t.target.checked),className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:"ğŸ“¦ YÃ¼k TaÅŸÄ±ma"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AraÃ§ta eÅŸya nakli var (+%10)"})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx(ve,{className:"inline w-4 h-4 mr-2"}),te()&&e.jsx("span",{className:"font-bold",children:"ğŸŒ™ Gece saati tespit edildi (+%25)"}),K()&&e.jsx("span",{className:"font-bold ml-2",children:"ğŸ“… Hafta sonu (+%10)"}),!te()&&!K()&&e.jsx("span",{children:"Standart mesai saati"})]})})]},"step2"),a===3&&o&&e.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-2xl",children:e.jsx(ke,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Fiyat HesaplamasÄ± TamamlandÄ±"}),e.jsx("p",{className:"text-lg text-slate-600",children:"Dinamik fiyatlandÄ±rma motorumuz size en ÅŸeffaf teklifi sunuyor"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[e.jsx("p",{className:"text-sm uppercase tracking-wide mb-2 opacity-90",children:"Tahmini Hizmet Bedeli"}),e.jsxs("p",{className:"text-5xl font-bold mb-4",children:[o.minPrice.toLocaleString()," - ",o.maxPrice.toLocaleString()," â‚º"]}),e.jsxs("p",{className:"text-sm opacity-75",children:["Net Tutar: ",o.finalPrice.toLocaleString()," â‚º (Â±%",o.breakdown.baseFee,")"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"DetaylÄ± Hesaplama"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"AÃ§Ä±lÄ±ÅŸ Ãœcreti"}),e.jsxs("span",{className:"font-bold",children:[o.breakdown.baseFee.toLocaleString()," â‚º"]})]}),o.breakdown.distanceBreakdown.shortKm>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Ä°lk ",o.breakdown.distanceBreakdown.shortKm," KM"]}),e.jsxs("span",{className:"font-bold",children:[o.breakdown.distanceBreakdown.shortCharge.toLocaleString()," â‚º"]})]}),o.breakdown.distanceBreakdown.mediumKm>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[o.breakdown.distanceBreakdown.mediumKm," KM (Orta Mesafe)"]}),e.jsxs("span",{className:"font-bold",children:[o.breakdown.distanceBreakdown.mediumCharge.toLocaleString()," â‚º"]})]}),o.breakdown.distanceBreakdown.longKm>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[o.breakdown.distanceBreakdown.longKm," KM (Uzun Mesafe)"]}),e.jsxs("span",{className:"font-bold",children:[o.breakdown.distanceBreakdown.longCharge.toLocaleString()," â‚º"]})]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-3 flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ara Toplam"}),e.jsxs("span",{className:"font-bold",children:[o.subtotal.toLocaleString()," â‚º"]})]})]})]}),o.breakdown.appliedMultipliers.length>0&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-6 mb-6",children:[e.jsx("h3",{className:"font-bold text-amber-900 mb-4",children:"ğŸ”§ Uygulanan Ã‡arpanlar"}),e.jsxs("div",{className:"space-y-2",children:[o.breakdown.appliedMultipliers.map((t,b)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-amber-900",children:t.name}),e.jsxs("span",{className:"text-amber-700 ml-2",children:["(",t.reason,")"]})]}),e.jsxs("span",{className:"font-bold text-amber-900",children:["x",t.value]})]},b)),e.jsxs("div",{className:"border-t-2 border-amber-300 pt-2 flex justify-between",children:[e.jsx("span",{className:"font-bold text-amber-900",children:"Toplam Ã‡arpan"}),e.jsxs("span",{className:"text-lg font-bold text-amber-900",children:["x",o.totalMultiplier]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"ğŸ“ Rota Bilgileri"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Toplam Mesafe"}),e.jsxs("span",{className:"font-bold text-blue-900",children:[o.route.distance," KM"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Tahmini SÃ¼re"}),e.jsxs("span",{className:"font-bold text-blue-900",children:["~",Math.round(o.route.duration/60)," dakika"]})]}),o.route.fromCache&&e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"âš¡ HÄ±zlÄ± hesaplama (Ã¶nbellekten)"})]})]}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsx("button",{onClick:he,className:"flex-1 px-6 py-4 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300",children:"ğŸ”„ Yeni Hesaplama"}),e.jsx("button",{onClick:()=>{window.location.href="/quote"},className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold hover:shadow-2xl transform hover:scale-105 transition-all",children:"âœ… Teklif Al"})]})]},"step3")]}),a<3&&e.jsxs("div",{className:"flex gap-4 mt-8",children:[a>1&&e.jsxs("button",{onClick:ue,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Geri"]}),e.jsx("button",{onClick:xe,disabled:i||a===1&&(!g||!p),className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),"HesaplanÄ±yor..."]}):e.jsxs(e.Fragment,{children:[a===1?"Rota Hesapla":"Fiyat Hesapla",e.jsx(fe,{className:"w-5 h-5"})]})})]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[e.jsxs("p",{children:["ğŸ’¡ ",e.jsx("strong",{children:"Bilgi:"})," Fiyatlar anlÄ±k olarak hesaplanÄ±r ve 24 saat geÃ§erlidir."]}),e.jsx("p",{className:"mt-2",children:"ğŸ—ºï¸ Harita verisi: OpenStreetMap â€¢ Rota motoru: OSRM"})]})]})})}export{Ge as PriceCalculatorWizard,Ge as default};

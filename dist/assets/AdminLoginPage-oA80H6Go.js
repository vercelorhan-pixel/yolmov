import{u as j,r as s,j as e,m as g,s as i,q as N}from"./index-CJss71Om.js";import{S}from"./shield-BR6PLRhE.js";import{C as k}from"./circle-alert-DoJr52ID.js";import{M as z}from"./mail-D5ViYZCN.js";import{L as A}from"./lock-Ez_DacfY.js";import{E}from"./eye-off-WX10dRzg.js";import{E as C}from"./eye-pvtujxRl.js";const Y=()=>{const p=j(),[d,f]=s.useState(""),[m,b]=s.useState(""),[o,y]=s.useState(!1),[c,x]=s.useState(""),[u,h]=s.useState(!1),v=async t=>{t.preventDefault(),x(""),h(!0);try{const{user:a,session:w}=await i.auth.signInAdmin(d,m);if(!a||!w)throw new Error("Giriş başarısız. Lütfen bilgilerinizi kontrol edin.");try{const l=(await i.adminUsers.getAll()).find(n=>n.id===a.id);if(!l)throw await i.auth.signOut(),new Error("Admin kaydı bulunamadı. Kayıt işleminiz eksik olabilir.");N.registerAsAgent(l.id,l.name).catch(n=>{console.warn("⚠️ Agent registration failed (migration might not be run):",n)}),localStorage.removeItem("yolmov_partner"),localStorage.removeItem("yolmov_customer"),localStorage.removeItem("yolmov_anonymous_caller_id"),localStorage.setItem("yolmov_admin",JSON.stringify(l)),p("/admin")}catch(r){throw await i.auth.signOut(),new Error("Admin bilgileri alınamadı: "+((r==null?void 0:r.message)||"Bilinmeyen hata"))}}catch(a){console.error("Login error:",a),x(a.message||"Geçersiz e-posta veya şifre")}finally{h(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(S,{size:40,className:"text-orange-500"})}),e.jsx("h1",{className:"text-2xl font-black text-white mb-2",children:"Yolmov"}),e.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Admin Panel Girişi"})]}),e.jsxs("form",{onSubmit:v,className:"p-8",children:[c&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[e.jsx(k,{size:20,className:"text-red-600 shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 font-medium",children:c})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"E-posta"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"email",value:d,onChange:t=>f(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-slate-900 focus:border-orange-500 focus:bg-white focus:ring-0 outline-none transition-all",placeholder:"admin@platform",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Şifre"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:o?"text":"password",value:m,onChange:t=>b(t.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-slate-900 focus:border-orange-500 focus:bg-white focus:ring-0 outline-none transition-all",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:o?e.jsx(E,{size:20}):e.jsx(C,{size:20})})]})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full mt-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-bold text-lg shadow-lg shadow-orange-200 hover:shadow-xl hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Giriş yapılıyor...":"Giriş Yap"}),e.jsx("div",{className:"mt-6 text-center space-y-2",children:e.jsx("a",{href:"/operasyon/kayit",className:"text-xs text-orange-600 font-bold underline block",children:"İlk admin misiniz? Kayıt Olun"})})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-slate-400",children:"© 2024 Yolmov. Tüm hakları saklıdır."})})]})})};export{Y as default};

import{c as ws,o as ke,r as o,s as P,j as e,p as Te,C as oe,S as ls,m as q,d as Es,M as Ne,X as ne,q as rs,L as ce,t as pe,l as ja,T as te,R as Ki,v as jt,A as fe,a as Oe,h as ge,w as or,x as Vi,P as je,y as Pl,z as ia,E as Bl,b as Gi,H as cr,G as qs,B as Yi,e as yt,N as Me,W as dr,I as xr,u as qi,J as Ui,K as Ji}from"./index-B96qjpmI.js";import{F as me}from"./file-text-DzMnV4u5.js";import{C as ye}from"./circle-check-big-CfiGJ0wT.js";import{D as js}from"./dollar-sign-B2IB7Fkv.js";import{F as mr}from"./filter-5Fi627aH.js";import{T as Ia}from"./trending-up-mTw6fEL1.js";import{C as Ea}from"./credit-card-DvVUxDUl.js";import{D as ts}from"./download-C9NS9gq9.js";import{E as Ds}from"./eye-DMcmj402.js";import{i as Qe,c as es,a as ss}from"./imageCompression-Bm6Dowu7.js";import{U as Ts,u as Wi,T as Xi}from"./useToast-BYmYX2hs.js";import{T as Pa}from"./trash-2-BtTNiK9D.js";import{P as as}from"./plus-DoMGWqEy.js";import{C as Ba}from"./circle-alert-CNVqdqI2.js";import{C as ur}from"./calendar-5_IxpoiD.js";import{P as gs}from"./pen-5gemzIke.js";import{P as Zi}from"./percent-Cc4bwYGH.js";import{c as Ml,g as Rl,s as Ol}from"./showcaseSanitizer-CU8VnsaU.js";import{S as Nt,H as hr,W as vt,F as ya}from"./wallet-DIM6pNiW.js";import{Z as oa}from"./zap-CW4XtZYT.js";import{S as Na}from"./save-Q4Ps4ANm.js";import{S as re}from"./star-DJo5WLX6.js";import{S as pr}from"./shield-D8ddTCBm.js";import{A as Qi}from"./award-CmdFfGJt.js";import{I as Ae}from"./info-BNJZFqlF.js";import{P as Ll}from"./phone-missed-CxfRRl-t.js";import{C as xe}from"./camera-5P-n-cHC.js";import{S as Is}from"./send-BNunu3Ql.js";import{C as eo}from"./circle-help-CJdQt9b8.js";import{C as As}from"./circle-check-C7-L_BWb.js";import{L as br}from"./lock-C0_n--h3.js";import{B as fr}from"./building-JvsCjPCO.js";import{M as so}from"./map-B8YC2tYy.js";import{R as va}from"./route-DO6rTlze.js";import{M as to}from"./mail-CnPOnHZF.js";import{L as ao}from"./log-out-cGX14-Ep.js";import"./image-DiF7Vy9T.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ws("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ws("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ws("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ws("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=ws("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=ws("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ws("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),io=()=>{};var $l={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=function(s){const t=[];let a=0;for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);i<128?t[a++]=i:i<2048?(t[a++]=i>>6|192,t[a++]=i&63|128):(i&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++n)&1023),t[a++]=i>>18|240,t[a++]=i>>12&63|128,t[a++]=i>>6&63|128,t[a++]=i&63|128):(t[a++]=i>>12|224,t[a++]=i>>6&63|128,t[a++]=i&63|128)}return t},oo=function(s){const t=[];let a=0,n=0;for(;a<s.length;){const i=s[a++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=s[a++];t[n++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=s[a++],h=s[a++],u=s[a++],f=((i&7)<<18|(r&63)<<12|(h&63)<<6|u&63)-65536;t[n++]=String.fromCharCode(55296+(f>>10)),t[n++]=String.fromCharCode(56320+(f&1023))}else{const r=s[a++],h=s[a++];t[n++]=String.fromCharCode((i&15)<<12|(r&63)<<6|h&63)}}return t.join("")},jr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<s.length;i+=3){const r=s[i],h=i+1<s.length,u=h?s[i+1]:0,f=i+2<s.length,x=f?s[i+2]:0,I=r>>2,B=(r&3)<<4|u>>4;let m=(u&15)<<2|x>>6,T=x&63;f||(T=64,h||(m=64)),n.push(a[I],a[B],a[m],a[T])}return n.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(gr(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):oo(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<s.length;){const r=a[s.charAt(i++)],u=i<s.length?a[s.charAt(i)]:0;++i;const x=i<s.length?a[s.charAt(i)]:64;++i;const B=i<s.length?a[s.charAt(i)]:64;if(++i,r==null||u==null||x==null||B==null)throw new co;const m=r<<2|u>>4;if(n.push(m),x!==64){const T=u<<4&240|x>>2;if(n.push(T),B!==64){const w=x<<6&192|B;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class co extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xo=function(s){const t=gr(s);return jr.encodeByteArray(t,!0)},yr=function(s){return xo(s).replace(/\./g,"")},mo=function(s){try{return jr.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=()=>uo().__FIREBASE_DEFAULTS__,po=()=>{if(typeof process>"u"||typeof $l>"u")return;const s=$l.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bo=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&mo(s[1]);return t&&JSON.parse(t)},fo=()=>{try{return io()||ho()||po()||bo()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Nr=()=>{var s;return(s=fo())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,n)=>{a?this.reject(a):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,n))}}}function vr(){try{return typeof indexedDB=="object"}catch{return!1}}function wr(){return new Promise((s,t)=>{try{let a=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(n),s(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var r;t(((r=i.error)==null?void 0:r.message)||"")}}catch(a){t(a)}})}function jo(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirebaseError";class Ps extends Error{constructor(t,a,n){super(a),this.code=t,this.customData=n,this.name=yo,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(t,a,n){this.service=t,this.serviceName=a,this.errors=n}create(t,...a){const n=a[0]||{},i=`${this.service}/${t}`,r=this.errors[t],h=r?No(r,n):"Error",u=`${this.serviceName}: ${h} (${i}).`;return new Ps(i,u,n)}}function No(s,t){return s.replace(vo,(a,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const vo=/\{\$([^}]+)}/g;function ka(s,t){if(s===t)return!0;const a=Object.keys(s),n=Object.keys(t);for(const i of a){if(!n.includes(i))return!1;const r=s[i],h=t[i];if(Fl(r)&&Fl(h)){if(!ka(r,h))return!1}else if(r!==h)return!1}for(const i of n)if(!a.includes(i))return!1;return!0}function Fl(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s){return s&&s._delegate?s._delegate:s}class os{constructor(t,a,n){this.name=t,this.instanceFactory=a,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const n=new go;if(this.instancesDeferred.set(a,n),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(_o(t))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[a,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const r=this.getOrInitializeService({instanceIdentifier:i});n.resolve(r)}catch{}}}}clearInstance(t=bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bs){return this.instances.has(t)}getOptions(t=bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:a});for(const[r,h]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(r);n===u&&h.resolve(i)}return i}onInit(t,a){const n=this.normalizeInstanceIdentifier(a),i=this.onInitCallbacks.get(n)??new Set;i.add(t),this.onInitCallbacks.set(n,i);const r=this.instances.get(n);return r&&t(r,n),()=>{i.delete(t)}}invokeOnInitCallbacks(t,a){const n=this.onInitCallbacks.get(a);if(n)for(const i of n)try{i(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ko(t),options:a}),this.instances.set(t,n),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=bs){return this.component?this.component.multipleInstances?t:bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ko(s){return s===bs?void 0:s}function _o(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new wo(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(W||(W={}));const zo={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Co=W.INFO,To={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Ao=(s,t,...a)=>{if(t<s.logLevel)return;const n=new Date().toISOString(),i=To[t];if(i)console[i](`[${n}]  ${s.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Do{constructor(t){this.name=t,this._logLevel=Co,this._logHandler=Ao,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in W))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zo[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...t),this._logHandler(this,W.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...t),this._logHandler(this,W.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,W.INFO,...t),this._logHandler(this,W.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,W.WARN,...t),this._logHandler(this,W.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...t),this._logHandler(this,W.ERROR,...t)}}const Io=(s,t)=>t.some(a=>s instanceof a);let Hl,Kl;function Eo(){return Hl||(Hl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Po(){return Kl||(Kl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _r=new WeakMap,_a=new WeakMap,Sr=new WeakMap,ca=new WeakMap,Ma=new WeakMap;function Bo(s){const t=new Promise((a,n)=>{const i=()=>{s.removeEventListener("success",r),s.removeEventListener("error",h)},r=()=>{a(Le(s.result)),i()},h=()=>{n(s.error),i()};s.addEventListener("success",r),s.addEventListener("error",h)});return t.then(a=>{a instanceof IDBCursor&&_r.set(a,s)}).catch(()=>{}),Ma.set(t,s),t}function Mo(s){if(_a.has(s))return;const t=new Promise((a,n)=>{const i=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",h),s.removeEventListener("abort",h)},r=()=>{a(),i()},h=()=>{n(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",r),s.addEventListener("error",h),s.addEventListener("abort",h)});_a.set(s,t)}let Sa={get(s,t,a){if(s instanceof IDBTransaction){if(t==="done")return _a.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Sr.get(s);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Le(s[t])},set(s,t,a){return s[t]=a,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Ro(s){Sa=s(Sa)}function Oo(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const n=s.call(da(this),t,...a);return Sr.set(n,t.sort?t.sort():[t]),Le(n)}:Po().includes(s)?function(...t){return s.apply(da(this),t),Le(_r.get(this))}:function(...t){return Le(s.apply(da(this),t))}}function Lo(s){return typeof s=="function"?Oo(s):(s instanceof IDBTransaction&&Mo(s),Io(s,Eo())?new Proxy(s,Sa):s)}function Le(s){if(s instanceof IDBRequest)return Bo(s);if(ca.has(s))return ca.get(s);const t=Lo(s);return t!==s&&(ca.set(s,t),Ma.set(t,s)),t}const da=s=>Ma.get(s);function zt(s,t,{blocked:a,upgrade:n,blocking:i,terminated:r}={}){const h=indexedDB.open(s,t),u=Le(h);return n&&h.addEventListener("upgradeneeded",f=>{n(Le(h.result),f.oldVersion,f.newVersion,Le(h.transaction),f)}),a&&h.addEventListener("blocked",f=>a(f.oldVersion,f.newVersion,f)),u.then(f=>{r&&f.addEventListener("close",()=>r()),i&&f.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),u}function xa(s,{blocked:t}={}){const a=indexedDB.deleteDatabase(s);return t&&a.addEventListener("blocked",n=>t(n.oldVersion,n)),Le(a).then(()=>{})}const $o=["get","getKey","getAll","getAllKeys","count"],Fo=["put","add","delete","clear"],ma=new Map;function Vl(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(ma.get(t))return ma.get(t);const a=t.replace(/FromIndex$/,""),n=t!==a,i=Fo.includes(a);if(!(a in(n?IDBIndex:IDBObjectStore).prototype)||!(i||$o.includes(a)))return;const r=async function(h,...u){const f=this.transaction(h,i?"readwrite":"readonly");let x=f.store;return n&&(x=x.index(u.shift())),(await Promise.all([x[a](...u),i&&f.done]))[0]};return ma.set(t,r),r}Ro(s=>({...s,get:(t,a,n)=>Vl(t,a)||s.get(t,a,n),has:(t,a)=>!!Vl(t,a)||s.has(t,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Ko(a)){const n=a.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(a=>a).join(" ")}}function Ko(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const za="@firebase/app",Gl="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e=new Do("@firebase/app"),Vo="@firebase/app-compat",Go="@firebase/analytics-compat",Yo="@firebase/analytics",qo="@firebase/app-check-compat",Uo="@firebase/app-check",Jo="@firebase/auth",Wo="@firebase/auth-compat",Xo="@firebase/database",Zo="@firebase/data-connect",Qo="@firebase/database-compat",ec="@firebase/functions",sc="@firebase/functions-compat",tc="@firebase/installations",ac="@firebase/installations-compat",lc="@firebase/messaging",rc="@firebase/messaging-compat",nc="@firebase/performance",ic="@firebase/performance-compat",oc="@firebase/remote-config",cc="@firebase/remote-config-compat",dc="@firebase/storage",xc="@firebase/storage-compat",mc="@firebase/firestore",uc="@firebase/ai",hc="@firebase/firestore-compat",pc="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]",bc={[za]:"fire-core",[Vo]:"fire-core-compat",[Yo]:"fire-analytics",[Go]:"fire-analytics-compat",[Uo]:"fire-app-check",[qo]:"fire-app-check-compat",[Jo]:"fire-auth",[Wo]:"fire-auth-compat",[Xo]:"fire-rtdb",[Zo]:"fire-data-connect",[Qo]:"fire-rtdb-compat",[ec]:"fire-fn",[sc]:"fire-fn-compat",[tc]:"fire-iid",[ac]:"fire-iid-compat",[lc]:"fire-fcm",[rc]:"fire-fcm-compat",[nc]:"fire-perf",[ic]:"fire-perf-compat",[oc]:"fire-rc",[cc]:"fire-rc-compat",[dc]:"fire-gcs",[xc]:"fire-gcs-compat",[mc]:"fire-fst",[hc]:"fire-fst-compat",[uc]:"fire-vertex","fire-js":"fire-js",[pc]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt=new Map,fc=new Map,Ta=new Map;function Yl(s,t){try{s.container.addComponent(t)}catch(a){$e.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,a)}}function ys(s){const t=s.name;if(Ta.has(t))return $e.debug(`There were multiple attempts to register component ${t}.`),!1;Ta.set(t,s);for(const a of wt.values())Yl(a,s);for(const a of fc.values())Yl(a,s);return!0}function Ra(s,t){const a=s.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),s.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new St("app","Firebase",gc);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,a,n){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}function zr(s,t={}){let a=s;typeof t!="object"&&(t={name:t});const n={name:Ca,automaticDataCollectionEnabled:!0,...t},i=n.name;if(typeof i!="string"||!i)throw ns.create("bad-app-name",{appName:String(i)});if(a||(a=Nr()),!a)throw ns.create("no-options");const r=wt.get(i);if(r){if(ka(a,r.options)&&ka(n,r.config))return r;throw ns.create("duplicate-app",{appName:i})}const h=new So(i);for(const f of Ta.values())h.addComponent(f);const u=new jc(a,n,h);return wt.set(i,u),u}function yc(s=Ca){const t=wt.get(s);if(!t&&s===Ca&&Nr())return zr();if(!t)throw ns.create("no-app",{appName:s});return t}function is(s,t,a){let n=bc[s]??s;a&&(n+=`-${a}`);const i=n.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const h=[`Unable to register library "${n}" with version "${t}":`];i&&h.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&r&&h.push("and"),r&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$e.warn(h.join(" "));return}ys(new os(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="firebase-heartbeat-database",vc=1,Us="firebase-heartbeat-store";let ua=null;function Cr(){return ua||(ua=zt(Nc,vc,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Us)}catch(a){console.warn(a)}}}}).catch(s=>{throw ns.create("idb-open",{originalErrorMessage:s.message})})),ua}async function wc(s){try{const a=(await Cr()).transaction(Us),n=await a.objectStore(Us).get(Tr(s));return await a.done,n}catch(t){if(t instanceof Ps)$e.warn(t.message);else{const a=ns.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$e.warn(a.message)}}}async function ql(s,t){try{const n=(await Cr()).transaction(Us,"readwrite");await n.objectStore(Us).put(t,Tr(s)),await n.done}catch(a){if(a instanceof Ps)$e.warn(a.message);else{const n=ns.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});$e.warn(n.message)}}}function Tr(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=1024,_c=30;class Sc{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new Cc(a),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,a;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ul();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)==null?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(h=>h.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>_c){const h=Tc(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){$e.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=Ul(),{heartbeatsToSend:n,unsentEntries:i}=zc(this._heartbeatsCache.heartbeats),r=yr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=a,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(a){return $e.warn(a),""}}}function Ul(){return new Date().toISOString().substring(0,10)}function zc(s,t=kc){const a=[];let n=s.slice();for(const i of s){const r=a.find(h=>h.agent===i.agent);if(r){if(r.dates.push(i.date),Jl(a)>t){r.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),Jl(a)>t){a.pop();break}n=n.slice(1)}return{heartbeatsToSend:a,unsentEntries:n}}class Cc{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vr()?wr().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await wc(this.app);return a!=null&&a.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return ql(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return ql(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Jl(s){return yr(JSON.stringify({version:2,heartbeats:s})).length}function Tc(s){if(s.length===0)return-1;let t=0,a=s[0].date;for(let n=1;n<s.length;n++)s[n].date<a&&(a=s[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(s){ys(new os("platform-logger",t=>new Ho(t),"PRIVATE")),ys(new os("heartbeat",t=>new Sc(t),"PRIVATE")),is(za,Gl,s),is(za,Gl,"esm2020"),is("fire-js","")}Ac("");var Dc="firebase",Ic="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(Dc,Ic,"app");const Ar="@firebase/installations",Oa="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=1e4,Ir=`w:${Oa}`,Er="FIS_v2",Ec="https://firebaseinstallations.googleapis.com/v1",Pc=3600*1e3,Bc="installations",Mc="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ns=new St(Bc,Mc,Rc);function Pr(s){return s instanceof Ps&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br({projectId:s}){return`${Ec}/projects/${s}/installations`}function Mr(s){return{token:s.token,requestStatus:2,expiresIn:Lc(s.expiresIn),creationTime:Date.now()}}async function Rr(s,t){const n=(await t.json()).error;return Ns.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Or({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Oc(s,{refreshToken:t}){const a=Or(s);return a.append("Authorization",$c(t)),a}async function Lr(s){const t=await s();return t.status>=500&&t.status<600?s():t}function Lc(s){return Number(s.replace("s","000"))}function $c(s){return`${Er} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc({appConfig:s,heartbeatServiceProvider:t},{fid:a}){const n=Br(s),i=Or(s),r=t.getImmediate({optional:!0});if(r){const x=await r.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const h={fid:a,authVersion:Er,appId:s.appId,sdkVersion:Ir},u={method:"POST",headers:i,body:JSON.stringify(h)},f=await Lr(()=>fetch(n,u));if(f.ok){const x=await f.json();return{fid:x.fid||a,registrationStatus:2,refreshToken:x.refreshToken,authToken:Mr(x.authToken)}}else throw await Rr("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=/^[cdef][\w-]{21}$/,Aa="";function Vc(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const a=Gc(s);return Kc.test(a)?a:Aa}catch{return Aa}}function Gc(s){return Hc(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Map;function Hr(s,t){const a=Ct(s);Kr(a,t),Yc(a,t)}function Kr(s,t){const a=Fr.get(s);if(a)for(const n of a)n(t)}function Yc(s,t){const a=qc();a&&a.postMessage({key:s,fid:t}),Uc()}let fs=null;function qc(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=s=>{Kr(s.data.key,s.data.fid)}),fs}function Uc(){Fr.size===0&&fs&&(fs.close(),fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="firebase-installations-database",Wc=1,vs="firebase-installations-store";let ha=null;function La(){return ha||(ha=zt(Jc,Wc,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(vs)}}})),ha}async function kt(s,t){const a=Ct(s),i=(await La()).transaction(vs,"readwrite"),r=i.objectStore(vs),h=await r.get(a);return await r.put(t,a),await i.done,(!h||h.fid!==t.fid)&&Hr(s,t.fid),t}async function Vr(s){const t=Ct(s),n=(await La()).transaction(vs,"readwrite");await n.objectStore(vs).delete(t),await n.done}async function Tt(s,t){const a=Ct(s),i=(await La()).transaction(vs,"readwrite"),r=i.objectStore(vs),h=await r.get(a),u=t(h);return u===void 0?await r.delete(a):await r.put(u,a),await i.done,u&&(!h||h.fid!==u.fid)&&Hr(s,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(s){let t;const a=await Tt(s.appConfig,n=>{const i=Xc(n),r=Zc(s,i);return t=r.registrationPromise,r.installationEntry});return a.fid===Aa?{installationEntry:await t}:{installationEntry:a,registrationPromise:t}}function Xc(s){const t=s||{fid:Vc(),registrationStatus:0};return Gr(t)}function Zc(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ns.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const a={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=Qc(s,a);return{installationEntry:a,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:ed(s)}:{installationEntry:t}}async function Qc(s,t){try{const a=await Fc(s,t);return kt(s.appConfig,a)}catch(a){throw Pr(a)&&a.customData.serverCode===409?await Vr(s.appConfig):await kt(s.appConfig,{fid:t.fid,registrationStatus:0}),a}}async function ed(s){let t=await Wl(s.appConfig);for(;t.registrationStatus===1;)await $r(100),t=await Wl(s.appConfig);if(t.registrationStatus===0){const{installationEntry:a,registrationPromise:n}=await $a(s);return n||a}return t}function Wl(s){return Tt(s,t=>{if(!t)throw Ns.create("installation-not-found");return Gr(t)})}function Gr(s){return sd(s)?{fid:s.fid,registrationStatus:0}:s}function sd(s){return s.registrationStatus===1&&s.registrationTime+Dr<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td({appConfig:s,heartbeatServiceProvider:t},a){const n=ad(s,a),i=Oc(s,a),r=t.getImmediate({optional:!0});if(r){const x=await r.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const h={installation:{sdkVersion:Ir,appId:s.appId}},u={method:"POST",headers:i,body:JSON.stringify(h)},f=await Lr(()=>fetch(n,u));if(f.ok){const x=await f.json();return Mr(x)}else throw await Rr("Generate Auth Token",f)}function ad(s,{fid:t}){return`${Br(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(s,t=!1){let a;const n=await Tt(s.appConfig,r=>{if(!Yr(r))throw Ns.create("not-registered");const h=r.authToken;if(!t&&nd(h))return r;if(h.requestStatus===1)return a=ld(s,t),r;{if(!navigator.onLine)throw Ns.create("app-offline");const u=od(r);return a=rd(s,u),u}});return a?await a:n.authToken}async function ld(s,t){let a=await Xl(s.appConfig);for(;a.authToken.requestStatus===1;)await $r(100),a=await Xl(s.appConfig);const n=a.authToken;return n.requestStatus===0?Fa(s,t):n}function Xl(s){return Tt(s,t=>{if(!Yr(t))throw Ns.create("not-registered");const a=t.authToken;return cd(a)?{...t,authToken:{requestStatus:0}}:t})}async function rd(s,t){try{const a=await td(s,t),n={...t,authToken:a};return await kt(s.appConfig,n),a}catch(a){if(Pr(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await Vr(s.appConfig);else{const n={...t,authToken:{requestStatus:0}};await kt(s.appConfig,n)}throw a}}function Yr(s){return s!==void 0&&s.registrationStatus===2}function nd(s){return s.requestStatus===2&&!id(s)}function id(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+Pc}function od(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function cd(s){return s.requestStatus===1&&s.requestTime+Dr<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(s){const t=s,{installationEntry:a,registrationPromise:n}=await $a(t);return n?n.catch(console.error):Fa(t).catch(console.error),a.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(s,t=!1){const a=s;return await md(a),(await Fa(a,t)).token}async function md(s){const{registrationPromise:t}=await $a(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(s){if(!s||!s.options)throw pa("App Configuration");if(!s.name)throw pa("App Name");const t=["projectId","apiKey","appId"];for(const a of t)if(!s.options[a])throw pa(a);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function pa(s){return Ns.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="installations",hd="installations-internal",pd=s=>{const t=s.getProvider("app").getImmediate(),a=ud(t),n=Ra(t,"heartbeat");return{app:t,appConfig:a,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},bd=s=>{const t=s.getProvider("app").getImmediate(),a=Ra(t,qr).getImmediate();return{getId:()=>dd(a),getToken:i=>xd(a,i)}};function fd(){ys(new os(qr,pd,"PUBLIC")),ys(new os(hd,bd,"PRIVATE"))}fd();is(Ar,Oa);is(Ar,Oa,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="/firebase-messaging-sw.js",jd="/firebase-cloud-messaging-push-scope",Ur="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yd="https://fcmregistrations.googleapis.com/v1",Jr="google.c.a.c_id",Nd="google.c.a.c_l",vd="google.c.a.ts",wd="google.c.a.e",Zl=1e4;var Ql;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Ql||(Ql={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Js;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Js||(Js={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(s){const t=new Uint8Array(s);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kd(s){const t="=".repeat((4-s.length%4)%4),a=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(a),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="fcm_token_details_db",_d=5,er="fcm_token_object_Store";async function Sd(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(r=>r.name).includes(ba))return null;let t=null;return(await zt(ba,_d,{upgrade:async(n,i,r,h)=>{if(i<2||!n.objectStoreNames.contains(er))return;const u=h.objectStore(er),f=await u.index("fcmSenderId").get(s);if(await u.clear(),!!f){if(i===2){const x=f;if(!x.auth||!x.p256dh||!x.endpoint)return;t={token:x.fcmToken,createTime:x.createTime??Date.now(),subscriptionOptions:{auth:x.auth,p256dh:x.p256dh,endpoint:x.endpoint,swScope:x.swScope,vapidKey:typeof x.vapidKey=="string"?x.vapidKey:Re(x.vapidKey)}}}else if(i===3){const x=f;t={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:Re(x.auth),p256dh:Re(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:Re(x.vapidKey)}}}else if(i===4){const x=f;t={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:Re(x.auth),p256dh:Re(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:Re(x.vapidKey)}}}}}})).close(),await xa(ba),await xa("fcm_vapid_details_db"),await xa("undefined"),zd(t)?t:null}function zd(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:t}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="firebase-messaging-database",Td=1,Ws="firebase-messaging-store";let fa=null;function Wr(){return fa||(fa=zt(Cd,Td,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Ws)}}})),fa}async function Ad(s){const t=Xr(s),n=await(await Wr()).transaction(Ws).objectStore(Ws).get(t);if(n)return n;{const i=await Sd(s.appConfig.senderId);if(i)return await Ha(s,i),i}}async function Ha(s,t){const a=Xr(s),i=(await Wr()).transaction(Ws,"readwrite");return await i.objectStore(Ws).put(t,a),await i.done,t}function Xr({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},he=new St("messaging","Messaging",Dd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(s,t){const a=await Va(s),n=Zr(t),i={method:"POST",headers:a,body:JSON.stringify(n)};let r;try{r=await(await fetch(Ka(s.appConfig),i)).json()}catch(h){throw he.create("token-subscribe-failed",{errorInfo:h==null?void 0:h.toString()})}if(r.error){const h=r.error.message;throw he.create("token-subscribe-failed",{errorInfo:h})}if(!r.token)throw he.create("token-subscribe-no-token");return r.token}async function Ed(s,t){const a=await Va(s),n=Zr(t.subscriptionOptions),i={method:"PATCH",headers:a,body:JSON.stringify(n)};let r;try{r=await(await fetch(`${Ka(s.appConfig)}/${t.token}`,i)).json()}catch(h){throw he.create("token-update-failed",{errorInfo:h==null?void 0:h.toString()})}if(r.error){const h=r.error.message;throw he.create("token-update-failed",{errorInfo:h})}if(!r.token)throw he.create("token-update-no-token");return r.token}async function Pd(s,t){const n={method:"DELETE",headers:await Va(s)};try{const r=await(await fetch(`${Ka(s.appConfig)}/${t}`,n)).json();if(r.error){const h=r.error.message;throw he.create("token-unsubscribe-failed",{errorInfo:h})}}catch(i){throw he.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Ka({projectId:s}){return`${yd}/projects/${s}/registrations`}async function Va({appConfig:s,installations:t}){const a=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${a}`})}function Zr({p256dh:s,auth:t,endpoint:a,vapidKey:n}){const i={web:{endpoint:a,auth:t,p256dh:s}};return n!==Ur&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=10080*60*1e3;async function Md(s){const t=await Od(s.swRegistration,s.vapidKey),a={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:t.endpoint,auth:Re(t.getKey("auth")),p256dh:Re(t.getKey("p256dh"))},n=await Ad(s.firebaseDependencies);if(n){if(Ld(n.subscriptionOptions,a))return Date.now()>=n.createTime+Bd?Rd(s,{token:n.token,createTime:Date.now(),subscriptionOptions:a}):n.token;try{await Pd(s.firebaseDependencies,n.token)}catch(i){console.warn(i)}return sr(s.firebaseDependencies,a)}else return sr(s.firebaseDependencies,a)}async function Rd(s,t){try{const a=await Ed(s.firebaseDependencies,t),n={...t,token:a,createTime:Date.now()};return await Ha(s.firebaseDependencies,n),a}catch(a){throw a}}async function sr(s,t){const n={token:await Id(s,t),createTime:Date.now(),subscriptionOptions:t};return await Ha(s,n),n.token}async function Od(s,t){const a=await s.pushManager.getSubscription();return a||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kd(t)})}function Ld(s,t){const a=t.vapidKey===s.vapidKey,n=t.endpoint===s.endpoint,i=t.auth===s.auth,r=t.p256dh===s.p256dh;return a&&n&&i&&r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(s){const t={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return $d(t,s),Fd(t,s),Hd(t,s),t}function $d(s,t){if(!t.notification)return;s.notification={};const a=t.notification.title;a&&(s.notification.title=a);const n=t.notification.body;n&&(s.notification.body=n);const i=t.notification.image;i&&(s.notification.image=i);const r=t.notification.icon;r&&(s.notification.icon=r)}function Fd(s,t){t.data&&(s.data=t.data)}function Hd(s,t){var i,r,h,u;if(!t.fcmOptions&&!((i=t.notification)!=null&&i.click_action))return;s.fcmOptions={};const a=((r=t.fcmOptions)==null?void 0:r.link)??((h=t.notification)==null?void 0:h.click_action);a&&(s.fcmOptions.link=a);const n=(u=t.fcmOptions)==null?void 0:u.analytics_label;n&&(s.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(s){return typeof s=="object"&&!!s&&Jr in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(s){if(!s||!s.options)throw ga("App Configuration Object");if(!s.name)throw ga("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:a}=s;for(const n of t)if(!a[n])throw ga(n);return{appName:s.name,projectId:a.projectId,apiKey:a.apiKey,appId:a.appId,senderId:a.messagingSenderId}}function ga(s){return he.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(t,a,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Vd(t);this.firebaseDependencies={app:t,appConfig:i,installations:a,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(s){try{s.swRegistration=await navigator.serviceWorker.register(gd,{scope:jd}),s.swRegistration.update().catch(()=>{}),await qd(s.swRegistration)}catch(t){throw he.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function qd(s){return new Promise((t,a)=>{const n=setTimeout(()=>a(new Error(`Service worker not registered after ${Zl} ms`)),Zl),i=s.installing||s.waiting;s.active?(clearTimeout(n),t()):i?i.onstatechange=r=>{var h;((h=r.target)==null?void 0:h.state)==="activated"&&(i.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),a(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(s,t){if(!t&&!s.swRegistration&&await Yd(s),!(!t&&s.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw he.create("invalid-sw-registration");s.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(s,t){t?s.vapidKey=t:s.vapidKey||(s.vapidKey=Ur)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(s,t){if(!navigator)throw he.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw he.create("permission-blocked");return await Jd(s,t==null?void 0:t.vapidKey),await Ud(s,t==null?void 0:t.serviceWorkerRegistration),Md(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(s,t,a){const n=Xd(t);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:a[Jr],message_name:a[Nd],message_time:a[vd],message_device_time:Math.floor(Date.now()/1e3)})}function Xd(s){switch(s){case Js.NOTIFICATION_CLICKED:return"notification_open";case Js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(s,t){const a=t.data;if(!a.isFirebaseMessaging)return;s.onMessageHandler&&a.messageType===Js.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(tr(a)):s.onMessageHandler.next(tr(a)));const n=a.data;Kd(n)&&n[wd]==="1"&&await Wd(s,a.messageType,n)}const ar="@firebase/messaging",lr="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=s=>{const t=new Gd(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>Zd(t,a)),t},ex=s=>{const t=s.getProvider("messaging").getImmediate();return{getToken:n=>Qr(t,n)}};function sx(){ys(new os("messaging",Qd,"PUBLIC")),ys(new os("messaging-internal",ex,"PRIVATE")),is(ar,lr),is(ar,lr,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(){try{await wr()}catch{return!1}return typeof window<"u"&&vr()&&jo()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(s=yc()){return tx().then(t=>{if(!t)throw he.create("unsupported-browser")},t=>{throw he.create("indexed-db-unsupported")}),Ra(kr(s),"messaging").getImmediate()}async function lx(s,t){return s=kr(s),Qr(s,t)}sx();const rx={apiKey:"AIzaSyBoF-wh-ro18wSgJR5FFT7WzrLZX48Kcck",authDomain:"yolmov-web-push.firebaseapp.com",projectId:"yolmov-web-push",storageBucket:"yolmov-web-push.firebasestorage.app",messagingSenderId:"806551149404",appId:"1:806551149404:web:d356974ca9c187440e7f99",measurementId:"G-N99CHPLQHW"},nx="BOHukI7P2r18VSnpIULfSV-z75IbItBU9ZtlfvxZOCLJK3XqiXTi47yCv2QaT_0sldlOqmkymGqkZdUMq-OG1KM",ix=zr(rx);let Da=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{Da=ax(ix)}catch(s){console.warn("Firebase Messaging could not be initialized:",s)}const ox=async()=>{var s,t;try{if(typeof window>"u"||!("Notification"in window))return console.warn("[FCM] Bu tarayc bildirim desteklemiyor"),null;if(!("PushManager"in window))return console.warn("[FCM] Bu tarayc Push API desteklemiyor"),null;const a=await Notification.requestPermission();if(console.log("[FCM] Bildirim izni durumu:",a),a!=="granted")return console.warn("[FCM] Bildirim izni reddedildi"),null;if(!Da)return console.warn("[FCM] Firebase Messaging balatlamad"),null;console.log("[FCM] Service Worker hazrlanyor...");let n=null;const i=await navigator.serviceWorker.getRegistrations();for(const u of i)if((s=u.active)!=null&&s.scriptURL.includes("firebase-messaging-sw.js")){n=u,console.log("[FCM] Mevcut Firebase SW bulundu:",u.scope);break}if(!n&&(console.log("[FCM] Yeni Firebase SW kaydediliyor..."),n=await navigator.serviceWorker.register("/firebase-messaging-sw.js"),console.log("[FCM] Firebase SW kaydedildi, scope:",n.scope),n.installing||n.waiting)){const u=n.installing||n.waiting;u&&await new Promise(f=>{const x=setTimeout(()=>{console.log("[FCM] SW activation timeout"),f()},1e4),I=()=>{u.state==="activated"&&(clearTimeout(x),console.log("[FCM] SW aktif oldu"),f())};u.addEventListener("statechange",I),I()})}await navigator.serviceWorker.ready,console.log("[FCM] Service Worker hazr!");let r=null,h=null;for(let u=1;u<=3;u++)try{if(console.log(`[FCM] Token alnyor... (Deneme ${u}/3)`),r=await lx(Da,{vapidKey:nx,serviceWorkerRegistration:n}),r)return console.log("[FCM]  TOKEN ALINDI:",r.substring(0,50)+"..."),r;console.warn("[FCM] Token bo dnd")}catch(f){h=f,console.warn(`[FCM] Deneme ${u} baarsz:`,f.message),(t=f.message)!=null&&t.includes("push service")&&u<3&&(console.log("[FCM] 2 saniye beklenip tekrar denenecek..."),await new Promise(x=>setTimeout(x,2e3)))}return console.error("[FCM]  Tm denemeler baarsz. Son hata:",h),null}catch(a){return console.error("[FCM]  Kritik hata:",a),null}},cx=async(s,t)=>{if(!s||!t){console.warn("[FCM] Partner ID veya token eksik");return}try{const{error:a}=await ke.from("partners").update({fcm_token:t,fcm_token_updated_at:new Date().toISOString()}).eq("id",s);a?console.error("[FCM] Token kaydetme hatas:",a):console.log("[FCM]  Token veritabanna kaydedildi")}catch(a){console.error("[FCM] Supabase hatas:",a)}},dx=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const w=localStorage.getItem("yolmov_partner"),_=w?JSON.parse(w).id:"";console.log(" [PartnerOfferHistory] Partner ID:",_);const E=await P.offers.getByPartnerId(_);if(console.log(" [PartnerOfferHistory] Loaded offers:",(E==null?void 0:E.length)||0,E),E&&E.length>0){const L=E.map(S=>({id:S.id,requestId:S.request_id,customer:"Mteri",service:"Hizmet",location:"Konum",price:S.price,sentDate:new Date(S.created_at).toLocaleString("tr-TR"),status:S.status,responseDate:S.updated_at?new Date(S.updated_at).toLocaleString("tr-TR"):void 0,responseMessage:S.notes}));t(L)}}catch(w){console.error(" Teklifler yklenemedi:",w)}finally{n(!1)}},[r,h]=o.useState(""),[u,f]=o.useState("all"),[x,I]=o.useState(null),B=s.filter(w=>{const _=w.customer.toLowerCase().includes(r.toLowerCase())||w.service.toLowerCase().includes(r.toLowerCase())||w.id.toLowerCase().includes(r.toLowerCase()),E=u==="all"||w.status===u;return _&&E}),m={total:s.length,accepted:s.filter(w=>w.status==="accepted").length,rejected:s.filter(w=>w.status==="rejected").length,pending:s.filter(w=>w.status==="pending").length,winRate:s.length>0?(s.filter(w=>w.status==="accepted").length/s.length*100).toFixed(1):"0"},T=w=>{const _={accepted:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"Kabul Edildi"},rejected:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"Reddedildi"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:oe,label:"Beklemede"},expired:{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:Te,label:"Sresi Doldu"}},{bg:E,text:L,border:S,icon:O,label:p}=_[w];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-semibold border ${E} ${L} ${S}`,children:[e.jsx(O,{size:14}),p]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Toplam Teklif"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(me,{size:24,className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Kabul Edilen"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.accepted})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(ye,{size:24,className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Reddedilen"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.rejected})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(Te,{size:24,className:"text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Bekleyen"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.pending})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center",children:e.jsx(oe,{size:24,className:"text-yellow-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-100 mb-1",children:"Kazanma Oran"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.winRate,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(js,{size:24})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ls,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Mteri, hizmet veya teklif ID'si ile ara...",value:r,onChange:w=>h(w.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{size:20,className:"text-gray-400"}),e.jsxs("select",{value:u,onChange:w=>f(w.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"accepted",children:"Kabul Edildi"}),e.jsx("option",{value:"rejected",children:"Reddedildi"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"expired",children:"Sresi Doldu"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:B.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(me,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Teklif Bulunamad"}),e.jsx("p",{className:"text-gray-500",children:"Arama kriterlerinize uygun teklif bulunamad."})]}):B.map(w=>e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all cursor-pointer",onClick:()=>I(w),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500",children:w.id}),T(w.status)]}),e.jsx("span",{className:"text-sm text-gray-400",children:w.sentDate})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Es,{size:16,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Mteri"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:w.customer})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center",children:e.jsx(me,{size:16,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Hizmet"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:w.service})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-full flex items-center justify-center",children:e.jsx(Ne,{size:16,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Konum"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:w.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-50 rounded-full flex items-center justify-center",children:e.jsx(js,{size:16,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Teklif Fiyat"}),e.jsxs("p",{className:"text-sm font-bold text-orange-600",children:[w.price," "]})]})]})]}),w.responseMessage&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Mteri Yant:"})," ",w.responseMessage]})})]},w.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4",onClick:()=>I(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Teklif Detaylar"}),e.jsx("button",{onClick:()=>I(null),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Teklif ID"}),e.jsx("span",{className:"font-mono font-semibold",children:x.id})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Talep ID"}),e.jsx("span",{className:"font-mono font-semibold",children:x.requestId})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Durum"}),T(x.status)]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Mteri"}),e.jsx("span",{className:"font-semibold",children:x.customer})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hizmet"}),e.jsx("span",{className:"font-semibold",children:x.service})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Konum"}),e.jsx("span",{className:"font-semibold",children:x.location})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:"Teklif Fiyat"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:[x.price," "]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Gnderilme Tarihi"}),e.jsx("span",{className:"font-semibold",children:x.sentDate})]}),x.responseDate&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Yant Tarihi"}),e.jsx("span",{className:"font-semibold",children:x.responseDate})]}),x.responseMessage&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1 font-semibold",children:"Mteri Yant:"}),e.jsx("p",{className:"text-gray-700",children:x.responseMessage})]})]})]})})]})},xx=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const j=localStorage.getItem("yolmov_partner"),R=j?JSON.parse(j).id:"";console.log(" [PartnerPayments] Partner ID:",R);const U=await P.completedJobs.getByPartnerId(R);console.log(" [PartnerPayments] Loaded completed jobs:",(U==null?void 0:U.length)||0);const X=(U||[]).map(Y=>{var J,Z;return{id:`PAY-${((J=Y.id)==null?void 0:J.substring(0,8))||""}`,jobId:`JOB-${((Z=Y.id)==null?void 0:Z.substring(0,4))||""}`,type:"earning",grossAmount:Y.totalAmount||0,commission:Y.commission||0,commissionRate:Y.totalAmount?Math.round(Y.commission/Y.totalAmount*100):0,amount:Y.partnerEarning||Y.totalAmount||0,date:Y.completionTime||Y.startTime||new Date().toISOString(),status:Y.status==="completed"?"completed":Y.status==="cancelled"?"failed":"pending",paymentMethod:Y.paymentMethod==="nakit"?"cash":Y.paymentMethod==="kredi_karti"?"card":"bank_transfer",customer:Y.customerName||"Mteri",service:Y.serviceType||"Hizmet"}});t(X),console.log(" [PartnerPayments] Formatted payments:",X.length)}catch(j){console.error(" demeler yklenemedi:",j)}finally{n(!1)}},[r,h]=o.useState("all"),[u,f]=o.useState("all"),[x,I]=o.useState(null),[B,m]=o.useState(""),[T,w]=o.useState(""),[_,E]=o.useState(10),[L,S]=o.useState(1),[O,p]=o.useState(!1),N=s.filter(j=>{const R=r==="all"||j.type===r,U=u==="all"||j.status===u;return R&&U}),D=s.filter(j=>j.type==="earning"&&j.status==="completed").reduce((j,R)=>j+(R.grossAmount||R.amount),0),H=new Date;H.setDate(H.getDate()-30);const K=s.filter(j=>j.type==="earning"&&j.status==="completed"&&new Date(j.date)>=H).reduce((j,R)=>j+(R.grossAmount||R.amount),0);s.filter(j=>j.status==="pending").reduce((j,R)=>j+R.amount,0);const $=s.filter(j=>j.type==="earning"&&j.status==="completed").length,M=j=>{const R={completed:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"Tamamland"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:oe,label:"Beklemede"},failed:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"Baarsz"}},{bg:U,text:X,border:Y,icon:J,label:Z}=R[j];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${U} ${X} ${Y}`,children:[e.jsx(J,{size:12}),Z]})},k=j=>({cash:"Nakit",card:"Kredi Kart",bank_transfer:"Banka Havalesi"})[j]||j;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Ia,{size:24})}),e.jsx(wa,{size:20,className:"opacity-60"})]}),e.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Toplam Kazan"}),e.jsxs("p",{className:"text-3xl font-bold",children:[D.toLocaleString()," "]}),e.jsxs("p",{className:"text-xs text-green-100 mt-1",children:[$,"  Tamamland"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Ea,{size:24})}),e.jsx(ft,{size:20,className:"opacity-60"})]}),e.jsx("p",{className:"text-sm text-purple-100 mb-1",children:"Bu Ay Kazan"}),e.jsxs("p",{className:"text-3xl font-bold",children:[K.toLocaleString()," "]}),e.jsx("p",{className:"text-xs text-purple-100 mt-1",children:"Son 30 Gn"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:" Komisyonsuz Kazan Sistemi"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Yolmov platformunda mterilerden aldnz demenin ",e.jsx("span",{className:"font-bold",children:"%100' size aittir!"}),"Platform geliri sadece kredi satndan elde edilir.  ba komisyon alnmaz."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"%0 Komisyon"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"Hzl deme"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"Annda Tahsilat"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{size:20,className:"text-gray-400"}),e.jsxs("select",{value:r,onChange:j=>h(j.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Tm lemler"}),e.jsx("option",{value:"earning",children:"Kazanlar"}),e.jsx("option",{value:"commission",children:"Komisyonlar"}),e.jsx("option",{value:"fee",children:"cretler"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:u,onChange:j=>f(j.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"completed",children:"Tamamland"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"failed",children:"Baarsz"})]})}),e.jsxs("button",{onClick:()=>p(!0),className:"ml-auto px-6 py-2.5 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(ts,{size:18}),"Rapor ndir"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[a?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"deme kaytlar ykleniyor..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"lem ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:" No"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Mteri/Hizmet"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tutar"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"deme Yntemi"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tarih"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Detay"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:N.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-700",children:j.id})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-600",children:j.jobId})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:j.customer||"-"}),e.jsx("p",{className:"text-gray-500 text-xs",children:j.service})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`text-sm font-bold ${j.amount>=0?"text-green-600":"text-red-600"}`,children:[j.amount>=0?"+":"",(j.grossAmount||j.amount).toLocaleString()," "]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:k(j.paymentMethod)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:j.date})}),e.jsx("td",{className:"px-6 py-4",children:M(j.status)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>I(j),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors mx-auto",children:e.jsx(Ds,{size:16,className:"text-gray-600"})})})]},j.id))})]})}),N.length===0&&!a&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"deme Bulunamad"}),e.jsx("p",{className:"text-gray-500",children:"Henz tamamlanm bir i kaydnz bulunmuyor."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:" tamamladnzda deme kaytlar burada grnecektir."})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-2xl w-full",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Rapor ndir"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"deme raporunuzu zelletirin ve indirin"})]}),e.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Tarih Aral"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Balang"}),e.jsx("input",{type:"date",value:B,onChange:j=>m(j.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Biti"}),e.jsx("input",{type:"date",value:T,onChange:j=>w(j.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m(""),w("")},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"Tm"}),e.jsx("button",{onClick:()=>{const j=new Date,R=new Date(j.getFullYear(),j.getMonth()-1,j.getDate());m(R.toISOString().split("T")[0]),w(j.toISOString().split("T")[0])},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"Son 30 Gn"}),e.jsx("button",{onClick:()=>{const j=new Date,R=new Date(j.getFullYear(),j.getMonth(),1);m(R.toISOString().split("T")[0]),w(j.toISOString().split("T")[0])},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"Bu Ay"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Sayfa Bana Kayt"}),e.jsx("div",{className:"flex gap-3",children:[10,20,50,100].map(j=>e.jsx("button",{onClick:()=>E(j),className:`flex-1 py-2.5 rounded-lg font-bold transition-all ${_===j?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:j},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Dosya Format"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{alert(`Excel formatnda rapor indiriliyor... (${N.length} kayt)`),p(!1)},className:"py-3 px-4 bg-green-50 border-2 border-green-200 text-green-700 rounded-lg font-bold hover:bg-green-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"Excel"]}),e.jsxs("button",{onClick:()=>{alert(`PDF formatnda rapor indiriliyor... (${N.length} kayt)`),p(!1)},className:"py-3 px-4 bg-red-50 border-2 border-red-200 text-red-700 rounded-lg font-bold hover:bg-red-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"PDF"]}),e.jsxs("button",{onClick:()=>{alert(`CSV formatnda rapor indiriliyor... (${N.length} kayt)`),p(!1)},className:"py-3 px-4 bg-blue-50 border-2 border-blue-200 text-blue-700 rounded-lg font-bold hover:bg-blue-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"CSV"]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsxs("strong",{children:[N.length," kayt"]})," indirilecek. Tarih aral ve filtreler uygulanacaktr."]})})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>I(null),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"deme Detaylar"}),e.jsx("button",{onClick:()=>I(null),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"lem ID"}),e.jsx("span",{className:"font-mono font-semibold",children:x.id})]}),x.jobId!=="-"&&e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:" No"}),e.jsx("span",{className:"font-mono font-semibold",children:x.jobId})]}),x.customer&&e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Mteri"}),e.jsx("span",{className:"font-semibold",children:x.customer})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hizmet"}),e.jsx("span",{className:"font-semibold",children:x.service})]}),x.grossAmount&&e.jsxs("div",{className:"flex justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"deme Tutar"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[x.grossAmount," "]})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-blue-50 rounded-lg border-2 border-blue-300",children:[e.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Kazancnz (%0 Komisyon)"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[x.grossAmount||x.amount," "]})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"deme Yntemi"}),e.jsx("span",{className:"font-semibold",children:k(x.paymentMethod)})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tarih"}),e.jsx("span",{className:"font-semibold",children:x.date})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Durum"}),M(x.status)]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsxs("button",{className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"Fatura ndir"]}),e.jsxs("button",{className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ft,{size:18}),"Dekont Grntle"]})]})]})})]})},Ys=[{value:"license",label:"Src Belgesi",required:!0},{value:"insurance",label:"Kasko/Sigorta Poliesi",required:!0},{value:"registration",label:"Ara Ruhsat",required:!0},{value:"tax",label:"Vergi Levhas",required:!0},{value:"identity",label:"Kimlik Belgesi",required:!0}],mx=()=>{var S,O;const[s,t]=o.useState([]),[a,n]=o.useState(""),[i,r]=o.useState(!1),h=o.useRef(null),[u,f]=o.useState(null),[x,I]=o.useState(null),B=localStorage.getItem("yolmov_partner"),m=B?JSON.parse(B).id:"",T=localStorage.getItem("yolmov_partner_name")||"Partner";o.useEffect(()=>{w()},[]);const w=async()=>{try{const N=(await P.partnerDocuments.getByPartnerId(m)).map(D=>({id:D.id,partnerId:D.partnerId,partnerName:D.partnerName||T,type:D.type,name:D.fileName,fileUrl:D.fileUrl,fileSize:D.fileSize,uploadDate:D.uploadDate?new Date(D.uploadDate).toLocaleDateString("tr-TR"):"",expiryDate:D.expiryDate?new Date(D.expiryDate).toLocaleDateString("tr-TR"):void 0,status:D.status,rejectionReason:D.rejectionReason}));t(N)}catch(p){console.error(" Belgeler yklenemedi:",p)}},_=p=>{const N={approved:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"Onayland"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:oe,label:"nceleniyor"},rejected:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"Reddedildi"}},{bg:D,text:H,border:K,icon:$,label:M}=N[p];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${D} ${H} ${K}`,children:[e.jsx($,{size:12}),M]})},E=async p=>{if(!a){f("Ltfen nce belge trn sein.");return}if(!p.target.files||!p.target.files.length)return;const N=p.target.files[0];r(!0);try{let D=N;if(Qe(N)){const M=await es(N);D=M.compressedFile,console.log(` Belge sktrld: ${M.compressionRatio.toFixed(1)}% kltld`)}const H=`https://placeholder-url/${D.name}`,$={id:(await P.partnerDocuments.create({partnerId:m,partnerName:T,type:a,fileName:D.name,fileSize:`${(D.size/1024/1024).toFixed(2)} MB`,status:"pending"})).id,partnerId:m,partnerName:T,type:a,name:D.name,fileSize:`${(D.size/1024/1024).toFixed(2)} MB`,uploadDate:new Date().toLocaleDateString("tr-TR"),status:"pending"};t(M=>[...M,$]),console.log(" [PartnerDocuments] Document uploaded:",H),r(!1),n(""),h.current&&(h.current.value=""),f(null)}catch(D){console.error(" Belge ykleme hatas:",D),f("Belge yklenirken hata olutu. Ltfen tekrar deneyin."),r(!1)}},L={total:Ys.length,approved:s.filter(p=>p.status==="approved").length,pending:s.filter(p=>p.status==="pending").length,rejected:s.filter(p=>p.status==="rejected").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Toplam Belge"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsx(me,{size:24,className:"text-gray-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Onayl"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:L.approved})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(ye,{size:24,className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"nceleniyor"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:L.pending})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center",children:e.jsx(oe,{size:24,className:"text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Reddedilen"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:L.rejected})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(Te,{size:24,className:"text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Yeni Belge Ykle"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("select",{value:a,onChange:p=>n(p.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Belge Tr Sein"}),Ys.map(p=>e.jsxs("option",{value:p.value,children:[p.label," ",p.required&&"*"]},p.value))]}),e.jsxs("label",{onClick:()=>{a||f("nce belge trn semelisiniz.")},className:`px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2 ${a?"bg-orange-600 text-white cursor-pointer hover:bg-orange-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[i?e.jsx(ce,{size:18,className:"animate-spin"}):e.jsx(Ts,{size:18}),i?"Ykleniyor...":"Belge Se ve Ykle",e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:E,disabled:!a||i,className:"hidden",ref:h})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"* PDF, JPG, PNG formatnda, maksimum 5 MB"}),u&&e.jsx("p",{className:"text-xs mt-2 text-red-600",children:u})]}),e.jsx("div",{className:"space-y-3",children:s.map(p=>{const N=Ys.find(D=>D.value===p.type);return e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(me,{size:24,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900",children:N==null?void 0:N.label}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.name,"  ",p.fileSize]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Yklenme: ",p.uploadDate]}),p.expiryDate&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Son Geerlilik: ",p.expiryDate]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[_(p.status),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(p),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200",children:e.jsx(Ds,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>alert(`'${p.name}' indiriliyor.`),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200",children:e.jsx(ts,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>t(s.filter(D=>D.id!==p.id)),className:"w-8 h-8 bg-red-50 rounded-lg flex items-center justify-center hover:bg-red-100",children:e.jsx(Pa,{size:16,className:"text-red-600"})})]})]})]}),p.status==="rejected"&&p.rejectionReason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx(pe,{size:16,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-red-700 mb-1",children:"Red Nedeni:"}),e.jsx("p",{className:"text-xs text-red-600",children:p.rejectionReason})]})]})]},p.id)})}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-5 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(me,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-900 mb-2",children:"Belge Onay Sreci"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Yklediiniz belgeler admin ekibi tarafndan 24 saat iinde incelenir. Onaylanan belgeler ile i kabulne balayabilirsiniz. Eksik veya hatal belgeler iin bildirim alacaksnz."})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>I(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Belge Detaylar"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(S=Ys.find(p=>p.value===x.type))==null?void 0:S.label})]}),e.jsx("button",{onClick:()=>I(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Belge Tr"}),e.jsx("p",{className:"font-bold text-gray-900",children:(O=Ys.find(p=>p.value===x.type))==null?void 0:O.label})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Dosya Ad"}),e.jsx("p",{className:"font-mono text-sm text-gray-900",children:x.name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Dosya Boyutu"}),e.jsx("p",{className:"font-bold text-gray-900",children:x.fileSize})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Yklenme Tarihi"}),e.jsx("p",{className:"font-bold text-gray-900",children:x.uploadDate})]}),x.expiryDate&&e.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-200",children:[e.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase mb-2",children:"Son Geerlilik"}),e.jsx("p",{className:"font-bold text-orange-900",children:x.expiryDate})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),_(x.status)]}),x.status==="rejected"&&x.rejectionReason&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-red-600 uppercase mb-2",children:"Red Nedeni"}),e.jsx("p",{className:"text-sm text-red-800",children:x.rejectionReason})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 h-96 flex items-center justify-center border-2 border-dashed border-gray-300 overflow-hidden",children:x.name.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(me,{size:64,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"PDF Belgesi"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tam grnm iin indirin"})]}):x.fileUrl?e.jsx("img",{src:x.fileUrl,alt:x.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:p=>{const N=p.target;N.style.display="none",N.parentElement.innerHTML='<div class="text-center"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 mx-auto mb-4"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg><p class="text-gray-600 font-medium">Grsel yklenemedi</p></div>'}}):e.jsxs("div",{className:"text-center",children:[e.jsx(Ds,{size:64,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Grsel nizleme"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:x.name})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:x.fileUrl||"#",target:"_blank",rel:"noopener noreferrer",download:x.name,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${x.fileUrl?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:p=>!x.fileUrl&&p.preventDefault(),children:[e.jsx(ts,{size:18}),"ndir"]}),e.jsx("button",{onClick:()=>I(null),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-all",children:"Kapat"})]}),x.status==="rejected"&&e.jsxs("button",{onClick:()=>{I(null),n(x.type)},className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18}),"Yeniden Ykle"]})]})]})]})})]})},en=({partnerId:s,partnerVehicles:t,onToast:a})=>{var us;const[n,i]=o.useState([]),[r,h]=o.useState(!0),[u,f]=o.useState(!1),[x,I]=o.useState(null),[B,m]=o.useState(""),[T,w]=o.useState(""),[_,E]=o.useState([]),[L,S]=o.useState(""),[O,p]=o.useState(""),[N,D]=o.useState(""),[H,K]=o.useState(""),[$,M]=o.useState(""),[k,j]=o.useState(""),[R,U]=o.useState(""),[X,Y]=o.useState(""),[J,Z]=o.useState(0),[g,A]=o.useState(""),[G,F]=o.useState(!1),[de,_e]=o.useState(!1),[Se,z]=o.useState(""),[ae,De]=o.useState(!1),[Fe,cs]=o.useState(""),[ks,ue]=o.useState(!1),[Ie,ze]=o.useState(""),[He,Ke]=o.useState(!1),Ee=Object.keys(ja).sort(),_s=Ee.filter(b=>b.toLowerCase().includes(Se.toLowerCase())),ds=Ee.filter(b=>b.toLowerCase().includes(Fe.toLowerCase())),xs=Ee.filter(b=>b.toLowerCase().includes(Ie.toLowerCase())&&!_.includes(b));o.useEffect(()=>{Ve()},[s]);const Ve=async()=>{h(!0);try{const b=await P.returnRoutes.getByPartnerId(s);i(b)}catch(b){console.error("Rotalar yklenemedi:",b),a("Rotalar yklenirken hata olutu","error")}finally{h(!1)}},Ge=()=>{m(""),w(""),E([]),S(""),p(""),D(""),K(""),M(""),j(""),U(""),Y(""),Z(0),A(""),z(""),cs(""),ze("")},y=()=>{Ge(),I(null);const b=new Date;b.setDate(b.getDate()+1),S(b.toISOString().split("T")[0]),f(!0)},be=b=>{m(b.originCity),w(b.destinationCity),E(b.routeCities||[]),S(b.departureDate),p(b.departureTime||""),D(b.vehicleType),K(b.vehiclePlate),M(b.vehicleId||""),j(b.driverName||""),U(b.driverPhone||""),Y(b.availableCapacity||""),Z(b.discountPercent),A(b.notes||""),I(b),f(!0)},At=b=>{M(b.id),K(b.plate),D(b.type),j(b.driver||""),Ke(!1)},Dt=b=>{E(le=>[...le,b]),ze("")},Xs=b=>{E(le=>le.filter(ve=>ve!==b))},Pe=(b,le)=>{const ve=le==="up"?b-1:b+1;if(ve<0||ve>=_.length)return;const Ye=[..._];[Ye[b],Ye[ve]]=[Ye[ve],Ye[b]],E(Ye)},Zs=async()=>{if(!B||!T||!L){a("Ltfen zorunlu alanlar doldurun (Kalk, Var, Tarih)","error");return}const b=[B,..._,T];F(!0);try{x?(await P.returnRoutes.update(x.id,{originCity:B,destinationCity:T,routeCities:b,departureDate:L,departureTime:O||void 0,vehicleType:N,vehiclePlate:H,driverName:k||void 0,driverPhone:R||void 0,availableCapacity:X||void 0,discountPercent:J,notes:g||void 0}),a("Bo dn rotas gncellendi","success")):(await P.returnRoutes.create({partnerId:s,vehicleId:$||void 0,originCity:B,destinationCity:T,routeCities:b,departureDate:L,departureTime:O||void 0,vehicleType:N,vehiclePlate:H,driverName:k||void 0,driverPhone:R||void 0,availableCapacity:X||void 0,discountPercent:J,notes:g||void 0}),a("Bo dn rotas eklendi","success")),await Ve(),f(!1),Ge()}catch(le){console.error("Kayt hatas:",le),a(le.message||"Kayt srasnda hata olutu","error")}finally{F(!1)}},Ss=async b=>{if(confirm("Bu rotay iptal etmek istediinize emin misiniz?"))try{await P.returnRoutes.cancel(b.id),a("Rota iptal edildi","success"),await Ve()}catch(le){console.error("ptal hatas:",le),a("ptal srasnda hata olutu","error")}},Qs=async b=>{if(confirm("Bu rotay silmek istediinize emin misiniz?"))try{await P.returnRoutes.delete(b.id),a("Rota silindi","success"),await Ve()}catch(le){console.error("Silme hatas:",le),a("Silme srasnda hata olutu","error")}},ms=b=>new Date(b).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),Bs=b=>{switch(b){case"active":return"bg-green-100 text-green-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ie=b=>{switch(b){case"active":return"Aktif";case"completed":return"Tamamland";case"cancelled":return"ptal";default:return b}};return r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ce,{className:"w-8 h-8 animate-spin text-brand-orange"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Bo Dn Rotalarm"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bo dnen aralarnz tanmlayn, gzergah zerinden i aln"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:[e.jsx(as,{size:18}),"Rota Ekle"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[e.jsx(Ba,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"Bo Dn Avantaj"}),e.jsx("p",{children:"Aralarnz bo dnerken gzergah zerindeki illerden i alabilirsiniz. Mterilere indirimli fiyat sunarak hem siz hem mteri kazanl kar."})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(te,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Henz bo dn rotas tanmlamadnz"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Bo dnen aralarnz iin rota tanmlayn, gzergah zerinden i aln"}),e.jsx("button",{onClick:y,className:"px-6 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:"lk Rotay Ekle"})]}):e.jsx("div",{className:"space-y-4",children:n.map(b=>e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 border border-gray-100 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${Bs(b.status)}`,children:ie(b.status)}),b.discountPercent>0&&e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full bg-green-100 text-green-700",children:["%",b.discountPercent," ndirimli"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[e.jsx("span",{className:"font-bold text-gray-900",children:b.originCity}),b.routeCities.slice(1,-1).map((le,ve)=>e.jsxs(Ki.Fragment,{children:[e.jsx(jt,{size:16,className:"text-gray-300"}),e.jsx("span",{className:"text-gray-600",children:le})]},ve)),e.jsx(jt,{size:16,className:"text-gray-300"}),e.jsx("span",{className:"font-bold text-gray-900",children:b.destinationCity})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ur,{size:14}),ms(b.departureDate),b.departureTime&&` - ${b.departureTime}`]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{size:14}),b.vehiclePlate," (",b.vehicleType,")"]}),b.availableCapacity&&e.jsxs("div",{children:["Kapasite: ",b.availableCapacity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>be(b),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"Dzenle",children:e.jsx(gs,{size:18})}),e.jsx("button",{onClick:()=>Ss(b),className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-orange-50 rounded-lg transition-colors",title:"ptal Et",children:e.jsx(ne,{size:18})})]}),e.jsx("button",{onClick:()=>Qs(b),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",children:e.jsx(Pa,{size:18})})]})]})},b.id))}),e.jsx(fe,{children:u&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:e.jsxs(q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:b=>b.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:x?"Bo Dn Rotas Dzenle":"Yeni Bo Dn Rotas"}),e.jsxs("div",{className:"space-y-5",children:[t.length>0&&!x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ara Sein (Opsiyonel)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>Ke(!He),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:$?"text-gray-900":"text-gray-400",children:$?((us=t.find(b=>b.id===$))==null?void 0:us.plate)||"Ara seildi":"Kaytl aratan se..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),He&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-y-auto",children:t.map(b=>e.jsxs("button",{onClick:()=>At(b),className:"w-full px-4 py-3 text-left hover:bg-orange-50 flex items-center justify-between border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.plate}),e.jsxs("div",{className:"text-sm text-gray-500",children:[b.type," - ",b.driver||"Src yok"]})]}),$===b.id&&e.jsx(ge,{size:18,className:"text-brand-orange"})]},b.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kalk li *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>_e(!de),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:B?"text-gray-900":"text-gray-400",children:B||"l sein..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),de&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Se,onChange:b=>z(b.target.value),placeholder:"l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:_s.map(b=>e.jsx("button",{onClick:()=>{m(b),_e(!1),z("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:b},b))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Var li *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>De(!ae),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:T?"text-gray-900":"text-gray-400",children:T||"l sein..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),ae&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Fe,onChange:b=>cs(b.target.value),placeholder:"l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:ds.map(b=>e.jsx("button",{onClick:()=>{w(b),De(!1),cs("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:b},b))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ara Gzergah lleri"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Srasyla geeceiniz illeri ekleyin. Bu iller zerinden i alabilirsiniz."}),_.length>0&&e.jsx("div",{className:"mb-3 space-y-2",children:_.map((b,le)=>e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-orange-400",children:le+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:b})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[le>0&&e.jsx("button",{onClick:()=>Pe(le,"up"),className:"p-1 text-gray-400 hover:text-gray-600",children:""}),le<_.length-1&&e.jsx("button",{onClick:()=>Pe(le,"down"),className:"p-1 text-gray-400 hover:text-gray-600",children:""}),e.jsx("button",{onClick:()=>Xs(b),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(ne,{size:14})})]})]},b))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>ue(!ks),className:"w-full px-4 py-3 border border-dashed rounded-xl text-left flex items-center justify-center gap-2 text-gray-400 hover:border-brand-orange hover:text-brand-orange transition-colors",children:[e.jsx(as,{size:18}),"Ara l Ekle"]}),ks&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Ie,onChange:b=>ze(b.target.value),placeholder:"l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:xs.map(b=>e.jsx("button",{onClick:()=>{Dt(b),ue(!1)},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:b},b))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hareket Tarihi *"}),e.jsx("input",{type:"date",value:L,onChange:b=>S(b.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hareket Saati"}),e.jsx("input",{type:"time",value:O,onChange:b=>p(b.target.value),className:"w-full px-4 py-3 border rounded-xl"})]})]}),!$&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ara Tipi *"}),e.jsx("input",{type:"text",value:N,onChange:b=>D(b.target.value),placeholder:"r. ekici, Kamyon",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plaka *"}),e.jsx("input",{type:"text",value:H,onChange:b=>K(b.target.value.toUpperCase()),placeholder:"34 ABC 123",className:"w-full px-4 py-3 border rounded-xl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Src Ad"}),e.jsx("input",{type:"text",value:k,onChange:b=>j(b.target.value),placeholder:"Src ad soyad",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Src Telefonu"}),e.jsx("input",{type:"tel",value:R,onChange:b=>U(b.target.value),placeholder:"05xx xxx xx xx",className:"w-full px-4 py-3 border rounded-xl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bo Kapasite"}),e.jsx("input",{type:"text",value:X,onChange:b=>Y(b.target.value),placeholder:"r. 2 ara, 5 ton",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ndirim Oran"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"50",step:"5",value:J,onChange:b=>Z(parseInt(b.target.value)),className:"flex-1 accent-brand-orange"}),e.jsxs("span",{className:"font-bold text-gray-900 w-12 text-right flex items-center gap-1",children:[e.jsx(Zi,{size:14}),J]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bo dn avantaj iin mterilere sunulacak indirim"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar"}),e.jsx("textarea",{value:g,onChange:b=>A(b.target.value),placeholder:"Ek bilgiler, zel durumlar...",rows:2,className:"w-full px-4 py-3 border rounded-xl resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-50 transition-colors",children:"ptal"}),e.jsx("button",{onClick:Zs,disabled:G||!B||!T||!L,className:"flex-1 px-4 py-3 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:G?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:18,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:18}),x?"Gncelle":"Ekle"]})})]})]})})})]})},rr=[{value:"nakit",label:"Nakit",icon:""},{value:"kredi_karti",label:"Kredi Kart",icon:""},{value:"banka_havale",label:"Banka Havale/EFT",icon:""},{value:"firmaya_fatura",label:"Firmaya Fatura",icon:""}],nr=[{value:"vinc",label:"Vin",icon:""},{value:"hidrolik_platform",label:"Hidrolik Platform",icon:""},{value:"uzun_platform",label:"Uzun Platform",icon:""},{value:"tekerleksiz_cekim",label:"Tekerleksiz ekim",icon:""},{value:"otopark_cekimi",label:"Otopark ekimi",icon:""},{value:"gps_takip",label:"GPS Takip",icon:""},{value:"gece_aydinlatma",label:"Gece Aydnlatma",icon:""}],ux=({partnerId:s,partnerData:t})=>{var Z;const[a,n]=o.useState(!0),[i,r]=o.useState(!1),[h,u]=o.useState(null),[f,x]=o.useState([]),[I,B]=o.useState(null),[m,T]=o.useState("info"),[w,_]=o.useState(!1),[E,L]=o.useState(null),[S,O]=o.useState({showcase_description:"",showcase_working_hours:"",showcase_payment_methods:[],showcase_is_24_7:!1,showcase_satisfaction_rate:null,showcase_response_time:""}),[p,N]=o.useState({showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:""}),[D,H]=o.useState(null),[K,$]=o.useState(null),M=o.useCallback(async()=>{if(!s){console.log(" PartnerShowcaseTab: partnerId is empty");return}console.log(" PartnerShowcaseTab: Loading showcase data for partnerId:",s),n(!0),L(null);try{const g=await P.partnerShowcase.getShowcaseData(s);if(console.log(" PartnerShowcaseTab: Showcase data loaded:",g),g){u(g),O({showcase_description:g.partner.showcase_description||"",showcase_working_hours:g.partner.showcase_working_hours||"",showcase_payment_methods:g.partner.showcase_payment_methods||[],showcase_is_24_7:g.partner.showcase_is_24_7||!1,showcase_satisfaction_rate:g.partner.showcase_satisfaction_rate||null,showcase_response_time:g.partner.showcase_response_time||""});const A=g.vehicles||[];console.log(" PartnerShowcaseTab: Vehicles loaded:",A.length,A),x(A);const G=A.find(F=>F.is_showcase_vehicle);G?(B(G.id),N({showcase_capacity:G.showcase_capacity||"",showcase_insurance_type:G.showcase_insurance_type||"",showcase_equipment:G.showcase_equipment||[],showcase_description:G.showcase_description||""})):A.length>0&&B(A[0].id)}}catch(g){console.error("Showcase data load error:",g),L("Vitrin verileri yklenirken hata olutu.")}finally{n(!1)}},[s]);o.useEffect(()=>{M()},[M]),o.useEffect(()=>{if(I&&f.length>0){const g=f.find(A=>A.id===I);g&&N({showcase_capacity:g.showcase_capacity||"",showcase_insurance_type:g.showcase_insurance_type||"",showcase_equipment:g.showcase_equipment||[],showcase_description:g.showcase_description||""})}},[I,f]);const k=g=>{Ml(g)?H(Rl(g)):H(null),O(A=>({...A,showcase_description:g}))},j=g=>{Ml(g)?$(Rl(g)):$(null),N(A=>({...A,showcase_description:g}))},R=async()=>{r(!0),L(null),_(!1);try{const g={showcase_description:Ol(S.showcase_description),showcase_working_hours:S.showcase_working_hours,showcase_payment_methods:S.showcase_payment_methods,showcase_is_24_7:S.showcase_is_24_7,showcase_satisfaction_rate:S.showcase_satisfaction_rate,showcase_response_time:S.showcase_response_time};await P.partnerShowcase.updateShowcase(s,g)?(_(!0),setTimeout(()=>_(!1),3e3)):L("Kayt srasnda bir hata olutu.")}catch(g){console.error("Save partner showcase error:",g),L("Kayt srasnda bir hata olutu.")}finally{r(!1)}},U=async()=>{if(I){r(!0),L(null),_(!1);try{const g={showcase_capacity:p.showcase_capacity,showcase_insurance_type:p.showcase_insurance_type,showcase_equipment:p.showcase_equipment,showcase_description:Ol(p.showcase_description)};await P.partnerShowcase.updateVehicleShowcase(I,g)?(_(!0),x(G=>G.map(F=>F.id===I?{...F,...g}:F)),setTimeout(()=>_(!1),3e3)):L("Ara bilgileri kaydedilirken hata olutu.")}catch(g){console.error("Save vehicle showcase error:",g),L("Ara bilgileri kaydedilirken hata olutu.")}finally{r(!1)}}},X=async g=>{r(!0);try{await P.partnerShowcase.setShowcaseVehicle(s,g)&&(x(G=>G.map(F=>({...F,is_showcase_vehicle:F.id===g}))),B(g),_(!0),setTimeout(()=>_(!1),3e3))}catch(A){console.error("Set showcase vehicle error:",A),L("Vitrin arac belirlenirken hata olutu.")}finally{r(!1)}},Y=g=>{O(A=>({...A,showcase_payment_methods:A.showcase_payment_methods.includes(g)?A.showcase_payment_methods.filter(G=>G!==g):[...A.showcase_payment_methods,g]}))},J=g=>{N(A=>({...A,showcase_equipment:A.showcase_equipment.includes(g)?A.showcase_equipment.filter(G=>G!==g):[...A.showcase_equipment,g]}))};return a?e.jsx("div",{className:"h-full flex items-center justify-center bg-white rounded-2xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ce,{size:48,className:"text-blue-600 animate-spin"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"Vitrin bilgileri ykleniyor..."})]})}):e.jsxs("div",{className:"p-4 lg:p-6 max-w-6xl mx-auto",children:[e.jsx(q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(Nt,{size:28})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:" Bu Ekran Sizin Vitrininiz!"}),e.jsxs("p",{className:"text-blue-100 text-sm leading-relaxed",children:["Mteriler taleplerinde sizin firmanz grdklerinde bu bilgileri grecekler. Profesyonel bir tantm, alma saatleri ve deme yntemleri ekleyerek mterilerin size gvenmesini salayn.",e.jsx("strong",{className:"text-white",children:" yi bir vitrin = Daha fazla i!"})]})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 bg-slate-100 p-1.5 rounded-xl",children:[e.jsxs("button",{onClick:()=>T("info"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${m==="info"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(me,{size:18}),e.jsx("span",{children:"Firma Bilgileri"})]}),e.jsxs("button",{onClick:()=>T("vehicle"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${m==="vehicle"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(te,{size:18}),e.jsx("span",{children:"Ara Vitrin"})]}),e.jsxs("button",{onClick:()=>T("preview"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${m==="preview"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Ds,{size:18}),e.jsx("span",{children:"nizleme"})]})]}),E&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(Ba,{className:"text-red-500 shrink-0",size:20}),e.jsx("p",{className:"text-red-700 text-sm",children:E}),e.jsx("button",{onClick:()=>L(null),className:"ml-auto text-red-400 hover:text-red-600",children:e.jsx(ne,{size:18})})]}),w&&e.jsxs(q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(ye,{className:"text-green-500 shrink-0",size:20}),e.jsx("p",{className:"text-green-700 text-sm font-medium",children:"Deiiklikler baaryla kaydedildi!"})]}),m==="info"&&e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(gs,{size:20,className:"text-blue-600"}),"Firma Tantm"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Mterilere kendinizi tantn. Tecrbeniz, zellikleriniz ve neden sizi semeleri gerektiini yazn."}),e.jsx("textarea",{value:S.showcase_description,onChange:g=>k(g.target.value),placeholder:"rn: 15 yllk tecrbemiz ile 7/24 profesyonel ekici hizmeti sunuyoruz. Tm ara tipleri iin uygun ekipmanlara sahibiz...",className:`w-full h-32 border rounded-xl p-4 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${D?"border-orange-300 bg-orange-50":"border-slate-200"}`,maxLength:500}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[D?e.jsxs("p",{className:"text-xs text-orange-600 flex items-center gap-1",children:[e.jsx(pe,{size:14}),D]}):e.jsx("p",{className:"text-xs text-slate-400",children:"Maksimum 500 karakter"}),e.jsxs("span",{className:"text-xs text-slate-400",children:[S.showcase_description.length,"/500"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(oe,{size:20,className:"text-blue-600"}),"alma Saatleri"]}),e.jsxs("label",{className:"flex items-center gap-3 mb-4 p-4 bg-blue-50 rounded-xl border border-blue-100 cursor-pointer hover:bg-blue-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:S.showcase_is_24_7,onChange:g=>O(A=>({...A,showcase_is_24_7:g.target.checked})),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-bold text-blue-800 flex items-center gap-2",children:[e.jsx(oa,{size:16}),"7/24 Hizmet Veriyoruz"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'Bu seenek iaretlenirse alma saatleri yerine "7/24 Ak" gsterilir'})]})]}),!S.showcase_is_24_7&&e.jsx("input",{type:"text",value:S.showcase_working_hours,onChange:g=>O(A=>({...A,showcase_working_hours:g.target.value})),placeholder:"rn: Hafta ii 08:00 - 22:00, Hafta sonu 09:00 - 20:00",className:"w-full border border-slate-200 rounded-xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Ea,{size:20,className:"text-blue-600"}),"Kabul Edilen deme Yntemleri"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:rr.map(g=>e.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${S.showcase_payment_methods.includes(g.value)?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsx("input",{type:"checkbox",checked:S.showcase_payment_methods.includes(g.value),onChange:()=>Y(g.value),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-lg",children:g.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:g.label})]},g.value))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(oa,{size:20,className:"text-blue-600"}),"Ortalama Yant Sresi"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Mteri taleplerine ortalama ka dakikada yant veriyorsunuz?"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["5 dk","10 dk","15 dk","30 dk"].map(g=>e.jsx("button",{onClick:()=>O(A=>({...A,showcase_response_time:g})),className:`py-3 px-4 rounded-xl font-medium transition-all ${S.showcase_response_time===g?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:g},g))})]}),e.jsx("button",{onClick:R,disabled:i,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center justify-center gap-3 disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:20,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Na,{size:20}),"Firma Bilgilerini Kaydet"]})})]}),m==="vehicle"&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:f.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-slate-200",children:[e.jsx(te,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"Henz Ara Eklenmemi"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:'Vitrin arac belirlemek iin nce "Filo Ynetimi" blmnden ara ekleyin.'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(te,{size:20,className:"text-blue-600"}),"Vitrin Arac Sein"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Mterilere gsterilecek ana aracnz sein. Bu ara tekliflerinizde ne kar."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(g=>e.jsxs("div",{onClick:()=>B(g.id),className:`p-4 rounded-xl border cursor-pointer transition-all ${I===g.id?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${g.is_showcase_vehicle?"bg-yellow-100":"bg-slate-100"}`,children:g.is_showcase_vehicle?e.jsx(re,{size:24,className:"text-yellow-500"}):e.jsx(te,{size:24,className:"text-slate-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-bold text-slate-800",children:[g.brand," ",g.model]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[g.plate,"  ",g.year]})]}),g.is_showcase_vehicle&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs font-bold px-2 py-1 rounded-lg",children:"Vitrin"})]}),I===g.id&&!g.is_showcase_vehicle&&e.jsxs("button",{onClick:A=>{A.stopPropagation(),X(g.id)},className:"w-full mt-3 py-2 bg-yellow-500 text-white rounded-lg text-sm font-bold hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{size:16}),"Vitrin Arac Olarak Belirle"]})]},g.id))})]}),I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(_t,{size:20,className:"text-blue-600"}),"Ara Kapasitesi"]}),e.jsx("input",{type:"text",value:p.showcase_capacity,onChange:g=>N(A=>({...A,showcase_capacity:g.target.value})),placeholder:"rn: 3.5 ton, SUV'a kadar tm aralar",className:"w-full border border-slate-200 rounded-xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(pr,{size:20,className:"text-blue-600"}),"Sigorta Tipi"]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Kasko","Trafik","Full Kasko"].map(g=>e.jsx("button",{onClick:()=>N(A=>({...A,showcase_insurance_type:g})),className:`py-3 px-4 rounded-xl font-medium transition-all ${p.showcase_insurance_type===g?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:g},g))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Qi,{size:20,className:"text-blue-600"}),"Ekipmanlar"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:nr.map(g=>e.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-xl border cursor-pointer transition-all ${p.showcase_equipment.includes(g.value)?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsx("input",{type:"checkbox",checked:p.showcase_equipment.includes(g.value),onChange:()=>J(g.value),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-lg",children:g.icon}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:g.label})]},g.value))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(or,{size:20,className:"text-blue-600"}),"Ara Aklamas"]}),e.jsx("textarea",{value:p.showcase_description,onChange:g=>j(g.target.value),placeholder:"rn: Profesyonel ekici, her trl ara tipi iin uygundur. Hidrolik platform ve gece alma lambas mevcuttur...",className:`w-full h-24 border rounded-xl p-4 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${K?"border-orange-300 bg-orange-50":"border-slate-200"}`,maxLength:300}),K&&e.jsxs("p",{className:"text-xs text-orange-600 flex items-center gap-1 mt-2",children:[e.jsx(pe,{size:14}),K]})]}),e.jsx("button",{onClick:U,disabled:i,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center justify-center gap-3 disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:20,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Na,{size:20}),"Ara Bilgilerini Kaydet"]})})]})]})}),m==="preview"&&e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-100 rounded-2xl p-4",children:[e.jsxs("p",{className:"text-center text-sm text-slate-500 mb-4 flex items-center justify-center gap-2",children:[e.jsx(Ds,{size:16}),"Mteriler profilinizi byle grecek"]}),e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg border border-slate-200 max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:((Z=t.company_name)==null?void 0:Z[0])||"P"}),e.jsxs("div",{className:"text-white flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:t.company_name||"Firma Ad"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(re,{size:16,fill:"currentColor",className:"text-yellow-400"}),e.jsx("span",{className:"font-bold",children:t.rating||"4.8"}),e.jsxs("span",{className:"text-blue-200",children:[" ",(h==null?void 0:h.totalReviews)||0," deerlendirme"]})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[S.showcase_description&&e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:S.showcase_description}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[e.jsx(oe,{size:20,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"alma Saatleri"}),e.jsx("p",{className:"font-medium text-slate-800",children:S.showcase_is_24_7?" 7/24 Ak":S.showcase_working_hours||"Belirtilmemi"})]})]}),S.showcase_response_time&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-xl",children:[e.jsx(oa,{size:20,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Ortalama Yant"}),e.jsxs("p",{className:"font-medium text-green-700",children:[S.showcase_response_time," iinde yant"]})]})]}),S.showcase_payment_methods.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"deme Yntemleri"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.showcase_payment_methods.map(g=>{const A=rr.find(G=>G.value===g);return A?e.jsxs("span",{className:"bg-slate-100 text-slate-700 text-xs px-3 py-1.5 rounded-lg font-medium",children:[A.icon," ",A.label]},g):null})})]}),f.find(g=>g.is_showcase_vehicle)&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl border border-yellow-200",children:[e.jsxs("p",{className:"text-xs text-yellow-700 font-bold mb-2 flex items-center gap-1",children:[e.jsx(re,{size:14})," Vitrin Arac"]}),(()=>{const g=f.find(A=>A.is_showcase_vehicle);return g?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{size:24,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-800",children:[g.brand," ",g.model]}),e.jsx("p",{className:"text-xs text-slate-500",children:p.showcase_capacity||g.capacity})]})]}):null})()]}),p.showcase_equipment.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ekipmanlar"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.showcase_equipment.map(g=>{const A=nr.find(G=>G.value===g);return A?e.jsxs("span",{className:"bg-blue-50 text-blue-700 text-xs px-3 py-1.5 rounded-lg font-medium",children:[A.icon," ",A.label]},g):null})})]})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(Ae,{size:18}),"Vitrin pular"]}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:" Profesyonel bir tantm yazs gven oluturur"}),e.jsx("li",{children:" 7/24 hizmet, acil durumlar iin ok nemlidir"}),e.jsx("li",{children:" oklu deme yntemi sunmak mteri memnuniyetini artrr"}),e.jsx("li",{children:" Ekipman listesi, hangi aralara hizmet verebileceinizi gsterir"})]})]})]})]})},hx=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(null),[i,r]=o.useState(!0),[h,u]=o.useState("all"),[f,x]=o.useState(""),{answerCall:I,answerCallById:B,rejectCall:m,rejectCallById:T,callStatus:w,isIncoming:_,currentCall:E}=Vi(),L=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),S=L.id||L.partner_id||"";console.log(" [PartnerCallHistory] partnerId:",S,"isIncoming:",_,"callStatus:",w),o.useEffect(()=>{if(S){O(),p();const k=ke.channel("partner_calls_realtime").on("postgres_changes",{event:"*",schema:"public",table:"calls"},j=>{console.log(" [PartnerCallHistory] Realtime update:",j),O(),p()}).subscribe();return()=>{ke.removeChannel(k)}}},[S,h]);const O=async()=>{try{r(!0);let k=ke.from("calls").select("*").eq("receiver_id",S).order("started_at",{ascending:!1}).limit(50);h!=="all"&&(h==="connected"?k=k.in("status",["connected","ended"]):k=k.eq("status",h));const{data:j,error:R}=await k;if(R){console.error("Error loading calls:",R);return}t(j||[])}catch(k){console.error("Error:",k)}finally{r(!1)}},p=async()=>{try{const{data:k,error:j}=await ke.from("calls").select("status, duration_seconds, quality_rating, credit_deducted").eq("receiver_id",S);if(j){console.error("Error loading stats:",j);return}if(k){const R=k.length,U=k.filter(F=>F.status==="connected"||F.status==="ended").length,X=k.filter(F=>F.status==="missed").length,Y=k.filter(F=>F.status==="rejected").length,J=k.filter(F=>F.duration_seconds&&F.duration_seconds>0).map(F=>F.duration_seconds),Z=J.length>0?J.reduce((F,de)=>F+de,0)/J.length:0,g=k.filter(F=>F.quality_rating).map(F=>F.quality_rating),A=g.length>0?g.reduce((F,de)=>F+de,0)/g.length:0,G=k.filter(F=>F.credit_deducted).length;n({total_calls:R,connected_calls:U,missed_calls:X,rejected_calls:Y,avg_duration_seconds:Z,avg_quality_rating:A,credits_spent:G})}}catch(k){console.error("Error:",k)}},N=k=>{if(!k)return"-";const j=Math.floor(k/60),R=k%60;return`${j}:${R.toString().padStart(2,"0")}`},D=k=>{const j=new Date(k),U=Math.floor((new Date().getTime()-j.getTime())/(1e3*60*60*24));return U===0?`Bugn ${j.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:U===1?`Dn ${j.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:U<7?j.toLocaleDateString("tr-TR",{weekday:"long",hour:"2-digit",minute:"2-digit"}):j.toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},H=(k,j)=>{switch(k){case"connected":case"ended":return{icon:e.jsx(Bl,{className:"text-green-500",size:18}),label:"Cevapland",color:"bg-green-50 text-green-700 border-green-200",badge:j?"1 kredi":null};case"missed":return{icon:e.jsx(Ll,{className:"text-orange-500",size:18}),label:"Cevapsz",color:"bg-orange-50 text-orange-700 border-orange-200",badge:null};case"rejected":return{icon:e.jsx(ia,{className:"text-red-500",size:18}),label:"Reddedildi",color:"bg-red-50 text-red-700 border-red-200",badge:null};case"ringing":return{icon:e.jsx(je,{className:"text-blue-500 animate-pulse",size:18}),label:"alyor",color:"bg-blue-50 text-blue-700 border-blue-200",badge:null};default:return{icon:e.jsx(je,{className:"text-slate-400",size:18}),label:"Bilinmiyor",color:"bg-slate-50 text-slate-700 border-slate-200",badge:null}}},K=k=>k.caller_id.startsWith("anon_")?{name:"Anonim Arayan",phone:k.caller_id.replace("anon_","").substring(0,8)+"...",isAnonymous:!0}:{name:k.caller_name||"Mteri",phone:k.caller_phone||"-",isAnonymous:!1},$=s.filter(k=>{if(!f)return!0;const j=K(k);return j.name.toLowerCase().includes(f.toLowerCase())||j.phone.includes(f)}),M=s.find(k=>k.status==="ringing");return e.jsxs("div",{className:"space-y-6",children:[_&&w==="ringing"||M?e.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(je,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Gelen Arama!"}),e.jsxs("p",{className:"text-white/80",children:[(E==null?void 0:E.callerName)||(M==null?void 0:M.caller_name)||"Anonim Arayan"," sizi aryor"]}),e.jsxs("p",{className:"text-white/60 text-sm mt-1 flex items-center gap-1",children:[e.jsx(rs,{size:14}),"Cevaplamak 1 kredi harcar"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:async()=>{E?I():M&&(await B(M.id),O())},className:"flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-bold hover:bg-green-50 transition-colors",children:[e.jsx(Pl,{size:20}),"Cevapla"]}),e.jsxs("button",{onClick:async()=>{E?m():M&&(await T(M.id),O())},className:"flex items-center gap-2 px-6 py-3 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:[e.jsx(ia,{size:20}),"Reddet"]})]})]})}):null,e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(je,{className:"text-blue-600",size:28}),"Arama Gemii"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Yolmov Voice zerinden gelen aramalar"})]})}),a&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(je,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.total_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Arama"})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Bl,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.connected_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"Cevaplanan"})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Ll,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.missed_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"Cevapsz"})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(rs,{size:20,className:"text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.credits_spent}),e.jsx("p",{className:"text-xs text-slate-500",children:"Harcanan Kredi"})]})]})})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Ortalama Grme Sresi"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:N(Math.round(a.avg_duration_seconds))})]}),e.jsx(oe,{size:32,className:"text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Ortalama Kalite Puan"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 flex items-center gap-1",children:[a.avg_quality_rating>0?a.avg_quality_rating.toFixed(1):"-",e.jsx(re,{size:20,className:"text-amber-200"})]})]}),e.jsx(Ia,{size:32,className:"text-amber-200"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ls,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Arayan ara...",value:f,onChange:k=>x(k.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"Tm"},{id:"connected",label:"Cevaplanan"},{id:"missed",label:"Cevapsz"},{id:"rejected",label:"Reddedilen"}].map(k=>e.jsx("button",{onClick:()=>u(k.id),className:`px-4 py-2.5 rounded-xl font-medium text-sm transition-all ${h===k.id?"bg-blue-600 text-white shadow-lg":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:k.label},k.id))})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Aramalar ykleniyor..."})]}):$.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(je,{size:32,className:"text-slate-300"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Henz arama yok"}),e.jsx("p",{className:"text-slate-500",children:h==="all"?"Mteriler sizi aradnda burada grnecek.":"Bu filtreye uygun arama bulunamad."})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:$.map(k=>{const j=H(k.status,k.credit_deducted),R=K(k);return e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${R.isAnonymous?"bg-slate-100":"bg-blue-100"}`,children:e.jsx(Es,{size:24,className:R.isAnonymous?"text-slate-400":"text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 truncate",children:R.name}),R.isAnonymous&&e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 text-xs rounded-full",children:"Anonim"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[j.icon,j.label]}),e.jsx("span",{children:""}),e.jsx("span",{children:D(k.started_at)}),k.duration_seconds&&k.duration_seconds>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{size:14}),N(k.duration_seconds)]})]})]})]}),k.credit_deducted&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(rs,{size:14,className:"text-yellow-600"}),e.jsx("span",{className:"text-xs font-semibold text-yellow-700",children:"-1"})]}),k.quality_rating&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(re,{size:14,className:"text-amber-500 fill-amber-500"}),e.jsx("span",{className:"text-sm font-semibold text-amber-700",children:k.quality_rating})]}),k.status==="ringing"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:async()=>{await B(k.id),O()},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 text-white rounded-lg text-xs font-medium hover:bg-green-600 transition-colors",children:[e.jsx(Pl,{size:14}),"Cevapla"]}),e.jsxs("button",{onClick:async()=>{await T(k.id),O()},className:"flex items-center gap-1 px-3 py-1.5 bg-red-500 text-white rounded-lg text-xs font-medium hover:bg-red-600 transition-colors",children:[e.jsx(ia,{size:14}),"Reddet"]})]}):e.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium border ${j.color}`,children:j.label})]})},k.id)})})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg h-fit",children:e.jsx(je,{size:18,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"Yolmov Voice Hakknda"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Mteriler profilinizden sizi dorudan arayabilir. Aramay cevapladnzda 1 kredi der. Cevapsz ve reddedilen aramalarda kredi dmez."})]})]})})]})},px=({fleet:s,partnerHistory:t,partnerName:a,showVehicleEditPage:n,setShowVehicleEditPage:i,selectedVehicleForSettings:r,setSelectedVehicleForSettings:h,selectedVehicleForHistory:u,setSelectedVehicleForHistory:f,vehicleStats:x,loadingVehicleStats:I,setShowAddVehicleModal:B})=>n&&r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:p-8 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>{i(!1),h(null)},className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-bold transition-all",children:[e.jsx(Oe,{size:20,className:"rotate-90"}),e.jsx("span",{children:"Filo Ynetimine Dn"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${r.status==="active"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:r.status==="active"?" Aktif":" Bakmda"})})]}),e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-32 h-32 rounded-2xl overflow-hidden bg-slate-100 border-4 border-white shadow-lg",children:r.front_photo_url?e.jsx("img",{src:r.front_photo_url,alt:r.plate,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(te,{size:48,className:"text-slate-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-2",children:r.plate}),e.jsxs("p",{className:"text-xl text-slate-600 mb-4",children:[r.brand," ",r.model]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-blue-600 font-bold uppercase",children:"Ara Tipi"}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:r.type})]}),e.jsxs("div",{className:"bg-purple-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-purple-600 font-bold uppercase",children:"Model Yl"}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:r.year})]}),e.jsxs("div",{className:"bg-amber-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-amber-600 font-bold uppercase",children:"Src"}),e.jsx("p",{className:"text-sm font-bold text-amber-900",children:r.driver})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(te,{size:20,className:"text-white"})}),"Ara Bilgileri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka"}),e.jsx("input",{type:"text",defaultValue:r.plate,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ara Tipi"}),e.jsxs("select",{defaultValue:r.type,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"cekici",children:"ekici"}),e.jsx("option",{value:"vinc",children:"Vin"}),e.jsx("option",{value:"kurtarici",children:"Kurtarc"}),e.jsx("option",{value:"servis",children:"Servis Arac"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka"}),e.jsx("input",{type:"text",defaultValue:r.brand,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model"}),e.jsx("input",{type:"text",defaultValue:r.model,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model Yl"}),e.jsx("input",{type:"number",defaultValue:r.year,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Src"}),e.jsx("input",{type:"text",defaultValue:r.driver,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ara Durumu"}),e.jsxs("select",{defaultValue:r.status,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"active",children:" Aktif"}),e.jsx("option",{value:"maintenance",children:" Bakmda"}),e.jsx("option",{value:"inactive",children:" Pasif"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center",children:e.jsx(xe,{size:20,className:"text-white"})}),"Ara Grselleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"n Grnm"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.front_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.front_photo_url,alt:"n",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"Deitir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(xe,{size:32})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Yan Grnm"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.side_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.side_photo_url,alt:"Yan",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"Deitir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(xe,{size:32})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Arka Grnm"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.back_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.back_photo_url,alt:"Arka",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"Deitir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(xe,{size:32})})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(Nt,{size:20,className:"text-white"})}),"Vitrin Bilgileri (Mterilere Gsterilir)"]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ae,{size:20,className:"text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-800",children:"Bu bilgiler mteri vitrininizde grnecektir"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Hizmet salayc profilinizde bu ara bilgileri mterilere gsterilir."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{defaultValue:r.showcase_capacity||"",className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{defaultValue:r.showcase_insurance_type||"",className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"Tama Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk Sigortas"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam Kapsaml"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"Vin"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz ekim"},{value:"gps_takip",label:"GPS Takip"},{value:"gece_aydinlatma",label:"Gece Aydnlatma"}].map(m=>e.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-bold ${(r.showcase_equipment||[]).includes(m.value)?"bg-orange-500 text-white":"bg-slate-100 text-slate-500"}`,children:m.label},m.value))})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ara Aklamas (Vitrin)"}),e.jsx("textarea",{defaultValue:r.showcase_description||"",placeholder:"rn: Aracmz son model olup, alak asi spor aralar dahil tm binek ve hafif ticari aralar hasarsz ykleme garantisi ile tamaktadr.",rows:4,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-medium focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Bu aklama mterilere gsterilecektir. Telefon, email veya sosyal medya bilgisi girmeyin."})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl ${r.is_showcase_vehicle?"bg-green-100 border-2 border-green-300":"bg-slate-100 border-2 border-slate-200"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${r.is_showcase_vehicle?"bg-green-500 text-white":"bg-slate-300 text-slate-500"}`,children:r.is_showcase_vehicle?e.jsx(ge,{size:14}):null}),e.jsx("span",{className:`font-bold ${r.is_showcase_vehicle?"text-green-800":"text-slate-600"}`,children:r.is_showcase_vehicle?" Bu ara vitrin arac olarak belirlendi":"Bu ara vitrin arac olarak belirlenmedi"})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-3xl shadow-xl p-6 text-white",children:[e.jsx("h3",{className:"text-xl font-black mb-6",children:"Ara statistikleri"}),I?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ce,{size:32,className:"animate-spin text-white"})}):x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Toplam "}),e.jsx("div",{className:"text-3xl font-black",children:x.totalJobs})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Son 30 Gn"}),e.jsx("div",{className:"text-3xl font-black",children:x.monthlyJobs})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Ortalama Puan"}),e.jsx("div",{className:"text-3xl font-black",children:x.averageRating>0?`${x.averageRating} `:"Henz yok"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Toplam Kazan"}),e.jsxs("div",{className:"text-2xl font-black",children:["",x.totalEarnings.toLocaleString("tr-TR")]})]})]}):e.jsx("div",{className:"text-center py-8 text-blue-100 text-sm",children:"Veri yklenemedi"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 mb-4",children:"Hzl lemler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-slate-900 text-white p-4 rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center gap-3",children:[e.jsx(ur,{size:20})," Gemiini Gr"]}),e.jsxs("button",{className:"w-full bg-blue-500 text-white p-4 rounded-xl font-bold hover:bg-blue-600 transition-all flex items-center gap-3",children:[e.jsx(me,{size:20}),"Belgeleri Grntle"]}),e.jsxs("button",{className:"w-full bg-red-500 text-white p-4 rounded-xl font-bold hover:bg-red-600 transition-all flex items-center gap-3",children:[e.jsx(Ba,{size:20}),"Arac Devre D Brak"]})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:e.jsxs("button",{onClick:()=>{alert(" Ara bilgileri baaryla gncellendi!"),i(!1),h(null)},className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white p-5 rounded-2xl font-black text-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg shadow-green-200 flex items-center justify-center gap-3",children:[e.jsx(Na,{size:24}),"Deiiklikleri Kaydet"]})})]})]})]})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"hidden lg:flex justify-between items-center p-4 lg:p-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Ara Filosu"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Kaytl aralarnz ynetin ve durumlarn izleyin."})]}),e.jsxs("button",{onClick:()=>B(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-slate-800 flex items-center gap-2",children:[e.jsx(as,{size:16})," Yeni Ara Ekle"]})]}),e.jsx("div",{className:"lg:hidden px-4 pt-2",children:e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-4 text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Toplam Ara"}),e.jsx("p",{className:"text-2xl font-black",children:s.length})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-green-400",children:"Aktif"}),e.jsx("p",{className:"text-lg font-bold",children:s.filter(m=>m.status==="active").length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-orange-400",children:"Bakm"}),e.jsx("p",{className:"text-lg font-bold",children:s.filter(m=>m.status!=="active").length})]})]})]})}),e.jsx("div",{className:"px-4 lg:px-0 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:s.length>0?e.jsxs(e.Fragment,{children:[s.map(m=>e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"h-36 lg:h-40 bg-slate-100 relative",children:[m.front_photo_url?e.jsx("img",{src:m.front_photo_url,alt:m.plate,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-100 to-slate-200",children:e.jsx(te,{size:48,className:"text-slate-300"})}),e.jsx("div",{className:`absolute top-3 right-3 px-2.5 py-1 rounded-full text-xs font-bold shadow-sm ${m.status==="active"?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:m.status==="active"?"Aktif":"Bakmda"})]}),e.jsxs("div",{className:"p-4 lg:p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-slate-900 text-lg lg:text-xl tracking-wide",children:m.plate}),e.jsxs("p",{className:"text-sm text-slate-500",children:[m.brand," ",m.model]})]}),e.jsx("button",{onClick:()=>{h(m),i(!0)},className:"p-3 text-slate-400 hover:text-blue-600 bg-slate-50 hover:bg-blue-50 rounded-xl transition-colors -mr-1",children:e.jsx(_t,{size:18})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-slate-500",children:"Ara Tipi"}),e.jsx("span",{className:"font-semibold text-slate-800 capitalize",children:m.type})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-slate-500",children:"Src"}),e.jsxs("span",{className:"font-semibold text-slate-800 flex items-center gap-1.5",children:[e.jsx(Es,{size:14,className:"text-slate-400"}),m.driver||a]})]})]}),e.jsxs("div",{className:"mt-4 pt-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>{h(m),i(!0)},className:"flex-1 py-2.5 rounded-xl bg-slate-900 text-white text-xs font-bold hover:bg-slate-800 transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(gs,{size:14})," Dzenle"]}),e.jsxs("button",{onClick:()=>f(m),className:"flex-1 py-2.5 rounded-xl border border-slate-200 text-slate-600 text-xs font-bold hover:bg-slate-50 transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(hr,{size:14})," Gemi"]})]})]})]},m.id)),e.jsxs("button",{onClick:()=>B(!0),className:"hidden lg:flex bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200 flex-col items-center justify-center text-slate-400 hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 transition-all min-h-[300px] gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-current flex items-center justify-center",children:e.jsx(as,{size:24})}),e.jsx("span",{className:"font-bold",children:"Yeni Ara Tanmla"})]})]}):e.jsxs("div",{className:"col-span-full text-center py-12 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[e.jsx(te,{size:64,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 font-bold text-lg mb-2",children:"Henz ara eklenmemi"}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:"Filonuza ilk aracnz ekleyin"}),e.jsxs("button",{onClick:()=>B(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-xl text-sm font-bold hover:bg-slate-800 inline-flex items-center gap-2",children:[e.jsx(as,{size:16})," Yeni Ara Ekle"]})]})}),e.jsx("button",{onClick:()=>B(!0),className:"lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg shadow-blue-300 flex items-center justify-center hover:bg-blue-700 active:scale-95 transition-all z-30",children:e.jsx(as,{size:24,strokeWidth:2.5})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>f(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ara Gemii"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u.plate," - Tamamlanan ler"]})]}),e.jsx("button",{onClick:()=>f(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(ne,{size:20})})]}),e.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((m,T)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200 hover:border-blue-300 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900",children:["#",m.id]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(m.completionTime).toLocaleString("tr-TR")})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"Tamamland"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hizmet"}),e.jsx("p",{className:"font-bold text-gray-900",children:m.serviceType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Mteri"}),e.jsx("p",{className:"font-bold text-gray-900",children:m.customerName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rota"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[m.startLocation," ",m.endLocation?` ${m.endLocation}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Kazan"}),e.jsxs("p",{className:"font-bold text-green-600",children:["",m.partnerEarning]})]})]})]},T))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsxs("strong",{children:["Toplam ",t.length," i"]}),' bu arala tamamland. Detayl rapor iin "Gemi ler" sekmesini kullanabilirsiniz.']})})]})})]}),bx=["Kibar Mteri","Sorunsuz deme","Bahi Brakt","Konum Doruydu","Anlayl","letiim Kolayd"],fx=({reviews:s,ratingFilter:t,setRatingFilter:a,showObjectionPage:n,setShowObjectionPage:i,selectedReviewForObjection:r,setSelectedReviewForObjection:h,objectionReason:u,setObjectionReason:f,objectionDetails:x,setObjectionDetails:I,handleSubmitObjection:B,handleOpenObjection:m})=>{if(n&&r)return e.jsx("div",{className:"p-4 md:p-6 h-full",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-3xl border border-slate-200 shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-6 text-white",children:[e.jsxs("button",{onClick:()=>{i(!1),h(null),f(""),I("")},className:"mb-4 text-sm flex items-center gap-2 hover:text-red-100 transition-colors",children:[e.jsx(Oe,{size:16,className:"rotate-90"})," Geri Dn"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(gt,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Deerlendirmeye tiraz"}),e.jsxs("p",{className:"text-sm text-red-100",children:[" No: #",r.jobId]})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white font-bold text-lg shrink-0",children:"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-3",children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:"Mteri ***"}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((_,E)=>e.jsx(re,{size:18,fill:E<r.rating?"#ef4444":"none",className:E<r.rating?"text-red-500":"text-slate-300"},E))})]}),e.jsxs("p",{className:"text-sm text-slate-700 mb-3 leading-relaxed bg-white p-3 rounded-lg",children:['"',r.comment,'"']}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsx("span",{className:"text-slate-500",children:r.date}),e.jsx("span",{className:"text-slate-300",children:""}),e.jsx("span",{className:"text-slate-600 font-medium",children:r.service})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"tiraz Nedeni *"}),e.jsxs("select",{value:u,onChange:_=>f(_.target.value),className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm text-slate-800 font-medium focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz..."}),e.jsx("option",{value:"wrong_job",children:"Yanl  Kayd"}),e.jsx("option",{value:"false_claim",children:"Haksz ddia"}),e.jsx("option",{value:"customer_mistake",children:"Mteri Hatas"}),e.jsx("option",{value:"technical_issue",children:"Teknik Sorun"}),e.jsx("option",{value:"unfair_rating",children:"Adaletsiz Puanlama"}),e.jsx("option",{value:"other",children:"Dier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Aklama & Kantlar *"}),e.jsx("textarea",{value:x,onChange:_=>I(_.target.value),placeholder:"tiraznz detayl olarak aklayn. Varsa fotoraf, mesaj ekran grnts gibi kantlarnz aklayn.",rows:10,maxLength:500,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[x.length,"/500 karakter"]})]}),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-5 flex items-start gap-3",children:[e.jsx(Ae,{size:22,className:"text-amber-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-900 mb-2",children:" nemli Bilgilendirme"}),e.jsxs("p",{className:"text-xs text-amber-800 leading-relaxed",children:["tiraznz ekibimiz tarafndan ",e.jsx("strong",{children:"3 i gn iinde"})," incelenecektir. tiraz hakl bulunursa deerlendirme ortalamanzdan karlr. Ancak haksz itirazlar hesabnza uyar olarak ilenir."]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i(!1),h(null),f(""),I("")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"ptal"}),e.jsxs("button",{onClick:B,disabled:!u||!x.trim(),className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," tiraz Gnder"]})]})]})]})});const T=s.length>0?s.reduce((_,E)=>_+E.rating,0)/s.length:0,w=t?s.filter(_=>t===2?_.rating<=2:_.rating===t):s;return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Mteri Deerlendirmeleri"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Aldnz puanlar ve yorumlar"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(re,{size:24,fill:"currentColor",className:"text-yellow-400"}),e.jsx("span",{className:"text-3xl font-bold",children:T.toFixed(1)})]}),e.jsxs("p",{className:"text-xs text-slate-300",children:[s.length," Deerlendirme"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("button",{onClick:()=>a(null),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===null?"border-slate-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#64748b",className:"text-slate-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Tm"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.length})]}),e.jsxs("button",{onClick:()=>a(5),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===5?"border-green-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#22c55e",className:"text-green-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"5 Yldz"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(_=>_.rating===5).length})]}),e.jsxs("button",{onClick:()=>a(4),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===4?"border-blue-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#3b82f6",className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"4 Yldz"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(_=>_.rating===4).length})]}),e.jsxs("button",{onClick:()=>a(3),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===3?"border-amber-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#f59e0b",className:"text-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"3 Yldz"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(_=>_.rating===3).length})]}),e.jsxs("button",{onClick:()=>a(2),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===2?"border-red-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#ef4444",className:"text-red-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"2 Yldz"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(_=>_.rating<=2).length})]})]}),e.jsx("div",{className:"space-y-4",children:w.length>0?w.map(_=>{const E=_.rating<3,L=E?"Mteri ***":_.customerName,S=E?"**********":_.customerPhone;return e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl border-2 p-4 md:p-6 transition-all hover:shadow-md ${E?"border-red-200 bg-red-50/30":"border-slate-200"}`,children:[e.jsxs("div",{className:"hidden md:flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md ${E?"bg-red-500":"bg-slate-700"}`,children:E?"?":_.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:L}),e.jsxs("p",{className:"text-xs text-slate-500",children:[_.date,"  ",_.service]}),E?e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx(gt,{size:12}),"Bilgiler gizlendi"]}):e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:S})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((O,p)=>e.jsx(re,{size:18,fill:p<_.rating?"#FFA500":"none",className:p<_.rating?"text-orange-500":"text-slate-300"},p))})]}),e.jsxs("div",{className:"md:hidden flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-md shrink-0 ${E?"bg-red-500":"bg-slate-700"}`,children:E?"?":_.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs text-slate-500",children:[_.date,"  ",_.service]}),E&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx(gt,{size:12}),"Bilgiler gizlendi"]})]})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-4 leading-relaxed",children:_.comment}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:_.tags.map((O,p)=>e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold ${bx.includes(O)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:O},p))}),e.jsx("div",{className:"md:hidden space-y-3 pt-4 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-sm",children:L}),!E&&e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:S})]}),e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((O,p)=>e.jsx(re,{size:16,fill:p<_.rating?"#FFA500":"none",className:p<_.rating?"text-orange-500":"text-slate-300"},p))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 md:border-t-0 md:pt-0 mt-4 md:mt-0",children:[e.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[" No: #",_.jobId]}),E&&e.jsxs("button",{onClick:()=>m(_),className:"text-xs text-slate-600 hover:text-slate-900 font-bold flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx(eo,{size:14})," tiraz Et"]})]})]},_.id)}):e.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[e.jsx(re,{size:64,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 font-bold text-lg mb-2",children:"Henz deerlendirme yok"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Tamamladnz ilerden sonra mteri deerlendirmeleri burada grnecek"})]})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-5",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ae,{size:22,className:"text-blue-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-bold mb-2",children:" Dk Puanl Deerlendirmeler Hakknda"}),e.jsx("p",{className:"leading-relaxed",children:"3 yldz ve alt puan alan ilerde mteri bilgileri (isim ve telefon) gizlenir. Bu puanlar ortalamanza dahildir ancak iletiim bilgilerine eriiminiz kstlanr. Bu, her iki tarafn da gvenlii iin alnan bir nlemdir."})]})]})})]})},gx=({tickets:s,partnerId:t,partnerName:a,showNewTicketPage:n,setShowNewTicketPage:i,ticketSubject:r,setTicketSubject:h,ticketCategory:u,setTicketCategory:f,ticketDescription:x,setTicketDescription:I})=>{const[B,m]=o.useState(null);if(n)return e.jsx("div",{className:"p-4 md:p-6 h-full",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl border border-slate-200 shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:[e.jsxs("button",{onClick:()=>{i(!1),h(""),f(""),I("")},className:"mb-4 text-sm flex items-center gap-2 hover:text-blue-100 transition-colors",children:[e.jsx(Oe,{size:16,className:"rotate-90"})," Geri Dn"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(me,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Yeni Destek Talebi"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Sorununuzu detayl olarak aklayn"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Kategori *"}),e.jsxs("select",{value:u,onChange:w=>f(w.target.value),className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz..."}),e.jsx("option",{value:"technical",children:"Teknik Sorun"}),e.jsx("option",{value:"customer_complaint",children:"Mteri ikayeti"}),e.jsx("option",{value:"account",children:"Hesap lemleri"}),e.jsx("option",{value:"document",children:"Belge & Onay"}),e.jsx("option",{value:"other",children:"Dier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Konu *"}),e.jsx("input",{type:"text",value:r,onChange:w=>h(w.target.value),placeholder:"rn: Uygulamada teknik bir sorun yayorum",maxLength:100,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[r.length,"/100 karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Aklama *"}),e.jsx("textarea",{value:x,onChange:w=>I(w.target.value),placeholder:"Sorununuzu detayl olarak aklayn. Gerekirse i numaras, tarih gibi bilgileri ekleyin.",rows:8,maxLength:1e3,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[x.length,"/1000 karakter"]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Ae,{size:20,className:"text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Destek Sresi"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Talepler genellikle 2-4 i saati iinde yantlanr."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i(!1),h(""),f(""),I("")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"ptal"}),e.jsxs("button",{onClick:()=>{if(!u||!r.trim()||!x.trim()){alert("Ltfen tm zorunlu alanlar doldurun.");return}console.log("Destek Talebi:",{partnerId:t,partnerName:a,category:u,subject:r,description:x}),i(!1),h(""),f(""),I(""),alert("Destek talebiniz baaryla oluturuldu.")},disabled:!u||!r.trim()||!x.trim(),className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," Talep Gnder"]})]})]})]})});const T=()=>B?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",onClick:()=>m(null),children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",onClick:w=>w.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Destek Talebi Detay"}),e.jsxs("p",{className:"text-sm text-white/80",children:["Talep No: #",B.id]})]}),e.jsx("button",{onClick:()=>m(null),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Konu:"})," ",B.subject]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Tarih:"})," ",B.date]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Durum:"})," ",B.status]}),e.jsx("p",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsx("span",{className:"font-bold",children:"Detaylar:"})}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor."})]})]})}):null;return e.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(je,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Sesli Destek"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Operasyonel sorunlar iin 7/24 temsilcilerimizle grn."}),e.jsx(Gi,{variant:"primary",size:"md",queueSlug:"partner-calls",sourceType:"partner-direct",sourcePage:"/partner/support",label:"Destek Hattn Ara",className:"w-full"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(me,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Talep Olutur"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Finansal konular veya ikayetler iin bilet oluturun."}),e.jsx("button",{onClick:()=>i(!0),className:"w-full py-3 bg-white border-2 border-slate-100 text-slate-700 rounded-xl font-bold hover:border-blue-200 hover:text-blue-600 transition-colors",children:"Yeni Bilet A"})]})]}),e.jsxs("div",{className:"flex-1 bg-white rounded-3xl border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Gemi Taleplerim"}),e.jsx("div",{className:"space-y-2",children:s.length>0?s.map(w=>e.jsxs("div",{onClick:()=>m(w),className:"flex items-center justify-between p-4 rounded-xl border border-slate-100 hover:bg-slate-50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${w.status==="open"?"bg-green-500":"bg-slate-300"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:[w.subject," ",e.jsxs("span",{className:"text-slate-400 font-normal",children:["#",w.id]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:w.date})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-xs font-bold ${w.status==="open"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:w.status==="open"?"Ak":"zld"})]},w.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cr,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Henz destek talebi yok"}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Sorularnz veya sorunlarnz iin yukardan talep oluturabilirsiniz"})]})})]}),e.jsx(fe,{children:B&&T()})]})},jx=({requests:s,partnerHistory:t,emptyTrucks:a,reviews:n,handleTabChange:i,setActiveTab:r,setShowAddCreditModal:h})=>e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>i("requests"),className:"bg-slate-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(qs,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:s.length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"Yeni  Talebi"})]}),e.jsxs("button",{onClick:()=>i("history"),className:"bg-slate-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ye,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:t.filter(u=>u.status==="completed").length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"Tamamlanan "})]}),e.jsxs("button",{onClick:()=>i("emptyTrucks"),className:"bg-slate-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(te,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:a.length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"Bo Ara"})]}),e.jsxs("button",{onClick:()=>i("reviews"),className:"bg-slate-900 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{size:24,className:"opacity-80",fill:"currentColor"}),e.jsx("span",{className:"text-3xl font-black",children:n.length>0?(n.reduce((u,f)=>u+(f.rating||0),0)/n.length).toFixed(1):"-"})]}),e.jsxs("p",{className:"text-sm font-bold opacity-80",children:["Ortalama Puan (",n.length,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-yellow-500",fill:"currentColor"})," Yeni ler"]}),e.jsx("button",{onClick:()=>r("newJobs"),className:"text-sm text-blue-600 font-bold hover:text-blue-700",children:"Tmn Gr "})]}),e.jsx("div",{className:"space-y-3",children:s.slice(0,3).map(u=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-blue-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:u.serviceType}),e.jsx("span",{className:"text-xs text-slate-500",children:u.distance})]}),e.jsx("p",{className:"text-xs text-slate-600",children:u.location})]},u.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.jsx(te,{size:20,className:"text-orange-600"})," Bo Dnen Aralar"]}),e.jsx("button",{onClick:()=>r("emptyTrucks"),className:"text-sm text-blue-600 font-bold hover:text-blue-700",children:"Tmn Gr "})]}),e.jsx("div",{className:"space-y-3",children:a.slice(0,3).map(u=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-orange-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:u.vehicle}),e.jsx("span",{className:"text-xs text-slate-500",children:u.date})]}),e.jsxs("p",{className:"text-xs text-slate-600",children:[u.origin,"  ",u.destinations[0]]})]},u.id))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-8 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Hzl lemler"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>r("newJobs"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(re,{size:32,className:"mx-auto mb-2 text-yellow-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Yeni ler"})]}),e.jsxs("button",{onClick:()=>r("emptyTrucks"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(te,{size:32,className:"mx-auto mb-2 text-orange-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Bo Ara Ekle"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(rs,{size:32,className:"mx-auto mb-2 text-green-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Kredi Ykle"})]}),e.jsxs("button",{onClick:()=>r("settings"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(_t,{size:32,className:"mx-auto mb-2 text-purple-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Ayarlar"})]})]})]})]}),yx=({credits:s,transactions:t,walletFilter:a,setWalletFilter:n,setShowAddCreditModal:i})=>e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(vt,{size:64})}),e.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:"Toplam Bakiye (Kredi)"}),e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[s," ",e.jsx("span",{className:"text-lg font-normal text-slate-400",children:"Kredi"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors shadow-lg shadow-blue-900/50 flex items-center gap-2",children:[e.jsx(as,{size:16})," Kredi Ykle"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 shadow-sm flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-lg",children:e.jsx(Ia,{size:20})}),e.jsx("span",{className:"text-slate-500 text-sm font-bold",children:"Bu Ay Kazan"})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:"12,450.00"}),e.jsxs("p",{className:"text-xs text-green-600 font-bold mt-1 flex items-center gap-1",children:[e.jsx(wa,{size:12})," %12 art"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 shadow-sm flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(Yi,{size:20})}),e.jsx("span",{className:"text-slate-500 text-sm font-bold",children:"Tamamlanan "})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:"42 Adet"}),e.jsx("p",{className:"text-xs text-slate-400 font-bold mt-1",children:"Son 30 gn"})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Hesap Hareketleri"}),e.jsx("div",{className:"flex gap-2",children:["all","income","expense"].map(r=>e.jsx("button",{onClick:()=>n(r),className:`px-3 py-1.5 rounded-lg text-xs font-bold capitalize ${a===r?"bg-slate-100 text-slate-800":"text-slate-400 hover:text-slate-600"}`,children:r==="all"?"Tm":r==="income"?"Gelirler":"Giderler"},r))})]}),e.jsx("div",{className:"space-y-4",children:t.filter(r=>a==="all"||r.type===a).length>0?t.filter(r=>a==="all"||r.type===a).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-slate-100 hover:border-blue-100 hover:bg-blue-50/30 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r.type==="income"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.type==="income"?e.jsx(lo,{size:20}):e.jsx(wa,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm group-hover:text-blue-700 transition-colors",children:r.title}),e.jsx("p",{className:"text-xs text-slate-400",children:r.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${r.type==="income"?"text-green-600":"text-slate-800"}`,children:[r.type==="income"?"+":"-",r.isCredit?`${r.amount} Kredi`:`${r.amount}`]}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold",children:r.status==="completed"?"Tamamland":"Bekliyor"})]})]},r.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vt,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Henz ilem kayd yok"}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"lemleriniz burada grnecek"})]})})]})]}),Nx=({selectedHistoryItem:s,setSelectedHistoryItem:t,historySearch:a,setHistorySearch:n,historyFilter:i,setHistoryFilter:r,filteredHistory:h})=>{if(s){const u=s;return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("button",{onClick:()=>t(null),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-bold mb-4",children:[e.jsx(jt,{size:20,className:"rotate-180"})," Geri Dn"]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-6 md:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[" Detay ",e.jsxs("span",{className:"text-blue-600",children:["#",u.id]})]}),e.jsx("p",{className:"text-sm text-slate-500",children:new Date(u.completionTime).toLocaleString("tr-TR")})]}),e.jsx("div",{className:`px-4 py-2 rounded-xl font-bold ${u.status==="completed"?"bg-green-50 text-green-700":u.status==="cancelled"?"bg-red-50 text-red-700":"bg-gray-50 text-gray-700"}`,children:u.status==="completed"?" Tamamland":u.status==="cancelled"?" ptal":" ade"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2",children:"Finansal Detaylar"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Hizmet Bedeli"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["",u.totalAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Komisyon (%15)"}),e.jsxs("span",{className:"font-bold text-red-500",children:["-",u.commission]})]}),e.jsxs("div",{className:"flex justify-between text-base pt-3 border-t border-slate-100",children:[e.jsx("span",{className:"font-bold text-slate-800",children:"Toplam Kazan"}),e.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["",u.partnerEarning]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-100 rounded-xl text-xs text-yellow-800",children:[e.jsx(Ae,{size:14,className:"inline mr-1 mb-0.5"}),"Bu ilem iin ",e.jsx("strong",{children:"1 Kredi"})," kullanlmtr."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2",children:"Mteri & Rota"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold",children:u.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800",children:u.customerName}),e.jsx("p",{className:"text-xs text-slate-500",children:"Mteri"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 bg-white/50 p-2 rounded-lg",children:[e.jsx(gt,{size:16,className:"text-orange-500"}),e.jsx("span",{children:u.customerPhone||"05** *** ** 12"}),e.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded ml-auto",children:"Gizli"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"BALANGI"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:u.startLocation})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-slate-800"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"VARI"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:u.endLocation||"Yerinde Hizmet"})]})]})]})]})]})]})]})}return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:" No, Mteri Ad veya Plaka ara...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:u=>n(u.target.value)})]}),e.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shrink-0",children:["week","month","year"].map(u=>e.jsx("button",{onClick:()=>r(u),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-all ${i===u?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:u==="week"?"Bu Hafta":u==="month"?"Bu Ay":"Bu Yl"},u))})]}),e.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-400 font-bold",children:[e.jsx("th",{className:"p-4 pl-6",children:" No / Tarih"}),e.jsx("th",{className:"p-4",children:"Hizmet & Rota"}),e.jsx("th",{className:"p-4",children:"Mteri"}),e.jsx("th",{className:"p-4",children:"Tutar"}),e.jsx("th",{className:"p-4",children:"Durum"}),e.jsx("th",{className:"p-4"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.map(u=>e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors cursor-pointer group",onClick:()=>t(u),children:[e.jsxs("td",{className:"p-4 pl-6",children:[e.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",u.id]}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(u.completionTime).toLocaleString("tr-TR")})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm",children:u.serviceType}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Ne,{size:10})," ",u.startLocation," ",u.endLocation?` ${u.endLocation}`:""]})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center text-xs font-bold",children:u.customerName.charAt(0)}),e.jsx("span",{className:"text-sm text-slate-600",children:u.customerName})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-bold text-slate-800",children:["",u.totalAmount]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-bold ${u.status==="completed"?"bg-green-50 text-green-700":u.status==="cancelled"?"bg-red-50 text-red-700":"bg-slate-100 text-slate-600"}`,children:u.status==="completed"?"Tamamland":u.status==="cancelled"?"ptal":"ade"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(jt,{size:18})})})]},u.id))})]})})})]})},vx=({acceptedJobs:s,setActiveTab:t,handleStartOperation:a})=>e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Kabul Edilen ler"}),e.jsx("p",{className:"text-sm text-slate-600",children:'Teklifiniz kabul edildi! e balamak iin "Operasyonu Balat" butonuna basn'})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(As,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Kabul Edilmi  Yok"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Mteriler tekliflerinizi kabul ettiinde burada grnecek"}),e.jsx("button",{onClick:()=>t("requests"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:" Taleplerini Gr"})]}):e.jsx("div",{className:"grid gap-4",children:s.map(n=>{const i={id:n.id,customerName:n.customerName||"Mteri",location:n.fromLocation||"",dropoffLocation:n.toLocation||"",vehicleInfo:n.vehicleInfo||"Ara bilgisi yok",serviceType:n.serviceType==="cekici"?"ekici":n.serviceType==="vinc"?"Vin":"Hizmet",urgency:"normal",distance:"0 km",price:n.amount||0,estimatedPrice:n.amount||0,timestamp:n.createdAt||new Date().toISOString(),notes:n.description||"",_originalRequest:n};return e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border-2 border-green-200 shadow-lg overflow-hidden hover:shadow-xl transition-all",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(As,{size:24,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:i.serviceType}),e.jsx("p",{className:"text-sm text-slate-500",children:i.customerName})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:" Kabul Edildi"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ne,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-700",children:"Nereden:"}),e.jsx("p",{className:"text-slate-600",children:i.location})]})]}),i.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-700",children:"Nereye:"}),e.jsx("p",{className:"text-slate-600",children:i.dropoffLocation})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(te,{size:16,className:"text-slate-500"}),e.jsx("p",{className:"text-slate-600",children:i.vehicleInfo})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:()=>a(i),className:"w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl text-sm font-bold hover:from-green-700 hover:to-emerald-700 transition-all flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(yt,{size:18}),"Operasyonu Balat"]})})]})},n.id)})})]}),wx=({myOffers:s,setActiveTab:t,handleCancelOffer:a})=>{const n=s.filter(f=>f.status==="sent"),i=s.filter(f=>f.status==="accepted"),r=s.filter(f=>f.status==="rejected"),h=s.filter(f=>f.status==="withdrawn"),u=f=>{switch(f){case"sent":return e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full",children:" Beklemede"});case"accepted":return e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:" Kabul Edildi"});case"rejected":return e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:" Reddedildi"});case"withdrawn":return e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-bold rounded-full",children:" ptal Edildi"});default:return e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-xs font-bold rounded-full",children:f})}};return e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Gnderilen Tekliflerim"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Mterilere gnderdiiniz teklifleri takip edin"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-bold mb-1",children:"Beklemede"}),e.jsx("p",{className:"text-2xl font-black text-blue-700",children:n.length})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:"Kabul Edildi"}),e.jsx("p",{className:"text-2xl font-black text-green-700",children:i.length})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-red-600 font-bold mb-1",children:"Reddedildi"}),e.jsx("p",{className:"text-2xl font-black text-red-700",children:r.length})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 font-bold mb-1",children:"ptal Edildi"}),e.jsx("p",{className:"text-2xl font-black text-gray-700",children:h.length})]})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Is,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Henz Teklif Gndermediniz"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:" taleplerine teklif gndererek kazanmaya balayn"}),e.jsx("button",{onClick:()=>t("requests"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:" Taleplerini Gr"})]}):e.jsx("div",{className:"space-y-4",children:s.map(f=>{const x=f.status==="sent";return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 lg:p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center shrink-0",children:e.jsx(te,{size:20,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"font-bold text-slate-900",children:["Teklif #",f.id.slice(0,8)]}),u(f.status)]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Talep: #",f.requestId.slice(0,8),"  ",new Date(f.createdAt).toLocaleDateString("tr-TR")," ",new Date(f.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]})]})]}),f.message&&e.jsx("div",{className:"ml-13 p-3 bg-slate-50 rounded-lg mb-3",children:e.jsx("p",{className:"text-xs text-slate-600",children:f.message})}),e.jsxs("div",{className:"ml-13 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{size:16,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["",f.price]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{size:16,className:"text-blue-600"}),e.jsxs("span",{className:"text-sm text-slate-600",children:[f.etaMinutes," dakika"]})]})]})]}),e.jsx("div",{className:"flex lg:flex-col gap-2",children:x&&e.jsxs("button",{onClick:()=>a(f.id),className:"flex-1 lg:w-32 px-4 py-2 bg-red-50 text-red-600 rounded-lg font-bold text-sm hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ne,{size:16}),e.jsx("span",{children:"ptal Et"})]})})]}),f.status==="sent"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-2",children:[e.jsx(Ae,{size:14}),"Mteri teklifinizi deerlendiriyor. Bildirim geldiinde haberdar olacaksnz."]})}),f.status==="accepted"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-2",children:[e.jsx(ye,{size:14}),"Tebrikler! Teklifiniz kabul edildi. Mteriyle iletiime geebilirsiniz."]})}),f.status==="rejected"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-2",children:[e.jsx(Te,{size:14}),"Teklifiniz reddedildi. Baka ilere teklif verebilirsiniz."]})})]},f.id)})})]})},ir=({requests:s,customerRequests:t,partnerServiceAreas:a,serviceAreasLoaded:n,newJobsFilter:i,setNewJobsFilter:r,unlockedJobs:h,offeringJobId:u,offerError:f,myOffers:x,setSelectedJobForDetail:I,setSelectedJobForQuote:B,setQuotePrice:m,setActiveTab:T,handleOpenCustomerOfferModal:w,handleStartOperation:_,handleCancelOffer:E})=>{const L=t.map(N=>({id:N.id,serviceType:N.serviceType==="cekici"?"ekici Hizmeti":N.serviceType==="aku"?"Ak Takviyesi":N.serviceType==="lastik"?"Lastik Deiimi":N.serviceType==="yakit"?"Yakt Destei":"Yol Yardm",location:N.fromLocation,dropoffLocation:N.toLocation,distance:"~5 km",price:N.amount||500,timestamp:new Date(N.createdAt).toLocaleString("tr-TR"),customerName:N.customerName||"B2C Mteri",vehicleInfo:N.vehicleInfo||"Belirtilmedi",urgency:"normal",notes:N.description,_originalRequest:N})),O=[...s,...L].filter(N=>i==="nearest"?parseFloat(N.distance)<10:i==="urgent"?N.urgency==="high":!0),p=N=>{var D;N._originalRequest?w(N._originalRequest):(B(N),m(((D=N.estimatedPrice)==null?void 0:D.toString())||""))};return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-blue-800",children:"Hizmet Blgeniz:"}),a.map((N,D)=>e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-xs font-bold rounded-full",children:N},D))]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Sadece bu blgelerdeki i talepleri gsterilmektedir"})]})]})}),a.length===0&&n&&e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center text-white",children:e.jsx(pe,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-800",children:"Hizmet Blgesi Tanml Deil"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Ayarlar  Hizmet Blgeleri'nden blgenizi tanmlayn"})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 w-full md:w-auto overflow-x-auto",children:[{id:"all",label:"Tm",icon:no},{id:"nearest",label:"En Yakn",icon:Me},{id:"urgent",label:"Acil ler",icon:pe}].map(N=>e.jsxs("button",{onClick:()=>r(N.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all whitespace-nowrap ${i===N.id?"bg-blue-600 text-white shadow-lg shadow-blue-200":"bg-white text-slate-600 border border-slate-200 hover:border-blue-300"}`,children:[e.jsx(N.icon,{size:16})," ",N.label]},N.id))}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(oe,{size:16}),e.jsxs("span",{children:[O.length," Yeni "]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:O.map(N=>{const D=h.includes(N.id),H=u===N.id,K=f===N.id,$=x.find(j=>j.requestId===N.id&&(j.status==="sent"||j.status==="accepted")),M=$&&$.status==="sent",k=$&&$.status==="accepted";return e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl border-2 p-6 transition-all hover:shadow-xl ${D||k?"border-green-300 bg-green-50/50":M?"border-blue-300 bg-blue-50/50":K?"border-red-300 bg-red-50/50":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${D||k?"bg-green-100 text-green-600":M?"bg-blue-100 text-blue-600":N._originalRequest?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:N.serviceType.includes("ekici")?e.jsx(te,{size:24}):e.jsx(dr,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:N.serviceType}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",N.id]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(oe,{size:12})," Beklemede"]}),k&&e.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(ye,{size:12})," Kabul Edildi"]}),N._originalRequest&&e.jsx("span",{className:"bg-orange-100 text-orange-600 text-xs font-bold px-2 py-1 rounded-full",children:"B2C"}),N.urgency==="high"&&e.jsxs("span",{className:"bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(pe,{size:12})," ACL"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4 pb-4 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ne,{size:16,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Alnacak Konum"}),e.jsx("p",{className:"font-bold text-slate-800",children:N.location}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" ",N.distance," uzakta"]})]})]}),N.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{size:16,className:"text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Teslim Noktas"}),e.jsx("p",{className:"font-bold text-slate-800",children:N.dropoffLocation})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(oe,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-600",children:N.timestamp})]}),N.estimatedPrice&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(js,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-green-600",children:["~",N.estimatedPrice]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(N),className:"flex-1 py-2 border-2 border-slate-200 text-slate-700 rounded-xl text-sm font-bold hover:border-blue-300 hover:text-blue-600 transition-all",children:"ncele"}),M?e.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[e.jsxs("div",{className:"py-2 bg-blue-50 text-blue-700 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-blue-200",children:[e.jsx(oe,{size:14})," Teklif Deerlendiriliyor"]}),e.jsx("button",{onClick:()=>T("offers"),className:"py-1 text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Teklifimi Grntle "})]}):k?e.jsxs("button",{onClick:()=>_(N),className:"flex-1 py-2 bg-green-600 text-white rounded-xl text-sm font-bold hover:bg-green-700 transition-all flex items-center justify-center gap-2",children:["Operasyonu Balat ",e.jsx(yt,{size:16})]}):D?e.jsxs("button",{onClick:()=>_(N),className:"flex-1 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:["Operasyonu Balat ",e.jsx(yt,{size:16})]}):H?e.jsxs("div",{className:"flex-1 py-2 bg-blue-50 text-blue-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-blue-100",children:[e.jsx(ce,{size:14,className:"animate-spin"})," Deerlendiriliyor..."]}):K?e.jsxs("div",{className:"flex-1 py-2 bg-red-50 text-red-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-red-100",children:[e.jsx(pe,{size:14})," Ret Edildi"]}):e.jsxs("button",{onClick:()=>p(N),className:"flex-1 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:16})," Teklif Ver"]})]}),$&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-600",children:"Gnderdiiniz Teklif"}),$.status==="sent"&&e.jsx("span",{className:"text-xs text-blue-600",children:" Deerlendiriliyor"}),$.status==="accepted"&&e.jsx("span",{className:"text-xs text-green-600",children:" Kabul Edildi"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["",$.price]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{size:14,className:"text-blue-600"}),e.jsxs("span",{className:"text-slate-700",children:[$.etaMinutes," dk"]})]}),$.status==="sent"&&e.jsxs("button",{onClick:()=>E($.id),className:"ml-auto text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[e.jsx(ne,{size:12})," ptal Et"]})]})]})]},N.id)})}),O.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{size:40,className:"text-slate-300"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"Yeni  Bulunamad"}),e.jsx("p",{className:"text-slate-500",children:"Seili filtreye uygun i talebi yok"})]})]})},kx=({partnerId:s,onToast:t})=>{const[a,n]=o.useState([]),[i,r]=o.useState(!0),[h,u]=o.useState(!1),[f,x]=o.useState(null),[I,B]=o.useState(""),[m,T]=o.useState([]),[w,_]=o.useState(!1),[E,L]=o.useState(1),[S,O]=o.useState(""),[p,N]=o.useState(!1),[D,H]=o.useState(!1),[K,$]=o.useState(""),[M,k]=o.useState(!1),[j,R]=o.useState(""),U=Object.keys(ja).sort(),X=I?ja[I]||[]:[],Y=U.filter(z=>z.toLowerCase().includes(K.toLowerCase())),J=X.filter(z=>z.toLowerCase().includes(j.toLowerCase()));o.useEffect(()=>{Z()},[s]);const Z=async()=>{r(!0);try{const z=await P.serviceAreas.getByPartnerId(s);n(z)}catch(z){console.error("Hizmet blgeleri yklenemedi:",z),t("Hizmet blgeleri yklenirken hata olutu","error")}finally{r(!1)}},g=()=>{B(""),T([]),_(!1),L(1),O(""),$(""),R("")},A=()=>{g(),x(null),u(!0)},G=z=>{B(z.city),T(z.districts||[]),_(z.isPrimary),L(z.priceMultiplier),O(z.notes||""),x(z),u(!0)},F=async()=>{if(!I){t("Ltfen bir il sein","error");return}if(a.find(ae=>ae.city===I&&(!f||ae.id!==f.id))){t("Bu il zaten eklenmi","error");return}N(!0);try{f?(await P.serviceAreas.update(f.id,{districts:m.length>0?m:void 0,isPrimary:w,priceMultiplier:E,notes:S||void 0}),t("Hizmet blgesi gncellendi","success")):(await P.serviceAreas.create({partnerId:s,city:I,districts:m.length>0?m:void 0,isPrimary:w,priceMultiplier:E,notes:S||void 0}),t("Hizmet blgesi eklendi","success")),await Z(),u(!1),g()}catch(ae){console.error("Kayt hatas:",ae),t(ae.message||"Kayt srasnda hata olutu","error")}finally{N(!1)}},de=async z=>{if(confirm(`${z.city} hizmet blgesini silmek istediinize emin misiniz?`))try{await P.serviceAreas.delete(z.id),t("Hizmet blgesi silindi","success"),await Z()}catch(ae){console.error("Silme hatas:",ae),t("Silme srasnda hata olutu","error")}},_e=async z=>{try{await P.serviceAreas.setPrimary(s,z.id),t(`${z.city} ana hizmet blgesi olarak ayarland`,"success"),await Z()}catch(ae){console.error("Ana blge ayarlama hatas:",ae),t("Ayarlama srasnda hata olutu","error")}},Se=z=>{T(ae=>ae.includes(z)?ae.filter(De=>De!==z):[...ae,z])};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ce,{className:"w-8 h-8 animate-spin text-brand-orange"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Hizmet Blgelerim"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Hangi illere hizmet verdiinizi belirleyin"})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:[e.jsx(as,{size:18}),"Blge Ekle"]})]}),a.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(Ne,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Henz hizmet blgesi tanmlamadnz"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Mterilerinizin sizi bulabilmesi iin hizmet verdiiniz illeri ekleyin"}),e.jsx("button",{onClick:A,className:"px-6 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:"lk Blgeyi Ekle"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(z=>e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl p-5 border-2 transition-all ${z.isPrimary?"border-brand-orange shadow-lg shadow-orange-100":"border-gray-100 hover:border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z.isPrimary?e.jsx(xr,{className:"w-5 h-5 text-brand-orange"}):e.jsx(Ne,{className:"w-5 h-5 text-gray-400"}),e.jsx("h4",{className:"font-bold text-gray-900",children:z.city})]}),z.isPrimary&&e.jsx("span",{className:"text-xs font-bold text-brand-orange bg-orange-50 px-2 py-1 rounded-full",children:"Ana Blge"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"leler: "}),z.districts&&z.districts.length>0?z.districts.slice(0,3).join(", ")+(z.districts.length>3?` +${z.districts.length-3}`:""):"Tm l"]}),z.priceMultiplier!==1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fiyat arpan: "}),z.priceMultiplier,"x"]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[!z.isPrimary&&e.jsx("button",{onClick:()=>_e(z),className:"flex-1 text-xs font-medium text-gray-600 hover:text-brand-orange py-2 rounded-lg hover:bg-orange-50 transition-colors",children:"Ana Blge Yap"}),e.jsx("button",{onClick:()=>G(z),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>de(z),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Pa,{size:16})})]})]},z.id))}),e.jsx(fe,{children:h&&e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>u(!1),children:e.jsxs(q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:z=>z.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:f?"Hizmet Blgesi Dzenle":"Yeni Hizmet Blgesi"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"l Sein *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!f&&H(!D),disabled:!!f,className:`w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between ${f?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer hover:border-brand-orange"}`,children:[e.jsx("span",{className:I?"text-gray-900":"text-gray-400",children:I||"l sein..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),D&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:K,onChange:z=>$(z.target.value),placeholder:"l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:Y.map(z=>e.jsx("button",{onClick:()=>{B(z),T([]),H(!1),$("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:z},z))})]})]})]}),I&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"leler (Opsiyonel)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Bo brakrsanz tm il kapsamnda hizmet vereceiniz anlalr"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>k(!M),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:m.length>0?"text-gray-900":"text-gray-400",children:m.length>0?`${m.length} ile seildi`:"Tm l (seim yaplmad)"}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),M&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:z=>R(z.target.value),placeholder:"le ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:J.map(z=>e.jsxs("button",{onClick:()=>Se(z),className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm flex items-center justify-between",children:[e.jsx("span",{children:z}),m.includes(z)&&e.jsx(ge,{size:16,className:"text-brand-orange"})]},z))})]})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map(z=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-50 text-brand-orange text-xs rounded-lg",children:[z,e.jsx("button",{onClick:()=>Se(z),className:"hover:text-red-500",children:e.jsx(ne,{size:12})})]},z))})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:z=>_(z.target.checked),className:"w-5 h-5 rounded border-gray-300 text-brand-orange focus:ring-brand-orange"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Ana Hizmet Blgesi"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu blge listelerde ncelikli gsterilir"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat arpan"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:E,onChange:z=>L(parseFloat(z.target.value)),className:"flex-1 accent-brand-orange"}),e.jsxs("span",{className:"font-bold text-gray-900 w-12 text-right",children:[E.toFixed(1),"x"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1.0x = Standart fiyat. Uzak blgeler iin artrabilirsiniz."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar (Opsiyonel)"}),e.jsx("textarea",{value:S,onChange:z=>O(z.target.value),placeholder:"Bu blge iin zel notlarnz...",rows:2,className:"w-full px-4 py-3 border rounded-xl resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-50 transition-colors",children:"ptal"}),e.jsx("button",{onClick:F,disabled:p||!I,className:"flex-1 px-4 py-3 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:18,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:18}),f?"Gncelle":"Ekle"]})})]})]})})})]})},_x=[{id:"profile",icon:Es,label:"Profil"},{id:"notifications",icon:qs,label:"Bildirimler"},{id:"security",icon:br,label:"Gvenlik"},{id:"company",icon:fr,label:"irket Bilgileri"},{id:"vehicles",icon:te,label:"Aralar"},{id:"contact",icon:je,label:"letiim"},{id:"services",icon:dr,label:"Hizmetler"},{id:"serviceAreas",icon:so,label:"Hizmet Blgeleri"},{id:"returnRoutes",icon:va,label:"Bo Dn Rotalar"},{id:"documents",icon:ya,label:"Belgeler"}],Sx=({CURRENT_PARTNER_ID:s,CURRENT_PARTNER_NAME:t,CURRENT_PARTNER_EMAIL:a,CURRENT_PARTNER_PHONE:n,CURRENT_PARTNER_RATING:i,settingsSubTab:r,setSettingsSubTab:h,companyLogo:u,setCompanyLogo:f,profilePhoto:x,setProfilePhoto:I,existingLogoUrl:B,existingProfilePhotoUrl:m,isEditingProfile:T,setIsEditingProfile:w,isCompressingLogo:_,isCompressingProfile:E,isSavingSettings:L,partnerFormData:S,setPartnerFormData:O,companyFormData:p,setCompanyFormData:N,contactFormData:D,setContactFormData:H,passwordFormData:K,setPasswordFormData:$,notificationPreferences:M,setNotificationPreferences:k,isSavingNotificationPrefs:j,isEditingCompanyInfo:R,setIsEditingCompanyInfo:U,isEditingContactInfo:X,setIsEditingContactInfo:Y,isChangingPassword:J,isSavingCompanyInfo:Z,isSavingContactInfo:g,isSavingServices:A,selectedServices:G,toggleService:F,fleet:de,setActiveTab:_e,documents:Se,isLoadingDocuments:z,setShowDocumentUploadModal:ae,setSelectedDocumentDetail:De,setShowDocumentDetailModal:Fe,credits:cs,handleLogoUpload:ks,handleProfilePhotoUpload:ue,handleSaveProfileSettings:Ie,handleCancelProfileEdit:ze,handleSaveCompanyInfo:He,handleCancelCompanyEdit:Ke,handleSaveContactInfo:Ee,handleCancelContactEdit:_s,handlePasswordChange:ds,handleSaveNotificationPreferences:xs,handleSaveServices:Ve,showNewToast:Ge})=>e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"w-64 shrink-0 space-y-2",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-200 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[m?e.jsx("img",{src:m,alt:t,className:"w-14 h-14 rounded-xl object-cover border-2 border-blue-200"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-200",children:t.charAt(0)}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx(ge,{size:10,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-800 truncate",children:t}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(re,{size:14,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-600",children:i.toFixed(1)})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(to,{size:14}),e.jsx("span",{className:"truncate",children:a})]})})]}),_x.map(y=>e.jsxs("button",{onClick:()=>h(y.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${r===y.id?"bg-slate-800 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(y.icon,{size:18})," ",y.label]},y.id))]}),e.jsxs("div",{className:"flex-1 bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Profil Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"irket Logosu"}),e.jsxs("div",{className:`relative border-2 border-dashed ${T?"border-blue-300 hover:border-blue-400":"border-slate-200"} rounded-2xl p-6 flex flex-col items-center justify-center transition-all ${T?"cursor-pointer bg-blue-50/50":"cursor-not-allowed bg-slate-50"}`,onClick:()=>{var y;return T&&((y=document.getElementById("logoInput"))==null?void 0:y.click())},children:[_?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ce,{size:40,className:"animate-spin text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Sktrlyor..."})]}):u?e.jsx("img",{src:ss(u),alt:"Logo",className:"w-24 h-24 object-contain"}):B?e.jsx("img",{src:B,alt:"Logo",className:"w-24 h-24 object-contain"}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:40,className:"text-slate-300 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500 text-center",children:T?"Logo Ykle":"Logo Yok"})]}),e.jsx("input",{type:"file",id:"logoInput",accept:"image/*",className:"hidden",onChange:ks,disabled:!T})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Profil Fotoraf"}),e.jsxs("div",{className:`relative border-2 border-dashed ${T?"border-blue-300 hover:border-blue-400":"border-slate-200"} rounded-2xl p-6 flex flex-col items-center justify-center transition-all ${T?"cursor-pointer bg-blue-50/50":"cursor-not-allowed bg-slate-50"}`,onClick:()=>{var y;return T&&((y=document.getElementById("profilePhotoInput"))==null?void 0:y.click())},children:[E?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ce,{size:40,className:"animate-spin text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Sktrlyor..."})]}):x?e.jsx("img",{src:ss(x),alt:"Profil",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-200"}):m?e.jsx("img",{src:m,alt:"Profil",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-200"}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{size:40,className:"text-slate-300 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500 text-center",children:T?"Fotoraf Ykle":"Fotoraf Yok"})]}),e.jsx("input",{type:"file",id:"profilePhotoInput",accept:"image/*",className:"hidden",onChange:ue,disabled:!T})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"irket / letme Ad *"}),e.jsx("input",{type:"text",value:S.company_name,onChange:y=>O({...S,company_name:y.target.value}),disabled:!T,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Vergi No *"}),e.jsx("input",{type:"text",placeholder:"1234567890",value:S.tax_number,onChange:y=>O({...S,tax_number:y.target.value}),disabled:!T,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Telefon *"}),e.jsx("input",{type:"tel",placeholder:"+90 5XX XXX XX XX",value:S.phone,onChange:y=>O({...S,phone:y.target.value}),disabled:!T,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"E-posta"}),e.jsx("input",{type:"email",placeholder:"ornek@firma.com",value:S.email,onChange:y=>O({...S,email:y.target.value}),disabled:!T,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Adres"}),e.jsx("textarea",{rows:3,placeholder:" yeri adresi...",value:S.address,onChange:y=>O({...S,address:y.target.value}),disabled:!T,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:T?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ze,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsx("button",{onClick:Ie,disabled:L,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:L?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>w(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," Dzenle"]})})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Bildirim Ayarlar"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(qs,{size:20,className:"text-blue-600"})," Yeni  Talepleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.new_job_push_enabled,onChange:y=>k({...M,new_job_push_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Push Bildirim"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.new_job_sms_enabled,onChange:y=>k({...M,new_job_sms_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"SMS"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.new_job_email_enabled,onChange:y=>k({...M,new_job_email_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"E-posta"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(ge,{size:20,className:"text-green-600"})," Teklif Kabul/Red Bildirimleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.offer_status_push_enabled,onChange:y=>k({...M,offer_status_push_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Push Bildirim"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.offer_status_sms_enabled,onChange:y=>k({...M,offer_status_sms_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"SMS"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:M.offer_status_email_enabled,onChange:y=>k({...M,offer_status_email_enabled:y.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"E-posta"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:e.jsxs("button",{onClick:xs,disabled:j,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ge,{size:18})," ",j?"Kaydediliyor...":"Tercihleri Kaydet"]})})]}),r==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gvenlik Ayarlar"}),e.jsx("p",{className:"text-sm text-slate-500",children:"ifrenizi gncelleyerek hesabnz koruyun."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Mevcut ifre *"}),e.jsx("input",{type:"password",placeholder:"",value:K.currentPassword,onChange:y=>$({...K,currentPassword:y.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yeni ifre *"}),e.jsx("input",{type:"password",placeholder:"",value:K.newPassword,onChange:y=>$({...K,newPassword:y.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yeni ifre Tekrar *"}),e.jsx("input",{type:"password",placeholder:"",value:K.confirmPassword,onChange:y=>$({...K,confirmPassword:y.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>$({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsxs("button",{onClick:ds,disabled:J,className:"bg-red-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-red-700 shadow-lg shadow-red-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(br,{size:18})," ",J?"Gncelleniyor...":"ifreyi Gncelle"]})]})]}),r==="company"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"irket Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ticaret Sicil No"}),e.jsx("input",{type:"text",placeholder:"12345/6789",value:p.trade_registry_number,onChange:y=>N({...p,trade_registry_number:y.target.value}),disabled:!R,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Mersis No"}),e.jsx("input",{type:"text",placeholder:"0123456789012345",value:p.mersis_no,onChange:y=>N({...p,mersis_no:y.target.value}),disabled:!R,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Vergi Dairesi"}),e.jsx("input",{type:"text",placeholder:"Kadky",value:p.tax_office,onChange:y=>N({...p,tax_office:y.target.value}),disabled:!R,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Faaliyet Alan"}),e.jsxs("select",{value:p.sector,onChange:y=>N({...p,sector:y.target.value}),disabled:!R,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"Oto Kurtarma & Yol Yardm",children:"Oto Kurtarma & Yol Yardm"}),e.jsx("option",{value:"ekici Hizmeti",children:"ekici Hizmeti"}),e.jsx("option",{value:"Genel Ara Servisi",children:"Genel Ara Servisi"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kurulu Yl"}),e.jsx("input",{type:"number",placeholder:"2015",value:p.foundation_year,onChange:y=>N({...p,foundation_year:parseInt(y.target.value)||new Date().getFullYear()}),disabled:!R,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:R?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Ke,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsx("button",{onClick:He,disabled:Z,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>U(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," Dzenle"]})})]}),r==="vehicles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Ara Filosu Bilgileri"}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(te,{size:16})," Filo Ynetimine Git"]})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Ara ekleme ve dzenleme iin ",e.jsx("strong",{children:'"Filo Ynetimi"'})," sekmesini kullann. Burada kaytl aralarnz grntleyebilirsiniz."]}),de.length===0?e.jsxs("div",{className:"p-12 text-center bg-slate-50 rounded-2xl border-2 border-dashed border-slate-300",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"Henz kaytl ara yok"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Filo ynetiminize balamak iin Filo Ynetimi sekmesinden ara ekleyin"}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 transition-all flex items-center gap-2 mx-auto",children:[e.jsx(te,{size:16})," Filo Ynetimine Git"]})]}):e.jsx("div",{className:"space-y-3",children:de.map(y=>e.jsx("div",{className:"p-5 bg-slate-50 border border-slate-200 rounded-2xl hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[y.front_photo_url?e.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border-2 border-blue-200",children:e.jsx("img",{src:y.front_photo_url,alt:y.plate,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600",children:e.jsx(te,{size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800",children:[y.brand," ",y.model]}),e.jsx("p",{className:"text-sm text-slate-500",children:y.plate}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${y.status==="active"?"bg-green-100 text-green-700":y.status==="maintenance"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-500"}`,children:y.status==="active"?"Aktif":y.status==="maintenance"?"Bakmda":"Pasif"})})]})]}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"text-blue-600 hover:text-blue-700 font-bold text-sm px-4 py-2 hover:bg-blue-50 rounded-lg transition-all flex items-center gap-1",children:["Detay ",e.jsx(Oe,{size:16,className:"-rotate-90"})]})]})},y.id))})]}),r==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"letiim Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yetkili Kii Ad *"}),e.jsx("input",{type:"text",value:D.authorized_person,onChange:y=>H({...D,authorized_person:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cep Telefonu *"}),e.jsx("input",{type:"tel",placeholder:"05XX XXX XX XX",value:D.mobile_phone,onChange:y=>H({...D,mobile_phone:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sabit Telefon"}),e.jsx("input",{type:"tel",placeholder:"+90 216 XXX XX XX",value:D.landline_phone,onChange:y=>H({...D,landline_phone:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Acil Durum Telefonu"}),e.jsx("input",{type:"tel",placeholder:"+90 5XX XXX XX XX",value:D.emergency_phone,onChange:y=>H({...D,emergency_phone:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"E-posta Adresi *"}),e.jsx("input",{type:"email",placeholder:"ornek@firma.com",value:S.email,onChange:y=>O({...S,email:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:" Yeri Adresi *"}),e.jsx("textarea",{rows:3,value:D.business_address,onChange:y=>H({...D,business_address:y.target.value}),disabled:!X,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:X?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:_s,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsx("button",{onClick:Ee,disabled:g,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>Y(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," Dzenle"]})})]}),r==="services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Hizmet Ayarlar"}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-100 rounded-xl flex gap-3 text-sm text-yellow-800",children:[e.jsx(pe,{className:"shrink-0",size:20}),e.jsx("p",{children:"Kayt olurken setiiniz hizmetler otomatik olarak aktiftir. Deiiklik yapmak iin ilgili hizmeti iaretleyip kaydedin."})]}),e.jsx("div",{className:"space-y-4",children:["cekici","aku","lastik","yakit","yardim"].map(y=>{const be={cekici:"Oto ekici",aku:"Ak Takviye",lastik:"Lastik Deiimi",yakit:"Yakt kmali",yardim:"Genel Yol Yardm"};return e.jsx("div",{className:"flex items-center justify-between p-4 border-2 border-slate-200 rounded-xl hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:G.includes(y),onChange:()=>F(y),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-bold text-slate-700",children:be[y]})]})},y)})}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:e.jsxs("button",{onClick:Ve,disabled:A,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ge,{size:18})," ",A?"Kaydediliyor...":"Ayarlar Kaydet"]})})]}),r==="serviceAreas"&&e.jsx(kx,{partnerId:s,onToast:(y,be)=>Ge(y,be)}),r==="returnRoutes"&&e.jsx(en,{partnerId:s,partnerVehicles:de,onToast:(y,be)=>Ge(y,be)}),r==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Belgeler & Dkmanlar"}),e.jsxs("button",{onClick:()=>ae(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(Ts,{size:16})," Belge Ykle"]})]}),z?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Belgeler ykleniyor..."})]}):Se.length===0?e.jsxs("div",{className:"p-12 text-center bg-slate-50 rounded-2xl border-2 border-dashed border-slate-300",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(me,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"Henz yklenmi belge yok"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Belgelerinizi ykleyerek ilemlere balayn"}),e.jsx("button",{onClick:()=>ae(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 transition-all",children:"+ lk Belgeyi Ykle"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Se.map(y=>e.jsxs("div",{onClick:()=>{De({title:y.fileName,type:y.type,status:y.status==="approved"?"uploaded":y.status==="rejected"?"not_uploaded":"pending",uploadDate:new Date(y.uploadDate).toLocaleDateString("tr-TR"),fileName:y.fileName,fileSize:`${(y.fileSize/1024/1024).toFixed(2)} MB`,expiryDate:y.expiryDate?new Date(y.expiryDate).toLocaleDateString("tr-TR"):void 0}),Fe(!0)},className:"p-5 border-2 border-dashed border-slate-300 rounded-2xl hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${y.status==="approved"?"bg-green-100 text-green-600":y.status==="rejected"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:e.jsx(me,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:y.fileName}),e.jsx("p",{className:"text-xs text-slate-500",children:y.type.toUpperCase()})]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:y.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(As,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-xs font-bold text-green-600",children:"Onayland"})]}):y.status==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx(pe,{size:16,className:"text-red-600"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:"Reddedildi"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:16,className:"text-yellow-600"}),e.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"nceleniyor"})]})})]},y.id))})]})]})]}),zx=[{id:1,credits:10,price:150,label:"Balang",recommended:!1},{id:2,credits:50,price:600,label:"Profesyonel",recommended:!0},{id:3,credits:100,price:1e3,label:"Avantajl",recommended:!1}],Cx=["Kibar Mteri","Sorunsuz deme","Bahi Brakt","Konum Doruydu","Anlayl","letiim Kolayd"],Tx=["letiim Zor","Ge Geldi","deme Sorunu","Konum Hatal","Kaba Davran","Bekletti"],ku=()=>{const s=qi(),{toast:t,showToast:a,hideToast:n}=Wi(),i=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),r=i.id||i.partner_id||"",h=i.company_name||i.name||"Partner",u=i.phone||"",f=i.email||"",x=i.rating||0,[I,B]=o.useState(!0),[m,T]=o.useState("home"),[w,_]=o.useState(!1),[E,L]=o.useState(void 0),[S,O]=o.useState([]),[p,N]=o.useState(null),[D,H]=o.useState(!1),[K,$]=o.useState(0),[M,k]=o.useState([]),[j,R]=o.useState({lat:41.0082,lng:28.9784,name:"Taksim Meydan, stanbul"}),[U,X]=o.useState(null),[Y,J]=o.useState(!1),[Z,g]=o.useState(!1),[A,G]=o.useState(null),[F,de]=o.useState(""),[_e,Se]=o.useState(""),[z,ae]=o.useState(null),[De,Fe]=o.useState(null),[cs,ks]=o.useState([]),[ue,Ie]=o.useState(null),[ze,He]=o.useState(""),[Ke,Ee]=o.useState(""),[_s,ds]=o.useState(""),[xs,Ve]=o.useState([]),[Ge,y]=o.useState(!1),[be,At]=o.useState(null),[Dt,Xs]=o.useState([]),[Pe,Zs]=o.useState([]),[Ss,Qs]=o.useState(!1),[ms,Bs]=o.useState({show:!1,type:"info",title:"",message:""}),[ie,us]=o.useState(0),[b,le]=o.useState(!1),[ve,Ye]=o.useState(!1),[Ax,sn]=o.useState(null),[Dx,tn]=o.useState(null),[Ga,Ya]=o.useState(!1),[an,qa]=o.useState(!1),[et,Ua]=o.useState(0),[st,tt]=o.useState([]),[Ix,Ex]=o.useState(!1),[ln,It]=o.useState(!1),[Et,Pt]=o.useState(""),[Bt,Mt]=o.useState(""),[rn,nn]=o.useState(null),[Rt,Px]=o.useState("all"),[Bx,Mx]=o.useState("list"),[Ot,on]=o.useState(""),[cn,dn]=o.useState("month"),[xn,mn]=o.useState(null),[at,un]=o.useState([]),[hn,pn]=o.useState("all"),[bn,Ms]=o.useState(!1),[fn,Rx]=o.useState([]),[gn,Ja]=o.useState("profile"),[Lt,lt]=o.useState(null),[$t,rt]=o.useState(null),[jn,Wa]=o.useState(!1),[yn,Xa]=o.useState(!1),[Za,nt]=o.useState(!1),[Qa,el]=o.useState(""),[Ft,sl]=o.useState(""),[Ht,Kt]=o.useState({company_name:"",tax_number:"",email:"",phone:"",address:""}),[Nn,tl]=o.useState(!1),[qe,al]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[vn,ll]=o.useState(!1),[Vt,Gt]=o.useState({trade_registry_number:"",mersis_no:"",tax_office:"",sector:"",foundation_year:new Date().getFullYear()}),[wn,rl]=o.useState(!1),[nl,it]=o.useState(!1),[Yt,qt]=o.useState({authorized_person:"",mobile_phone:"",landline_phone:"",emergency_phone:"",business_address:""}),[kn,il]=o.useState(!1),[ol,ot]=o.useState(!1),[Ut,cl]=o.useState([]),[_n,dl]=o.useState(!1),[Sn,ct]=o.useState(!1),[C,Q]=o.useState({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),[dt,xt]=o.useState(!1),[Ue,Rs]=o.useState(null),[Je,Os]=o.useState(null),[We,Ls]=o.useState(null),[mt,xl]=o.useState(!1),[ut,ml]=o.useState(!1),[ht,ul]=o.useState(!1),[pt,Jt]=o.useState(null),[zn,Wt]=o.useState(!1),[Cn,Tn]=o.useState([]),[An,hl]=o.useState(!1),pl=l=>{const c=/(\+?\d{1,3}[\s-]?)?\(?\d{3}\)?[\s-]?\d{3}[\s-]?\d{2}[\s-]?\d{2}|05\d{2}\s?\d{3}\s?\d{2}\s?\d{2}|\d{4}\s?\d{3}\s?\d{2}\s?\d{2}/g,d=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,v=/(https?:\/\/[^\s]+)|(www\.[^\s]+)|([a-zA-Z0-9-]+\.(com|net|org|tr|io|co|info|biz|edu|gov)[^\s]*)/g,V=/@[a-zA-Z0-9_]+/g;let se=l;return c.test(se)&&(se=se.replace(c,"[telefon kaldrld]")),d.test(se)&&(se=se.replace(d,"[e-mail kaldrld]")),v.test(se)&&(se=se.replace(v,"[link kaldrld]")),V.test(se)&&(se=se.replace(V,"[kullanc ad kaldrld]")),se},[Dn,zs]=o.useState(!1),[hs,Cs]=o.useState(""),[bl,Xt]=o.useState(!1),[fl,ps]=o.useState(null),we=o.useRef(null),[In,$s]=o.useState(!1),[ee,Fs]=o.useState(null),[En,Pn]=o.useState(!1),[Bn,Mn]=o.useState(""),[Rn,On]=o.useState(""),[Ln,$n]=o.useState(""),[Ox,Lx]=o.useState(null),[$x,Fx]=o.useState(!1),[Hx,Kx]=o.useState(""),[Hs,Zt]=o.useState([]),[bt,Fn]=o.useState(null),[Qt,Hn]=o.useState(!1),[Kn,Vn]=o.useState(null),[Gn,Yn]=o.useState(null),[qn,gl]=o.useState(!1),[jl,Un]=o.useState([]),[Jn,Vx]=o.useState([]),[ea,sa]=o.useState(null),Wn=async l=>{if(!hs){ps("Ltfen nce belge trn sein.");return}if(!l.target.files||!l.target.files.length)return;const c=l.target.files[0];if(c.size>5*1024*1024){ps("Dosya boyutu 5MB'den byk olamaz."),we.current&&(we.current.value="");return}Xt(!0),ps(null);try{let d=c;if(Qe(c)){const Ce=await es(c);d=Ce.compressedFile,console.log(` Belge sktrld: ${Ce.compressionRatio.toFixed(1)}% kltld`)}const v=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),V=v.id||"",Ze={"K1/K2 Belgesi":"license","K1 Belgesi":"license","K2 Belgesi":"license","Kasko Poliesi":"insurance","Trafik Sigortas":"insurance","Ara Ruhsat":"registration","Vergi Levhas":"tax","Kimlik Fotokopisi":"identity","Ehliyet Fotokopisi":"identity"}[hs]||"registration",Be=await P.storage.uploadPartnerDocument(d,V,null,Ze);if(!Be.success||!Be.url)throw new Error("Belge yklenemedi");await P.documents.create({partnerId:V,partnerName:v.name||h,type:Ze,fileName:d.name,fileData:Be.url,fileSize:d.size,status:"pending"}),console.log(" [PartnerDashboard] Document uploaded:",Be.url),a(`${hs} yklendi! Admin onayna gnderildi.`,"success"),Xt(!1),zs(!1),Cs(""),we.current&&(we.current.value="")}catch(d){console.error(" Belge ykleme hatas:",d),ps("Belge yklenirken hata olutu. Ltfen tekrar deneyin."),Xt(!1),we.current&&(we.current.value="")}},[Gx,Yx]=o.useState(""),[qx,Ux]=o.useState(""),[Jx,Wx]=o.useState(""),[Xx,Zx]=o.useState(""),[Qx,em]=o.useState(null),[sm,tm]=o.useState(!1),[am,lm]=o.useState([]),[rm,nm]=o.useState(""),[im,om]=o.useState(""),[cm,Xn]=o.useState(!1),[dm,xm]=o.useState([]),[mm,um]=o.useState(""),[hm,Zn]=o.useState(!1),[pm,bm]=o.useState(""),[fm,gm]=o.useState(""),[jm,ym]=o.useState(""),[Nm,Qn]=o.useState(!1),[vm,wm]=o.useState(null),[km,_m]=o.useState("intercity"),[Sm,zm]=o.useState(!1),[Cm,Tm]=o.useState(null),[Am,Dm]=o.useState(""),[Im,Em]=o.useState(""),[Pm,Bm]=o.useState(""),[Mm,Rm]=o.useState(""),[Om,Lm]=o.useState(""),[ei,$m]=o.useState([]),[ta,Ks]=o.useState(null),[yl,Nl]=o.useState("all"),[aa,vl]=o.useState({new_job_push_enabled:!0,new_job_sms_enabled:!0,new_job_email_enabled:!1,offer_status_push_enabled:!0,offer_status_sms_enabled:!1,offer_status_email_enabled:!1,payment_push_enabled:!0,payment_email_enabled:!0,voice_call_push_enabled:!0,voice_call_sms_enabled:!1,all_notifications_enabled:!0,quiet_hours_enabled:!1,quiet_hours_start:"22:00:00",quiet_hours_end:"08:00:00"}),[si,wl]=o.useState(!1),[kl,ti]=o.useState(!1);o.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("tab");c&&T(c)},[]);const Xe=l=>{T(l);const c=new URLSearchParams(window.location.search);c.set("tab",l),window.history.pushState({},"",`${window.location.pathname}?${c.toString()}`)};o.useEffect(()=>{if(!r){console.warn(" Partner ID not found in localStorage");return}const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Kt({company_name:l.company_name||l.name||"",tax_number:l.tax_number||"",email:l.email||"",phone:l.phone||"",address:l.address||""}),el(l.logo_url||""),sl(l.profile_photo_url||""),Gt({trade_registry_number:l.trade_registry_number||"",mersis_no:l.mersis_no||"",tax_office:l.tax_office||"",sector:l.sector||"",foundation_year:l.foundation_year||new Date().getFullYear()}),qt({authorized_person:l.authorized_person||"",mobile_phone:l.mobile_phone||l.phone||"",landline_phone:l.landline_phone||"",emergency_phone:l.emergency_phone||"",business_address:l.business_address||l.address||""}),cl(l.service_types||[])},[r]),o.useEffect(()=>{if(console.log(" [Credits] CURRENT_PARTNER_ID:",r),console.log(" [Credits] partnerData:",i),!r){console.warn(" [Credits] Partner ID bulunamad!");return}const l=async()=>{try{console.log(" [Credits] Loading credits for partner:",r);const d=await P.partnerCredits.getByPartnerId(r);console.log(" [Credits] Response from API:",d),d?($(d.balance||0),console.log(" [Credits] Partner credits loaded:",d.balance)):console.warn(" [Credits] No credit data found for partner")}catch(d){console.error(" [Credits] Error loading credits:",d)}};l();const c=setInterval(l,1e4);return()=>clearInterval(c)},[r]),o.useEffect(()=>{if(!r)return;const c=setTimeout(async()=>{try{console.log(" [FCM] Requesting notification permission for partner:",r);const d=await ox();d?(console.log(" [FCM] Token received, saving to database..."),await cx(r,d),console.log(" [FCM] Token saved successfully")):console.warn(" [FCM] Permission denied or token not received")}catch(d){console.error(" [FCM] Error registering push notification:",d)}},2e3);return()=>clearTimeout(c)},[r]),o.useEffect(()=>{if(!r||kl)return;(async()=>{try{console.log(" [Notifications] Loading preferences for partner:",r);const{data:c,error:d}=await ke.from("partner_notification_preferences").select("*").eq("partner_id",r).single();if(d&&d.code!=="PGRST116"){console.error(" [Notifications] Error loading preferences:",d);return}if(c)console.log(" [Notifications] Preferences loaded:",c),vl({new_job_push_enabled:c.new_job_push_enabled??!0,new_job_sms_enabled:c.new_job_sms_enabled??!0,new_job_email_enabled:c.new_job_email_enabled??!1,offer_status_push_enabled:c.offer_status_push_enabled??!0,offer_status_sms_enabled:c.offer_status_sms_enabled??!1,offer_status_email_enabled:c.offer_status_email_enabled??!1,payment_push_enabled:c.payment_push_enabled??!0,payment_email_enabled:c.payment_email_enabled??!0,voice_call_push_enabled:c.voice_call_push_enabled??!0,voice_call_sms_enabled:c.voice_call_sms_enabled??!1,all_notifications_enabled:c.all_notifications_enabled??!0,quiet_hours_enabled:c.quiet_hours_enabled??!1,quiet_hours_start:c.quiet_hours_start??"22:00:00",quiet_hours_end:c.quiet_hours_end??"08:00:00"});else{console.log(" [Notifications] No preferences found, creating defaults...");const{error:v}=await ke.from("partner_notification_preferences").insert([{partner_id:r}]);v?console.error(" [Notifications] Error creating default preferences:",v):console.log(" [Notifications] Default preferences created")}ti(!0)}catch(c){console.error(" [Notifications] Unexpected error:",c)}})()},[r,kl]),o.useEffect(()=>{if(!r)return;(async()=>{try{const c=await P.partnerVehicles.getByPartnerId(r);Zt(c)}catch(c){console.error("Error loading vehicles:",c)}})()},[r]),o.useEffect(()=>{if(!r)return;(async()=>{hl(!0);try{const c=await P.partnerDocuments.getByPartnerId(r);Tn(c)}catch(c){console.error("Error loading documents:",c)}finally{hl(!1)}})()},[r]);const ai=async()=>{if(!qe.currentPassword||!qe.newPassword||!qe.confirmPassword){alert(" Ltfen tm alanlar doldurun.");return}if(qe.newPassword.length<8){alert(" Yeni ifre en az 8 karakter olmaldr.");return}if(qe.newPassword!==qe.confirmPassword){alert(" Yeni ifreler elemiyor!");return}ll(!0);try{const{error:l}=await ke.auth.updateUser({password:qe.newPassword});if(l)throw l;al({currentPassword:"",newPassword:"",confirmPassword:""}),a("ifreniz gncellendi!","success")}catch(l){console.error("Password change error:",l),alert(` ifre deitirme hatas: ${l.message||"Bilinmeyen hata"}`)}finally{ll(!1)}},li=async()=>{if(!r){alert(" Partner ID bulunamad.");return}wl(!0);try{console.log(" [Notifications] Saving preferences for partner:",r),console.log(" [Notifications] Data to save:",aa);const{data:l,error:c}=await ke.from("partner_notification_preferences").upsert({partner_id:r,...aa},{onConflict:"partner_id"}).select();if(c)throw console.error(" [Notifications] Error saving preferences:",c),c;console.log(" [Notifications] Preferences saved successfully:",l),a("Bildirim tercihleri kaydedildi!","success")}catch(l){console.error(" [Notifications] Save error:",l),alert(` Kaydetme hatas: ${l.message||"Bilinmeyen hata"}`)}finally{wl(!1)}},ri=async()=>{if(!nl){it(!0);return}rl(!0);try{await P.partners.update(r,Vt);const l={...i,...Vt};localStorage.setItem("yolmov_partner",JSON.stringify(l)),it(!1),a("irket bilgileriniz gncellendi!","success")}catch(l){console.error("Company info save error:",l),alert(" Bir hata olutu. Ltfen tekrar deneyin.")}finally{rl(!1)}},ni=()=>{it(!1);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Gt({trade_registry_number:l.trade_registry_number||"",mersis_no:l.mersis_no||"",tax_office:l.tax_office||"",sector:l.sector||"",foundation_year:l.foundation_year||new Date().getFullYear()})},ii=async()=>{if(!Za){nt(!0);return}tl(!0);try{let l=Qa,c=Ft;if(Lt){const v=await P.storage.uploadPartnerDocument(Lt,r,null,"logo");v.success&&v.url&&(l=v.url)}if($t){const v=await P.storage.uploadPartnerDocument($t,r,null,"profile_photo");v.success&&v.url&&(c=v.url)}await P.partners.update(r,{...Ht,logo_url:l,profile_photo_url:c});const d={...i,...Ht,logo_url:l,profile_photo_url:c};localStorage.setItem("yolmov_partner",JSON.stringify(d)),el(l),sl(c),lt(null),rt(null),nt(!1),a("Profil bilgileriniz gncellendi!","success")}catch(l){console.error("Profile save error:",l),alert(" Bir hata olutu. Ltfen tekrar deneyin.")}finally{tl(!1)}},oi=()=>{nt(!1),lt(null),rt(null);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Kt({company_name:l.company_name||l.name||"",tax_number:l.tax_number||"",email:l.email||"",phone:l.phone||"",address:l.address||""})},ci=async()=>{if(!ol){ot(!0);return}il(!0);try{await P.partners.update(r,Yt);const l={...i,...Yt};localStorage.setItem("yolmov_partner",JSON.stringify(l)),ot(!1),a("letiim bilgileriniz gncellendi!","success")}catch(l){console.error("Contact info save error:",l),alert(" Bir hata olutu. Ltfen tekrar deneyin.")}finally{il(!1)}},di=()=>{ot(!1);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");qt({authorized_person:l.authorized_person||"",mobile_phone:l.mobile_phone||"",landline_phone:l.landline_phone||"",emergency_phone:l.emergency_phone||"",business_address:l.business_address||""})},xi=async()=>{dl(!0);try{await P.partners.update(r,{service_types:Ut});const l={...i,service_types:Ut};localStorage.setItem("yolmov_partner",JSON.stringify(l)),a("Hizmet ayarlarnz gncellendi!","success")}catch(l){console.error("Services save error:",l),alert(" Bir hata olutu. Ltfen tekrar deneyin.")}finally{dl(!1)}},mi=l=>{cl(c=>c.includes(l)?c.filter(d=>d!==l):[...c,l])},ui=async()=>{if(!C.plate||!C.brand||!C.model||!C.type){alert(" Ltfen tm zorunlu alanlar doldurun (Plaka, Marka, Model, Tip).");return}if(!Ue||!Je||!We){alert(" Ltfen ara grsellerini ykleyin (n, Yan, Arka).");return}xt(!0);try{const l=await P.storage.uploadPartnerDocument(Ue,r,null,"vehicle_photos/front"),c=await P.storage.uploadPartnerDocument(Je,r,null,"vehicle_photos/side"),d=await P.storage.uploadPartnerDocument(We,r,null,"vehicle_photos/back");if(!l.success||!c.success||!d.success)throw new Error("Grsel ykleme baarsz oldu");const v={partner_id:r,partner_name:h,plate_number:C.plate,type:C.type,brand:C.brand,model:C.model,year:C.year,driver:C.driver||h,status:"active",registration_date:new Date().toISOString().split("T")[0],front_photo_url:l.url,side_photo_url:c.url,back_photo_url:d.url,showcase_capacity:C.showcase_capacity||null,showcase_insurance_type:C.showcase_insurance_type||null,showcase_equipment:C.showcase_equipment||[],showcase_description:C.showcase_description||null,is_showcase_vehicle:C.is_showcase_vehicle||!1};console.log(" Vehicle Data to be saved:",v);const V=await P.partnerVehicles.create(v);console.log(" Vehicle created successfully:",V),Zt([...Hs,V]),Q({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),Rs(null),Os(null),Ls(null),ct(!1),a("Ara baaryla eklendi!","success")}catch(l){console.error("Vehicle add error:",l),alert(" Ara eklenirken bir hata olutu. Ltfen tekrar deneyin.")}finally{xt(!1)}},_l=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG)");return}try{xl(!0);const v=await es(c);Rs(v.compressedFile),a("n grsel ileniyor...","processing",1500)}catch(v){console.error("Front photo compression error:",v),alert(" Grsel ilenirken hata olutu.")}finally{xl(!1)}}},Sl=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG)");return}try{ml(!0);const v=await es(c);Os(v.compressedFile),a("Yan grsel ileniyor...","processing",1500)}catch(v){console.error("Side photo compression error:",v),alert(" Grsel ilenirken hata olutu.")}finally{ml(!1)}}},zl=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG)");return}try{ul(!0);const v=await es(c);Ls(v.compressedFile),a("Arka grsel ileniyor...","processing",1500)}catch(v){console.error("Back photo compression error:",v),alert(" Grsel ilenirken hata olutu.")}finally{ul(!1)}}},hi=async()=>{if(!pt||!C.plate||!C.brand||!C.model||!C.type){alert(" Ltfen tm zorunlu alanlar doldurun (Plaka, Marka, Model, Tip).");return}xt(!0);try{const l={plate_number:C.plate,type:C.type,brand:C.brand,model:C.model,year:C.year,driver:C.driver||h,showcase_capacity:C.showcase_capacity||null,showcase_insurance_type:C.showcase_insurance_type||null,showcase_equipment:C.showcase_equipment||[],showcase_description:C.showcase_description||null,is_showcase_vehicle:C.is_showcase_vehicle||!1};if(Ue){const d=await P.storage.uploadPartnerDocument(Ue,r,null,"vehicle_photos/front");d.success&&(l.front_photo_url=d.url)}if(Je){const d=await P.storage.uploadPartnerDocument(Je,r,null,"vehicle_photos/side");d.success&&(l.side_photo_url=d.url)}if(We){const d=await P.storage.uploadPartnerDocument(We,r,null,"vehicle_photos/back");d.success&&(l.back_photo_url=d.url)}console.log(" Updating vehicle:",pt,l);const c=await P.partnerVehicles.update(pt,l);console.log(" Vehicle updated successfully:",c),Zt(Hs.map(d=>d.id===pt?c:d)),Q({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),Rs(null),Os(null),Ls(null),Jt(null),Wt(!1),a("Ara gncellendi!","success")}catch(l){console.error("Vehicle update error:",l),alert(" Ara gncellenirken bir hata olutu. Ltfen tekrar deneyin.")}finally{xt(!1)}},Cl=o.useRef(null),Tl=o.useRef(null),Al=o.useRef(null);o.useEffect(()=>{(async()=>{try{const c=await Ji.getUserRole();(c==null?void 0:c.type)==="partner"?L(c.status||"pending"):L(void 0)}catch{L(void 0)}finally{_(!0)}})()},[]),o.useEffect(()=>{const l=c=>{Cl.current&&!Cl.current.contains(c.target)&&Xn(!1),Tl.current&&!Tl.current.contains(c.target)&&Zn(!1),Al.current&&!Al.current.contains(c.target)&&Qn(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),o.useEffect(()=>{(async()=>{if(r)try{const c=await P.serviceAreas.getByPartnerId(r);if(c&&c.length>0){const d=c.filter(v=>v.isActive!==!1).map(v=>v.city);Zs([...new Set(d)]),console.log(" [PartnerDashboard] Loaded service areas:",d)}else{const d=i.city||i.sehir;d?(Zs([d]),console.log(" [PartnerDashboard] Using partner city as service area:",d)):console.warn(" [PartnerDashboard] No service areas found for partner")}Qs(!0)}catch(c){console.error("Error loading service areas:",c),Qs(!0)}})()},[r]),o.useEffect(()=>{if(!Ss)return;const l=async()=>{try{let d;Pe.length>0?(d=await P.requests.getOpenByServiceAreas(Pe),console.log(` [PartnerDashboard] Loaded ${d.length} requests for service areas:`,Pe)):(d=await P.requests.getOpen(),console.warn(" [PartnerDashboard] No service areas defined, showing all requests:",d.length)),ks(d)}catch(d){console.error("Error loading requests:",d)}};l();const c=setInterval(l,3e4);return()=>{clearInterval(c)}},[Ss,Pe]);const Vs=async()=>{if(r)try{const l=await P.offers.getByPartnerId(r);Ve(l),console.log(" [PartnerDashboard] Loaded partner offers:",l.length)}catch(l){console.error("Error loading offers:",l)}},pi=async()=>{if(r)try{const l=await P.partnerReviews.getByPartnerId(r);if(l&&Array.isArray(l)){const c=l.map(d=>({id:d.id,jobId:d.jobId,customerName:d.customerName||"Mteri",customerPhone:d.customerPhone||"",rating:d.rating,comment:d.comment||"",tags:d.tags||[],service:d.service||"ekici Hizmeti",date:d.createdAt?new Date(d.createdAt).toLocaleDateString("tr-TR"):""}));Un(c),console.log(" [PartnerDashboard] Loaded reviews:",c.length)}}catch(l){console.error("Error loading reviews:",l)}},la=async()=>{if(r)try{const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),c=await P.requests.getByPartnerId(l.id);if(c&&Array.isArray(c)){const d=c.filter(v=>v.status==="matched"&&(v.jobStage===0||v.jobStage===null));Xs(d),console.log(" [PartnerDashboard] Loaded accepted jobs:",d.length)}}catch(l){console.error("Error loading accepted jobs:",l)}};o.useEffect(()=>{Vs(),la(),pi();const l=setInterval(()=>{Vs(),la()},15e3);return()=>clearInterval(l)},[r]),o.useEffect(()=>{if(!r)return;console.log(" [Notifications] Setting up real-time offer notifications for partner:",r);const l=ke.channel("partner-offers-notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"offers",filter:`partner_id=eq.${r}`},c=>{console.log(" [Notifications] Offer status changed:",c);const d=c.new;c.old.status!==d.status&&(d.status==="accepted"?(bi(d),gi()):d.status==="rejected"&&fi(d),Vs())}).subscribe();return()=>{console.log(" [Notifications] Unsubscribing from real-time notifications"),ke.removeChannel(l)}},[r]);const Dl=(l,c,d)=>{Bs({show:!0,type:l,title:c,message:d}),setTimeout(()=>{Bs(v=>({...v,show:!1}))},5e3)},bi=l=>{if(Dl("success"," Teklif Kabul Edildi!",`${l.price} tutarndaki teklifiniz kabul edildi. Hemen yola kabilirsiniz!`),"Notification"in window&&Notification.permission==="granted"){const c=new Notification(" Teklif Kabul Edildi!",{body:`${l.price} tutarndaki teklifiniz kabul edildi. Hemen yola kabilirsiniz!`,icon:"/logo.png",badge:"/logo.png",tag:`offer-${l.id}`,requireInteraction:!0});c.onclick=()=>{window.focus(),T("offers"),c.close()}}},fi=l=>{Dl("error"," Teklif Reddedildi",`${l.price} tutarndaki teklifiniz reddedildi. Baka ilere teklif verebilirsiniz.`),"Notification"in window&&Notification.permission==="granted"&&new Notification(" Teklif Reddedildi",{body:`${l.price} tutarndaki teklifiniz reddedildi.`,icon:"/logo.png",tag:`offer-${l.id}`})},gi=()=>{try{const l=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZRA0OVqzn7a5aFgpDm9/0wmwiBjSD0PPYiTcIGWi77eefTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEAKFF606OynVRQKRp/g8r5sIQUxh9Hz04IzBh5uw+/jmUQNDlas5+2uWhYKQ5vf9MJsIgY0g9Dz2Ik3CBlou+3nn00QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBACA==");l.volume=.5,l.play().catch(c=>console.log("Sound play error:",c))}catch{console.log("Audio not supported")}};o.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(l=>{console.log(" Notification permission:",l)})},[]);const ra=async l=>{if(confirm("Bu teklifi iptal etmek istediinizden emin misiniz?"))try{await P.offers.update(l,{status:"withdrawn"}),a("Teklif iptal edildi.","success"),Vs()}catch(c){console.error("Error canceling offer:",c),alert(" Teklif iptal edilirken hata olutu.")}};if(o.useEffect(()=>{if(!p||!p._originalRequest)return;const c=setInterval(async()=>{const d=p._originalRequest;try{const v=await P.requests.getById(d.id);(!v||v.status==="cancelled")&&(v==null?void 0:v.status)==="cancelled"&&(alert(" Mteri bu ii iptal etti!"),N(null),T("requests"),us(0))}catch(v){console.error("Error checking job status:",v)}},5e3);return()=>clearInterval(c)},[p]),o.useEffect(()=>{const l=async()=>{try{const d=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),v=await P.requests.getByPartnerId(d.id);if(v&&Array.isArray(v)){const V=v.filter(se=>se.status==="completed");un(V),console.log(" [PartnerDashboard] Loaded partner history:",V.length)}}catch(d){console.error("Error loading history:",d)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[]),o.useEffect(()=>{(async()=>{if(bt&&Qt){gl(!0);try{const c=await P.partnerVehicles.getVehicleStats(bt.plate_number,r);Yn(c),console.log(" [Vehicle Stats]",c)}catch(c){console.error("Error loading vehicle stats:",c)}finally{gl(!1)}}})()},[bt,Qt]),!w)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600 text-sm",children:"Eriim kontrol yaplyor..."})});if(!r)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-8 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pe,{className:"text-red-600",size:32})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-2",children:"Oturum Bulunamad"}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Partner bilgileriniz yklenemedi. Ltfen tekrar giri yapn."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("yolmov_partner"),s("/partner/login")},className:"bg-red-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-red-700 transition-all",children:"Giri Sayfasna Dn"})]})});if(E&&E!=="active")return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pr,{className:"text-yellow-600"})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-2",children:"Hesabnz nceleniyor"}),e.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Bavurunuz alnmtr. Operasyon ekibimiz en ksa srede deerlendirecektir. Durumunuz: ",e.jsx("span",{className:"font-bold",children:E}),"."]}),e.jsx("button",{className:"px-6 py-3 bg-slate-900 text-white rounded-xl font-bold",onClick:()=>s("/"),children:"Ana Sayfaya Dn"})]})});S.filter(l=>Rt==="urgent"?l.urgency==="high":!0).sort((l,c)=>Rt==="highest_price"?c.price-l.price:Rt==="nearest"?parseFloat(l.distance)-parseFloat(c.distance):0);const ji=at.filter(l=>(l.id.toLowerCase().includes(Ot.toLowerCase())||l.customerName.toLowerCase().includes(Ot.toLowerCase()))&&l.status==="completed"),yi=()=>{if(!ms.show)return null;const l={success:"bg-gradient-to-r from-green-500 to-emerald-500",error:"bg-gradient-to-r from-red-500 to-rose-500",info:"bg-gradient-to-r from-blue-500 to-cyan-500"},c={success:"",error:"",info:""};return e.jsx(fe,{children:e.jsx(q.div,{initial:{opacity:0,y:-50,x:50},animate:{opacity:1,y:0,x:0},exit:{opacity:0,y:-50,x:50},className:"fixed top-4 right-4 z-[9999] max-w-md",children:e.jsx("div",{className:`${l[ms.type]} rounded-xl shadow-2xl p-4 text-white`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-xl font-bold",children:c[ms.type]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-base mb-1",children:ms.title}),e.jsx("p",{className:"text-sm text-white/90",children:ms.message})]}),e.jsx("button",{onClick:()=>Bs(d=>({...d,show:!1})),className:"flex-shrink-0 text-white/70 hover:text-white transition-colors",children:e.jsx(ne,{size:20})})]})})})})},Il=l=>{if(K<=0){alert("Yetersiz bakiye! Teklif vermek iin kredi ykleyiniz.");return}Ie(l),He(""),Ee(""),ds("")},Ni=()=>{if(!A||!F)return;const l=A.id;G(null),ae(l),Fe(null),setTimeout(()=>{Math.random()>.3?($(d=>d-1),k(d=>[...d,l]),ae(null)):(Fe(l),ae(null),setTimeout(()=>{O(d=>d.filter(v=>v.id!==l)),Fe(null)},3e3))},2500)},vi=async()=>{if(!(!ue||!ze))try{console.log(" [PartnerDashboard] Creating offer for request:",ue.id);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),c=await P.offers.create({requestId:ue.id,partnerId:l.id,partnerName:l.name||h,price:parseFloat(ze),etaMinutes:Ke?parseInt(Ke):30,message:_s||void 0,status:"sent"});console.log(" [PartnerDashboard] Offer created:",c);try{await P.partnerCredits.useCredits(l.id,l.name||h,1,`Teklif gnderildi: ${ue.id}`,ue.id),console.log(" Credit deducted successfully")}catch(d){console.error(" Credit deduction failed:",d)}At(c),y(!0),Ie(null),He(""),Ee(""),ds(""),Vs()}catch(l){console.error(" [PartnerDashboard] Offer creation failed:",l),alert("Teklif gnderilemedi. Ltfen tekrar deneyin.")}},na=async l=>{try{if(l._originalRequest){const c=l._originalRequest,d=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");await P.requests.update(c.id,{status:"in_progress",jobStage:1,assignedPartnerId:d.id,assignedPartnerName:d.name||h}),console.log(" [PartnerDashboard] Job started:",c.id),Xs(v=>v.filter(V=>V.id!==c.id)),la()}N(l),O(c=>c.filter(d=>d.id!==l.id)),us(1),le(!1),Ye(!1),T("active"),R({lat:41.0082,lng:28.9784,name:"Taksim Meydan, stanbul"}),g(!1)}catch(c){console.error(" Job start failed:",c),alert(" balatlamad. Ltfen tekrar deneyin.")}},wi=async()=>{if(ie===0&&!Z){Ti();return}if(ie===2&&!b){alert("Ltfen hizmete balamadan nce kant fotoraf ykleyin.");return}if(ie===3&&!ve){alert("Ltfen grevi tamamlamadan nce biti fotoraf ykleyin.");return}if(ie===3){qa(!0);return}if(ie<4){const l=ie+1;try{if(p&&p._originalRequest){const c=p._originalRequest;await P.requests.update(c.id,{jobStage:l}),console.log(" [PartnerDashboard] Job stage updated:",c.id,"stage:",l)}us(l)}catch(c){console.error(" Stage update failed:",c),alert("Aama gncellenemedi. Ltfen tekrar deneyin.")}}},ki=async()=>{var l,c;if(p&&p._originalRequest){const d=p._originalRequest;try{await P.requests.update(d.id,{status:"completed",jobStage:4});const v=await P.offers.getByRequestId(d.id);let V=null;v&&Array.isArray(v)&&(V=v.find(Hi=>Hi.status==="accepted"),V&&console.log(" Offer completed:",V.id));const se=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),Ze=new Date().toISOString(),Be=d.stageUpdatedAt||d.createdAt,Ce=Math.round((new Date(Ze).getTime()-new Date(Be).getTime())/6e4);console.log(" [PartnerDashboard] Creating completed job:",{requestId:d.id,partnerId:se.id,customerId:d.customerId});const Gs=await P.completedJobs.create({requestId:d.id,partnerId:se.id,partnerName:se.name||se.companyName,customerId:d.customerId,customerName:d.customerName||"Mteri",customerPhone:d.customerPhone||"",serviceType:d.serviceType,startLocation:d.fromLocation,endLocation:d.toLocation||d.fromLocation,distance:0,startTime:Be,completionTime:Ze,duration:Ce,totalAmount:(V==null?void 0:V.price)||d.amount||0,commission:Math.round(((V==null?void 0:V.price)||d.amount||0)*.15),partnerEarning:Math.round(((V==null?void 0:V.price)||d.amount||0)*.85),paymentMethod:"nakit",vehicleType:((l=d.vehicleInfo)==null?void 0:l.split(" - ")[0])||"Bilinmiyor",vehiclePlate:((c=d.vehicleInfo)==null?void 0:c.split(" - ")[1])||"",status:"completed"});console.log(" [PartnerDashboard] Completed job created:",Gs),console.log(" [PartnerDashboard] B2C request completed:",d.id)}catch(v){console.error(" Job completion failed:",v),alert(" tamamlanrken hata olutu. Ltfen tekrar deneyin.");return}}qa(!1),N(null),T("requests"),us(0),Ua(0),tt([])},_i=l=>{sa(l),It(!0),Pt(""),Mt("")},Si=()=>{if(!Et||!Bt.trim()){alert("Ltfen itiraz nedenini sein ve detaylar yazn.");return}if(!ea){alert("Deerlendirme seilmedi.");return}const l="PTR-001",c="Demo Partner";try{console.log(" tiraz Gnderildi:",{reviewId:ea.id,partnerId:l,partnerName:c,reason:`${Et}: ${Bt}`}),a("tiraznz gnderildi. En ksa srede incelenecektir.","success"),It(!1),sa(null),Pt(""),Mt("")}catch(d){console.error(" tiraz gnderme hatas:",d),alert("tiraz gnderilirken bir hata olutu. Ltfen tekrar deneyin.")}},El=async(l,c)=>{var v;const d=(v=l.target.files)==null?void 0:v[0];if(d){if(!Qe(d)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG, vb.)");return}Ya(!0);try{const V=await es(d);if(p&&p._originalRequest){const se=p._originalRequest,Ze=localStorage.getItem("yolmov_partner"),Be=Ze?JSON.parse(Ze).id:"",Ce=await P.storage.uploadPartnerDocument(V.compressedFile,Be,se.id,c==="start"?"job_start_proof":"job_end_proof");if(!Ce.success||!Ce.url)throw new Error("Fotoraf yklenemedi");const Gs={};c==="start"?Gs.start_proof_photo=Ce.url:Gs.end_proof_photo=Ce.url,await P.requests.update(se.id,Gs),console.log(` [PartnerDashboard] ${c} proof uploaded:`,Ce.url)}c==="start"?(sn(V.compressedFile),le(!0)):(tn(V.compressedFile),Ye(!0)),a("Profil fotoraf ileniyor...","processing",2e3)}catch(V){alert(" Fotoraf yklenirken hata olutu. Ltfen tekrar deneyin."),console.error(V)}finally{Ya(!1)}}},zi=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG, vb.)");return}try{Wa(!0);const v=await es(c);lt(v.compressedFile),alert(' Logo hazr. "Deiiklikleri Kaydet" butonuna basn.')}catch(v){console.error("Logo compression error:",v),alert(" Logo ilenirken bir hata olutu. Ltfen tekrar deneyin.")}finally{Wa(!1)}}},Ci=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("Ltfen sadece grsel dosyas ykleyin (JPG, PNG, vb.)");return}try{Xa(!0);const v=await es(c);rt(v.compressedFile),alert(' Profil fotoraf hazr. "Deiiklikleri Kaydet" butonuna basn.')}catch(v){console.error("Profile photo compression error:",v),alert(" Profil fotoraf ilenirken bir hata olutu. Ltfen tekrar deneyin.")}finally{Xa(!1)}}},Ti=()=>{const l={lat:41.0082+(Math.random()-.5)*.05,lng:28.9784+(Math.random()-.5)*.05,name:"Mevcut Konumunuz"};X(l),g(!0),J(!0)},Ai=()=>{const c=`https://www.google.com/maps/dir/?api=1&destination=${`${j.lat},${j.lng}`}`;window.open(c,"_blank")},Di=()=>{switch(ie){case 0:return Z?"Konuma Vardm":"Navigasyonu Balat";case 1:return"Konuma Vardm";case 2:return"Hizmeti Balat";case 3:return"Grevi Tamamla";default:return""}},Ii=()=>{const l=et>=4?Cx:Tx;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-2xl font-bold text-blue-600 mx-auto mb-3 shadow-inner",children:p==null?void 0:p.customerName.charAt(0)}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Grevi Tamamladn!"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Mteriyi deerlendirerek sistemi iyiletirmemize yardm et."})]}),e.jsxs("div",{className:"p-6 flex flex-col items-center",children:[e.jsx("div",{className:"flex gap-2 mb-6",children:[1,2,3,4,5].map(c=>e.jsx("button",{onClick:()=>{Ua(c),tt([])},className:"transition-transform hover:scale-110 focus:outline-none",children:e.jsx(re,{size:36,className:`${c<=et?"fill-yellow-400 text-yellow-400":"text-slate-200 fill-slate-50"}`,strokeWidth:1.5})},c))}),et>0&&e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:l.map(c=>e.jsx("button",{onClick:()=>{st.includes(c)?tt(st.filter(d=>d!==c)):tt([...st,c])},className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-all ${st.includes(c)?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-500 border-slate-200 hover:border-blue-300"}`,children:c},c))}),e.jsx("textarea",{placeholder:"Mteri veya sre hakknda eklemek istediklerin...",className:"w-full p-3 bg-slate-50 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-blue-500 outline-none mb-6 resize-none h-24"}),e.jsxs("button",{onClick:ki,disabled:et===0,className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold shadow-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(ge,{size:18})," Deerlendir ve Bitir"]})]})]})})},Ei=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(va,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Navigasyon Balatld"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Mteri konumuna gidiyorsunuz"})]})]}),e.jsx("button",{onClick:()=>J(!1),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Me,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-green-600 uppercase",children:"Balang Noktanz"}),e.jsx("p",{className:"font-bold text-slate-900",children:(U==null?void 0:U.name)||"Konum alnyor..."}),U&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[U.lat.toFixed(6),", ",U.lng.toFixed(6)]})]})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-0.5 h-8 bg-gradient-to-b from-green-300 to-blue-300"})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ne,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-blue-600 uppercase",children:"Hedef Konum"}),e.jsx("p",{className:"font-bold text-slate-900",children:j.name}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[j.lat.toFixed(6),", ",j.lng.toFixed(6)]})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Tahmini Mesafe"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:(p==null?void 0:p.distance)||"2.5 km"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Tahmini Sre"}),e.jsx("p",{className:"text-2xl font-black text-blue-600",children:"8-12 dk"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Ai,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-3 shadow-lg",children:[e.jsx(Me,{size:20})," Google Haritalar'da A"]}),e.jsx("button",{onClick:()=>{J(!1)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Yerleik Haritay Kullan"}),e.jsx("button",{onClick:()=>J(!1),className:"w-full py-3 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Kapat"})]})]})]})}),Pi=()=>{const l=[{value:"trade_registry",label:"Ticaret Sicil Belgesi"},{value:"signature",label:"mza Sirkleri"},{value:"vehicle_registration",label:"Ara Ruhsat"},{value:"insurance",label:"Sorumluluk Sigortas"},{value:"tax_plate",label:"Vergi Levhas"},{value:"other",label:"Dier"}];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Ts,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Belge Ykle"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Evraklarnz ykleyin"})]})]}),e.jsx("button",{onClick:()=>{zs(!1),Cs(""),ps(null),we.current&&(we.current.value="")},className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Belge Tr ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:hs,onChange:c=>{Cs(c.target.value),ps(null)},className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium",children:[e.jsx("option",{value:"",children:"Belge trn sein"}),l.map(c=>e.jsx("option",{value:c.label,children:c.label},c.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Dosya Sein"}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${hs?"border-blue-300 bg-blue-50 hover:bg-blue-100 cursor-pointer":"border-slate-200 bg-slate-50 cursor-not-allowed opacity-60"}`,children:bl?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx(ce,{size:40,className:"text-blue-600 animate-spin"}),e.jsx("p",{className:"text-sm font-bold text-blue-700",children:"Ykleniyor..."}),e.jsx("p",{className:"text-xs text-slate-500",children:"Ltfen bekleyin"})]}):e.jsxs("label",{className:hs?"cursor-pointer":"cursor-not-allowed",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center",children:e.jsx(me,{size:32,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Dosya semek iin tklayn"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PDF, JPG, PNG  Maksimum 5MB"})]})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Wn,disabled:!hs||bl,className:"hidden",ref:we})]})})]}),fl&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(pe,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-red-700 mb-1",children:"Hata"}),e.jsx("p",{className:"text-xs text-red-600",children:fl})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ae,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:"nemli Notlar"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:" Belgeleriniz 24 saat iinde incelenecektir"}),e.jsx("li",{children:" Fotoraflar net ve okunakl olmaldr"}),e.jsx("li",{children:" Geerlilik tarihi gncel olmaldr"})]})]})]})}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:()=>{zs(!1),Cs(""),ps(null),we.current&&(we.current.value="")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"ptal"})})]})]})})},Bi=()=>{if(!ee)return null;const l=()=>{switch(ee.status){case"uploaded":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 border-2 border-green-200 rounded-xl",children:[e.jsx(As,{size:18,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:"Yklendi ve Onayland"})]});case"pending":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 border-2 border-yellow-200 rounded-xl",children:[e.jsx(oe,{size:18,className:"text-yellow-600"}),e.jsx("span",{className:"text-sm font-bold text-yellow-700",children:"nceleme Bekliyor"})]});case"not_uploaded":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 border-2 border-red-200 rounded-xl",children:[e.jsx(pe,{size:18,className:"text-red-600"}),e.jsx("span",{className:"text-sm font-bold text-red-700",children:"Henz Yklenmedi"})]})}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ya,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:ee.title}),e.jsx("p",{className:"text-sm text-white/80",children:"Belge Detaylar"})]})]}),e.jsx("button",{onClick:()=>{$s(!1),Fs(null)},className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:l()}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Belge Tr"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:ee.title})]}),ee.uploadDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Yklenme Tarihi"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:ee.uploadDate})]})]}),ee.expiryDate&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Son Geerlilik Tarihi"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:ee.expiryDate})]}),ee.fileName&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Dosya Ad"}),e.jsxs("p",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(me,{size:16,className:"text-slate-400"}),ee.fileName]})]}),ee.fileSize&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Dosya Boyutu"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:ee.fileSize})]}),ee.count&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Yklenen Belge Says"}),e.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[ee.count," Adet"]})]})]}),ee.status==="uploaded"&&ee.expiryDate&&e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(As,{size:20,className:"text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-green-800 mb-1",children:"Belge Aktif"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Bu belge ",ee.expiryDate," tarihine kadar geerlidir. Sre dolmadan yenilemeyi unutmayn."]})]})]})}),ee.status==="not_uploaded"&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-red-800 mb-1",children:"Belge Eksik"}),e.jsx("p",{className:"text-xs text-red-700",children:"Bu belgenin yklenmesi zorunludur. Ltfen en ksa srede ykleyiniz."})]})]})}),ee.status==="pending"&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(oe,{size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-yellow-800 mb-1",children:"nceleme Aamasnda"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Belgeniz admin ekibi tarafndan inceleniyor. 24 saat iinde sonu bildirilecektir."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[ee.status==="uploaded"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ds,{size:18})," Grntle"]}),e.jsxs("button",{className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18})," ndir"]}),e.jsxs("button",{onClick:()=>{$s(!1),Fs(null),zs(!0),Cs(ee.title)},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18})," Yenile"]})]}),ee.status==="not_uploaded"&&e.jsxs("button",{onClick:()=>{$s(!1),Fs(null),zs(!0),Cs(ee.title)},className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18})," Hemen Ykle"]}),ee.status==="pending"&&e.jsx("button",{onClick:()=>{$s(!1),Fs(null)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Tamam"})]})]})]})})},Mi=()=>{if(!ta)return null;const l=ta,c=M.includes(l.id),d=l._hasAcceptedOffer||c;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-2xl font-bold",children:l.serviceType}),e.jsx("button",{onClick:()=>Ks(null),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]}),e.jsxs("p",{className:"text-sm text-white/80",children:[" Detaylar - #",l.id]})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-xl",children:[e.jsx(Ne,{size:20,className:"text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Alnacak Konum"}),d?e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:l.location}):e.jsxs("p",{className:"font-bold text-slate-600 text-lg",children:[" ",l.location.split(",").slice(-2).join(",").trim()]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[e.jsx(Me,{size:14})," ",l.distance," uzaklkta"]}),!d&&e.jsx("p",{className:"text-xs text-orange-600 mt-2 bg-orange-50 p-2 rounded",children:" Tam adres teklif kabul edildikten sonra grnr olacak"})]})]}),l.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-xl",children:[e.jsx(Me,{size:20,className:"text-green-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Teslim Noktas"}),d?e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:l.dropoffLocation}):e.jsxs("p",{className:"font-bold text-slate-600 text-lg",children:[" ",l.dropoffLocation.split(",").slice(-2).join(",").trim()]}),!d&&e.jsx("p",{className:"text-xs text-orange-600 mt-2 bg-orange-50 p-2 rounded",children:" Tam adres teklif kabul edildikten sonra grnr olacak"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Hizmet Tr"}),e.jsx("p",{className:"font-bold text-slate-800",children:l.serviceType})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Ara Bilgisi"}),e.jsx("p",{className:"font-bold text-slate-800",children:l.vehicleInfo})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Zaman"}),e.jsxs("p",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(oe,{size:16})," ",l.timestamp]})]}),l.estimatedPrice&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsx("p",{className:"text-xs font-bold text-green-700 uppercase mb-2",children:"Tahmini cret"}),e.jsxs("p",{className:"font-black text-green-700 text-2xl",children:["",l.estimatedPrice]})]})]}),l.urgency==="high"&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(pe,{size:24,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-red-800",children:"ACL TALEP"}),e.jsx("p",{className:"text-sm text-red-600",children:"Bu i iin hzl yant bekleniyor"})]})]}),l.notes&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-yellow-800 uppercase mb-2",children:"Notlar"}),e.jsx("p",{className:"text-sm text-slate-700",children:l.notes})]}),l._originalRequest&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 uppercase",children:"Detayl Mteri Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Ara Durumu"}),e.jsx("p",{className:`font-bold ${l._originalRequest.vehicleCondition==="broken"?"text-red-600":"text-green-600"}`,children:l._originalRequest.vehicleCondition==="broken"?" Arzal/Kazal":" alr Durumda"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Zamanlama"}),e.jsxs("p",{className:"font-bold text-slate-800",children:[l._originalRequest.timing==="now"&&" Hemen",l._originalRequest.timing==="week"&&" Bu Hafta",l._originalRequest.timing==="later"&&" Daha Sonra"]})]})]}),l._originalRequest.hasLoad&&e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-amber-800 uppercase mb-2",children:" Yk Bilgisi"}),e.jsx("p",{className:"font-bold text-amber-700",children:"Arata yk bulunuyor"}),l._originalRequest.loadDescription&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:l._originalRequest.loadDescription})]}),l._originalRequest.damagePhotoUrls&&l._originalRequest.damagePhotoUrls.length>0&&e.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[e.jsxs("p",{className:"text-xs font-bold text-slate-600 uppercase mb-3",children:[" Hasar Fotoraflar (",l._originalRequest.damagePhotoUrls.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:l._originalRequest.damagePhotoUrls.slice(0,6).map((v,V)=>e.jsx("img",{src:v,alt:`Hasar ${V+1}`,className:"w-full h-20 object-cover rounded-lg border border-slate-200 cursor-pointer hover:opacity-80",onClick:()=>window.open(v,"_blank")},V))})]}),l._originalRequest.customerPhone&&d&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-green-700 uppercase mb-1",children:"Mteri Telefonu"}),e.jsx("p",{className:"font-bold text-green-800",children:l._originalRequest.customerPhone})]}),e.jsxs("a",{href:`tel:${l._originalRequest.customerPhone}`,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-bold text-sm hover:bg-green-700 flex items-center gap-2",children:[e.jsx(je,{size:16})," Ara"]})]}),l._originalRequest.customerPhone&&!d&&e.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{size:20,className:"text-orange-600"}),e.jsx("p",{className:"text-sm font-bold text-orange-800",children:" Mteri letiim Bilgileri Gizli"})]}),e.jsx("p",{className:"text-xs text-orange-600",children:"Telefon numaras teklifiniz kabul edildikten sonra grnr olacaktr."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 flex-shrink-0",children:[!d&&e.jsxs("button",{onClick:()=>{var v;G(l),de(((v=l.estimatedPrice)==null?void 0:v.toString())||""),Ks(null)},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," Teklif Gnder"]}),e.jsx("button",{onClick:()=>Ks(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Kapat"})]})]})]})})},Ri=()=>A?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Teklif Ver"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",A.id," - ",A.serviceType]})]}),e.jsx("button",{onClick:()=>G(null),className:"p-2 bg-slate-50 rounded-full text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-600 shrink-0 shadow-sm",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase",children:"Mesafe"}),e.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[A.distance," uzaklkta"]})]})]}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Bu i iin mteriye sunacanz KDV dahil toplam tutar giriniz."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Teklif Tutar ()"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"number",autoFocus:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-xl font-bold text-slate-900 focus:border-blue-500 focus:ring-0 outline-none transition-colors",value:F,onChange:l=>de(l.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Not (Opsiyonel)"}),e.jsx("textarea",{placeholder:"rn: 15 dk iinde ara banda olurum.",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:border-blue-500 focus:ring-0 outline-none resize-none h-24",value:_e,onChange:l=>Se(l.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:()=>G(null),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all",children:"ptal"}),e.jsx("button",{onClick:Ni,disabled:!F,className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Teklifi Gnder"})]})]})}):null,Oi=()=>!Ge||!be?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{size:40,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Teklif Gnderildi!"}),e.jsx("p",{className:"text-sm text-white/90",children:"Teklifiniz mteriye iletildi"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-blue-900 font-bold mb-2",children:" Deerlendirme Aamasnda"}),e.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"Teklifiniz mteri tarafndan deerlendiriliyor. Mteri yant verdiinde bildirim alacaksnz."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Teklif Tutar"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["",be.price]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Tahmini Var"}),e.jsxs("span",{className:"font-bold text-slate-900",children:[be.etaMinutes," dakika"]})]}),be.message&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-slate-500 block mb-1",children:"Mesajnz"}),e.jsx("p",{className:"text-sm text-slate-800",children:be.message})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-xs text-amber-800 flex items-start gap-2",children:[e.jsx(Ae,{size:16,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:'Teklifinizi "Gnderilen Tekliflerim" blmnden takip edebilir veya iptal edebilirsiniz.'})]})})]}),e.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[e.jsx("button",{onClick:()=>{y(!1),T("offers")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Tekliflerimi Gr"}),e.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-all",children:"Tamam"})]})]})}),Li=()=>ue?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Mteri Talebine Teklif Ver"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",ue.id," - ",ue.serviceType]})]}),e.jsx("button",{onClick:()=>Ie(null),className:"p-2 bg-slate-50 rounded-full text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Teklif Tutar ()"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"number",autoFocus:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-xl font-bold text-slate-900 focus:border-blue-500 focus:ring-0 outline-none transition-colors",value:ze,onChange:l=>He(l.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"ETA (dk)"}),e.jsx("input",{type:"number",placeholder:"30",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:border-blue-500 outline-none",value:Ke,onChange:l=>Ee(l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Hizmet Tr"}),e.jsx("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700",children:ue.serviceType})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Mesaj (Opsiyonel)"}),e.jsx("textarea",{placeholder:"rn: 20 dk iinde ara banda olurum.",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:border-blue-500 focus:ring-0 outline-none resize-none h-24",value:_s,onChange:l=>ds(l.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:()=>Ie(null),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all",children:"ptal"}),e.jsx("button",{onClick:vi,disabled:!ze,className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Teklifi Gnder"})]})]})}):null,$i=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Kredi Ykle"}),e.jsx("button",{onClick:()=>Ms(!1),children:e.jsx(ne,{size:24,className:"text-slate-400"})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 mb-6 text-sm text-blue-800 flex gap-3",children:[e.jsx(Ae,{size:20,className:"shrink-0"}),e.jsx("p",{children:"1 Kredi = 1  Kabul. Kredileriniz hesabnza annda tanmlanr ve sresizdir."})]}),e.jsx("div",{className:"space-y-3 mb-6",children:zx.map(l=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all ${l.recommended?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l.recommended?"bg-blue-500 text-white":"bg-slate-200 text-slate-600"}`,children:e.jsx(rs,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:l.label}),e.jsxs("p",{className:"text-xs text-slate-500",children:[l.credits," Kredi"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg text-slate-900",children:["",l.price]}),l.recommended&&e.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-white px-2 py-0.5 rounded-full",children:"nerilen"})]})]},l.id))}),e.jsxs("button",{className:"w-full py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 flex items-center justify-center gap-2",children:[e.jsx(Ea,{size:18})," deme Yap ve Ykle"]})]})}),Fi=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(en,{partnerId:r,partnerVehicles:Hs,onToast:(l,c)=>a(l,c)})});return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex font-sans text-slate-800",children:[D&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40",onClick:()=>H(!1)}),e.jsxs("div",{className:`
        fixed lg:sticky top-0 left-0 h-screen z-50
        w-72 lg:w-64 bg-slate-900 text-white 
        flex flex-col justify-between shrink-0 
        transition-transform duration-300 ease-out
        ${D?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        overflow-y-auto
      `,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-800 sticky top-0 bg-slate-900 z-10",children:[e.jsx("span",{className:"yolmov-logo text-2xl font-bold text-white",children:"yolmov"}),e.jsx("button",{onClick:()=>H(!1),className:"lg:hidden p-2 text-slate-400 hover:text-white",children:e.jsx(ne,{size:24})})]}),e.jsxs("nav",{className:"mt-4 px-3 pb-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:" Ynetimi"}),e.jsx("div",{className:"space-y-1",children:[{id:"home",label:"Ana Sayfa",icon:ro},{id:"requests",label:" Talepleri",icon:qs,badge:S.length>0?S.length:null},{id:"accepted",label:"Kabul Edilenler",icon:As},{id:"offers",label:"Gnderilen Teklifler",icon:Is},{id:"active",label:"Aktif Grev",icon:Me,pulse:!!p},{id:"history",label:"Gemi ler",icon:hr}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),H(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${m===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label}),l.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:l.badge}),l.pulse&&e.jsx("span",{className:"ml-auto w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse"})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Filo & Operasyon"}),e.jsx("div",{className:"space-y-1",children:[{id:"fleet",label:"Filo Ynetimi",icon:te},{id:"emptyTrucks",label:"Bo Dnen Aralar",icon:va},{id:"showcase",label:"Vitrin Ayarlar",icon:fr}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),H(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${m===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Finans"}),e.jsx("div",{className:"space-y-1",children:[{id:"wallet",label:"Finansal Durum",icon:vt},{id:"payments",label:"demeler",icon:ft},{id:"offer_history",label:"Teklif Gemii",icon:me},{id:"calls",label:"Aramalar",icon:je}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),H(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${m===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Hesap"}),e.jsx("div",{className:"space-y-1",children:[{id:"documents",label:"Belgelerim",icon:ya},{id:"reviews",label:"Deerlendirmeler",icon:re},{id:"support",label:"Destek Merkezi",icon:cr},{id:"settings",label:"Ayarlar",icon:_t}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),H(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${m===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-800",children:[e.jsxs("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 border border-slate-700",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Bakiye"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(rs,{size:16,className:"text-yellow-400"})," ",K," Kredi"]}),e.jsx("button",{onClick:()=>Ms(!0),className:"text-xs bg-blue-600 px-3 py-1.5 rounded-lg text-white hover:bg-blue-500 transition-colors font-medium",children:"Ykle"})]})]}),e.jsxs("button",{onClick:()=>{Xe("settings"),Ja("profile"),H(!1)},className:"w-full text-left flex items-center gap-3 mb-4 px-2 hover:bg-slate-800 rounded-lg p-2 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 overflow-hidden border-2 border-slate-600 shrink-0",children:e.jsx("img",{src:Ft||`https://ui-avatars.com/api/?name=${encodeURIComponent(h)}&background=FF6B35&color=fff&size=128`,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"overflow-hidden flex-1",children:[e.jsx("p",{className:"text-sm font-bold truncate",children:h}),e.jsxs("div",{className:"flex items-center text-xs text-yellow-500",children:[e.jsxs("span",{children:[" ",x||0]}),e.jsxs("span",{className:"text-slate-500 ml-1",children:["(",at.length," )"]})]})]})]}),e.jsxs("button",{onClick:()=>s("/"),className:"w-full flex items-center justify-center gap-2 p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(ao,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"k Yap"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative pb-20 lg:pb-0",children:[e.jsxs("header",{className:"h-14 lg:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-10 sticky top-0 z-20",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx("span",{className:"yolmov-logo text-xl font-bold text-slate-800",children:"yo"})}),e.jsxs("h1",{className:"hidden lg:block text-xl font-bold text-slate-800",children:[m==="home"&&"Ana Sayfa",m==="showcase"&&"Vitrin",m==="newJobs"&&"Yeni  Talepleri",m==="requests"&&" Talepleri",m==="accepted"&&"Kabul Edilenler",m==="offers"&&"Tekliflerim",m==="active"&&"Aktif Grev",m==="emptyTrucks"&&"Bo Aralar",m==="offer_history"&&"Teklif Gemii",m==="payments"&&"demeler",m==="documents"&&"Belgelerim",m==="wallet"&&"Finans",m==="history"&&"Gemi",m==="reviews"&&"Deerlendirmeler",m==="settings"&&"Ayarlar",m==="fleet"&&"Filo Ynetimi",m==="support"&&"Destek",m==="calls"&&"Aramalar",m==="service_routes"&&"Rotalar"]}),e.jsxs("h1",{className:"lg:hidden text-sm font-bold text-slate-800 absolute left-1/2 -translate-x-1/2",children:[m==="home"&&"Ana Sayfa",m==="showcase"&&"Vitrin",m==="requests"&&" Talepleri",m==="accepted"&&"Kabul Edilenler",m==="offers"&&"Tekliflerim",m==="active"&&"Aktif Grev",m==="emptyTrucks"&&"Bo Aralar",m==="offer_history"&&"Gemi",m==="payments"&&"demeler",m==="documents"&&"Belgeler",m==="wallet"&&"Finans",m==="history"&&"Gemi",m==="reviews"&&"Puanlar",m==="settings"&&"Ayarlar",m==="fleet"&&"Filo",m==="support"&&"Destek",m==="more"&&"Men"]}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 shrink-0",children:[e.jsxs("div",{className:`flex items-center gap-1.5 lg:gap-2 px-2.5 lg:px-3 py-1.5 lg:py-2 rounded-full border transition-colors ${I?"bg-green-50 border-green-200":"bg-slate-100 border-slate-200"}`,children:[e.jsx("span",{className:`w-2 h-2 lg:w-2.5 lg:h-2.5 rounded-full ${I?"bg-green-500 animate-pulse":"bg-slate-400"}`}),e.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-700",children:I?"Aktif":"Pasif"}),e.jsx("button",{onClick:()=>B(!I),className:"hidden lg:inline text-xs text-blue-600 font-semibold hover:underline ml-1",children:"Deitir"})]}),e.jsxs("button",{onClick:()=>Ms(!0),className:"lg:hidden flex items-center gap-1 px-2 py-1.5 bg-slate-100 rounded-full",children:[e.jsx(rs,{size:14,className:"text-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-700",children:K})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6 relative",children:[m==="home"&&e.jsx(jx,{requests:S,partnerHistory:at,emptyTrucks:ei,reviews:jl,handleTabChange:Xe,setActiveTab:T,setShowAddCreditModal:Ms}),m==="showcase"&&e.jsx(ux,{partnerId:r,partnerData:i}),m==="requests"&&e.jsx(ir,{requests:S,customerRequests:cs,partnerServiceAreas:Pe,serviceAreasLoaded:Ss,newJobsFilter:yl,setNewJobsFilter:Nl,unlockedJobs:M,offeringJobId:z,offerError:De,myOffers:xs,setSelectedJobForDetail:Ks,setSelectedJobForQuote:G,setQuotePrice:de,setActiveTab:T,handleOpenCustomerOfferModal:Il,handleStartOperation:na,handleCancelOffer:ra}),m==="newJobs"&&e.jsx(ir,{requests:S,customerRequests:cs,partnerServiceAreas:Pe,serviceAreasLoaded:Ss,newJobsFilter:yl,setNewJobsFilter:Nl,unlockedJobs:M,offeringJobId:z,offerError:De,myOffers:xs,setSelectedJobForDetail:Ks,setSelectedJobForQuote:G,setQuotePrice:de,setActiveTab:T,handleOpenCustomerOfferModal:Il,handleStartOperation:na,handleCancelOffer:ra}),m==="accepted"&&e.jsx(vx,{acceptedJobs:Dt,setActiveTab:T,handleStartOperation:na}),m==="offers"&&e.jsx(wx,{myOffers:xs,setActiveTab:T,handleCancelOffer:ra}),m==="emptyTrucks"&&Fi(),m==="active"&&e.jsx("div",{className:"h-full flex flex-col lg:flex-row",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 bg-slate-900 relative overflow-hidden min-h-[400px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#475569 1px, transparent 1px)",backgroundSize:"30px 30px"}}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",children:[e.jsx("path",{d:"M 200 150 Q 400 100 600 300 T 900 400",fill:"none",stroke:"#3B82F6",strokeWidth:"6",strokeDasharray:"10 5",className:"animate-pulse"}),e.jsx("circle",{cx:"200",cy:"150",r:"80",fill:"#3B82F6",fillOpacity:"0.1",className:"animate-ping"})]}),e.jsxs("div",{className:"absolute top-[150px] left-[200px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Me,{size:20,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:"Siz"})]}),e.jsxs("div",{className:"absolute top-[300px] left-[600px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Es,{size:18,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:p.customerName})]}),p.dropoffLocation&&e.jsxs("div",{className:"absolute top-[400px] left-[900px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Ne,{size:18,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:"Var"})]})]}),e.jsxs("div",{className:"w-full lg:w-[450px] bg-white border-l border-slate-200 flex flex-col shadow-2xl z-20",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.serviceType}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded",children:["#",p.id]})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[p.location," ",p.dropoffLocation&&` ${p.dropoffLocation}`]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 border-y border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center text-xl font-bold text-blue-600 shadow-sm",children:p.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:p.customerName}),e.jsx("p",{className:"text-sm text-slate-500",children:p.vehicleInfo})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:"flex items-center justify-center gap-2 bg-white py-3 rounded-xl text-sm font-bold text-slate-700 shadow-sm hover:bg-slate-50",children:[e.jsx(je,{size:16,className:"text-green-600"})," Ara"]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 bg-white py-3 rounded-xl text-sm font-bold text-slate-700 shadow-sm hover:bg-slate-50",children:[e.jsx(or,{size:16,className:"text-blue-600"})," Mesaj"]})]})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("div",{className:"relative space-y-8 pl-6 border-l-2 border-slate-100 ml-3 mb-8",children:[{id:0,label:"Kabul Edildi",time:"10:30"},{id:1,label:"Yola kld",time:ie>=1?"10:32":"-"},{id:2,label:"Konuma Varld",time:ie>=2?"10:45":"-"},{id:3,label:"Hizmet Tamamland",time:ie>=3?"11:15":"-"}].map(l=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-[3px] border-white shadow-sm transition-colors ${ie>=l.id?"bg-green-500":"bg-slate-200"}`}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`text-sm font-bold ${ie>=l.id?"text-slate-900":"text-slate-400"}`,children:l.label}),e.jsx("span",{className:"text-xs text-slate-400",children:l.time})]})]},l.id))}),ie===2&&!b&&e.jsxs("div",{className:"mb-6 bg-orange-50 p-4 rounded-xl border border-dashed border-orange-300 text-center animate-pulse",children:[e.jsx(xe,{className:"mx-auto text-orange-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-bold text-orange-700 mb-1",children:"Balang Fotoraf Zorunlu"}),e.jsx("p",{className:"text-xs text-orange-600 mb-3",children:"Hizmete balamadan nce aracn durumunu belgeleyin."}),Ga?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-orange-600",children:[e.jsx(ce,{size:16,className:"animate-spin"}),e.jsx("span",{className:"text-xs font-bold",children:"leniyor..."})]}):e.jsxs("label",{className:"inline-block bg-white border border-orange-200 text-orange-600 px-4 py-2 rounded-lg text-xs font-bold hover:bg-orange-50 shadow-sm cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:l=>El(l,"start"),className:"hidden"}),e.jsx(xe,{size:14,className:"inline mr-1"})," Fotoraf ek / Ykle"]})]}),ie===3&&!ve&&e.jsxs("div",{className:"mb-6 bg-green-50 p-4 rounded-xl border border-dashed border-green-300 text-center animate-pulse",children:[e.jsx(xe,{className:"mx-auto text-green-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-bold text-green-700 mb-1",children:"Hizmet Kant Zorunlu"}),e.jsx("p",{className:"text-xs text-green-600 mb-3",children:"Tamamlamadan nce bitmi iin fotorafn ykleyin."}),Ga?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[e.jsx(ce,{size:16,className:"animate-spin"}),e.jsx("span",{className:"text-xs font-bold",children:"leniyor..."})]}):e.jsxs("label",{className:"inline-block bg-white border border-green-200 text-green-600 px-4 py-2 rounded-lg text-xs font-bold hover:bg-green-50 shadow-sm cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:l=>El(l,"end"),className:"hidden"}),e.jsx(xe,{size:14,className:"inline mr-1"})," Fotoraf ek / Ykle"]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("button",{onClick:wi,className:`w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-3 ${ie===0?"bg-blue-600 hover:bg-blue-700 shadow-blue-200":ie===1?"bg-purple-600 hover:bg-purple-700 shadow-purple-200":ie===2?"bg-orange-500 hover:bg-orange-600 shadow-orange-200":"bg-green-600 hover:bg-green-700 shadow-green-200"}`,children:[Di()," ",e.jsx(yt,{size:20})]}),e.jsx("button",{onClick:()=>N(null),className:"w-full mt-3 py-3 text-sm font-bold text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:"Acil Durum / ptal"})]})]})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6",children:e.jsx(Me,{size:40,className:"text-slate-300"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Aktif Grev Bulunamad"}),e.jsx("p",{className:"text-slate-400 mt-2 mb-8",children:"Ltfen talep havuzundan bir i kabul edin."}),e.jsx("button",{onClick:()=>Xe("requests"),className:"px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700",children:" Listesine Dn"})]})}),m==="offer_history"&&e.jsx(dx,{}),m==="payments"&&e.jsx(xx,{}),m==="documents"&&e.jsx(mx,{}),m==="calls"&&e.jsx(hx,{}),m==="history"&&e.jsx(Nx,{selectedHistoryItem:xn,setSelectedHistoryItem:mn,historySearch:Ot,setHistorySearch:on,historyFilter:cn,setHistoryFilter:dn,filteredHistory:ji}),m==="reviews"&&e.jsx(fx,{reviews:jl,ratingFilter:rn,setRatingFilter:nn,showObjectionPage:ln,setShowObjectionPage:It,selectedReviewForObjection:ea,setSelectedReviewForObjection:sa,objectionReason:Et,setObjectionReason:Pt,objectionDetails:Bt,setObjectionDetails:Mt,handleSubmitObjection:Si,handleOpenObjection:_i}),m==="wallet"&&e.jsx(yx,{credits:K,transactions:fn,walletFilter:hn,setWalletFilter:pn,setShowAddCreditModal:Ms}),m==="settings"&&e.jsx(Sx,{CURRENT_PARTNER_ID:r,CURRENT_PARTNER_NAME:h,CURRENT_PARTNER_EMAIL:f,CURRENT_PARTNER_PHONE:u,CURRENT_PARTNER_RATING:x,settingsSubTab:gn,setSettingsSubTab:Ja,companyLogo:Lt,setCompanyLogo:lt,profilePhoto:$t,setProfilePhoto:rt,existingLogoUrl:Qa,existingProfilePhotoUrl:Ft,isEditingProfile:Za,setIsEditingProfile:nt,isCompressingLogo:jn,isCompressingProfile:yn,isSavingSettings:Nn,partnerFormData:Ht,setPartnerFormData:Kt,companyFormData:Vt,setCompanyFormData:Gt,contactFormData:Yt,setContactFormData:qt,passwordFormData:qe,setPasswordFormData:al,notificationPreferences:aa,setNotificationPreferences:vl,isSavingNotificationPrefs:si,isEditingCompanyInfo:nl,setIsEditingCompanyInfo:it,isEditingContactInfo:ol,setIsEditingContactInfo:ot,isChangingPassword:vn,isSavingCompanyInfo:wn,isSavingContactInfo:kn,isSavingServices:_n,selectedServices:Ut,toggleService:mi,fleet:Hs,setActiveTab:T,documents:Cn,isLoadingDocuments:An,setShowDocumentUploadModal:zs,setSelectedDocumentDetail:Fs,setShowDocumentDetailModal:$s,credits:K,handleLogoUpload:zi,handleProfilePhotoUpload:Ci,handleSaveProfileSettings:ii,handleCancelProfileEdit:oi,handleSaveCompanyInfo:ri,handleCancelCompanyEdit:ni,handleSaveContactInfo:ci,handleCancelContactEdit:di,handlePasswordChange:ai,handleSaveNotificationPreferences:li,handleSaveServices:xi,showNewToast:a}),m==="fleet"&&e.jsx(px,{fleet:Hs,partnerHistory:at,partnerName:h,showVehicleEditPage:Qt,setShowVehicleEditPage:Hn,selectedVehicleForSettings:bt,setSelectedVehicleForSettings:Fn,selectedVehicleForHistory:Kn,setSelectedVehicleForHistory:Vn,vehicleStats:Gn,loadingVehicleStats:qn,setShowAddVehicleModal:ct}),m==="support"&&e.jsx(gx,{tickets:Jn,partnerId:r,partnerName:h,showNewTicketPage:En,setShowNewTicketPage:Pn,ticketSubject:Bn,setTicketSubject:Mn,ticketCategory:Rn,setTicketCategory:On,ticketDescription:Ln,setTicketDescription:$n})]})]}),e.jsx(fe,{children:bn&&$i()}),e.jsx(fe,{children:A&&Ri()}),e.jsx(fe,{children:ue&&Li()}),e.jsx(fe,{children:Ge&&Oi()}),e.jsx(fe,{children:an&&Ii()}),e.jsx(fe,{children:ta&&Mi()}),e.jsx(fe,{children:Y&&Ei()}),e.jsx(fe,{children:Dn&&Pi()}),e.jsx(fe,{children:In&&Bi()}),Sn&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col my-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Yeni Ara Ekle"}),e.jsx("button",{onClick:()=>ct(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-3",children:[e.jsx(xe,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Ara Grselleri (Plaka Okunabilir Olmal)"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"n Grsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Ue?e.jsx("img",{src:ss(Ue),alt:"n",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"n"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[mt?"leniyor...":"n Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_l,disabled:mt})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Yan Grsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Je?e.jsx("img",{src:ss(Je),alt:"Yan",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Yan"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[ut?"leniyor...":"Yan Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Sl,disabled:ut})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Arka Grsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:We?e.jsx("img",{src:ss(We),alt:"Arka",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Arka"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[ht?"leniyor...":"Arka Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:zl,disabled:ht})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka *"}),e.jsx("input",{type:"text",placeholder:"34 ABC 123",value:C.plate,onChange:l=>Q({...C,plate:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka *"}),e.jsx("input",{type:"text",placeholder:"Mercedes",value:C.brand,onChange:l=>Q({...C,brand:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model *"}),e.jsx("input",{type:"text",placeholder:"Actros",value:C.model,onChange:l=>Q({...C,model:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yl"}),e.jsx("input",{type:"number",placeholder:"2020",value:C.year,onChange:l=>Q({...C,year:parseInt(l.target.value)||new Date().getFullYear()}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Tip *"}),e.jsxs("select",{value:C.type,onChange:l=>Q({...C,type:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"cekici",children:"ekici"}),e.jsx("option",{value:"vinc",children:"Vin"}),e.jsx("option",{value:"kurtarici",children:"Kurtarc"}),e.jsx("option",{value:"servis",children:"Servis Arac"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Src"}),e.jsx("input",{type:"text",placeholder:"Src ad (opsiyonel)",value:C.driver,onChange:l=>Q({...C,driver:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsx("p",{className:"text-xs text-slate-500 italic",children:"Bo braklrsa irket ad kullanlr"})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-purple-50 rounded-xl border border-purple-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-3",children:[e.jsx(Nt,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Vitrin Bilgileri (B2C Mterilere Gsterilecek)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{value:C.showcase_capacity,onChange:l=>Q({...C,showcase_capacity:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{value:C.showcase_insurance_type,onChange:l=>Q({...C,showcase_insurance_type:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"Tama Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk Sigortas"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam Kapsaml"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"Vin"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz ekim"},{value:"gps_takip",label:"GPS Takip"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{const c=C.showcase_equipment||[],d=c.includes(l.value)?c.filter(v=>v!==l.value):[...c,l.value];Q({...C,showcase_equipment:d})},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${(C.showcase_equipment||[]).includes(l.value)?"bg-purple-600 text-white":"bg-white text-slate-600 border border-slate-200 hover:border-purple-300"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ara Aklamas (Vitrin)"}),e.jsx("textarea",{placeholder:"rn: Aracmz son model olup, alak asi spor aralar dahil tm binek ve hafif ticari aralar hasarsz ykleme garantisi ile tamaktadr.",value:C.showcase_description,onChange:l=>{const c=pl(l.target.value);Q({...C,showcase_description:c})},rows:3,className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-red-500 font-medium",children:" Telefon, e-mail, web adresi ve sosyal medya bilgisi otomatik olarak silinir."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-100 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"is_showcase_vehicle",checked:C.is_showcase_vehicle,onChange:l=>Q({...C,is_showcase_vehicle:l.target.checked}),className:"w-5 h-5 rounded border-purple-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:"is_showcase_vehicle",className:"text-sm font-medium text-purple-800",children:"Bu arac vitrin arac olarak belirle (Mterilere bu ara gsterilecek)"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 flex-shrink-0",children:[e.jsx("button",{onClick:()=>ct(!1),className:"flex-1 px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsx("button",{onClick:ui,disabled:dt,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:dt?"Ekleniyor...":"Ekle"})]})]})}),zn&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col my-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Ara Dzenle"}),e.jsx("button",{onClick:()=>{Wt(!1),Jt(null),Rs(null),Os(null),Ls(null)},className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700 mb-3",children:[e.jsx(xe,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Ara Fotoraflarn Gncelle (Opsiyonel)"})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-3",children:"Sadece deitirmek istediiniz fotoraflar ykleyin"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"n Grsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Ue?e.jsx("img",{src:ss(Ue),alt:"n",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"n"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[mt?"leniyor...":"Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_l,disabled:mt})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Yan Grsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Je?e.jsx("img",{src:ss(Je),alt:"Yan",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Yan"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[ut?"leniyor...":"Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Sl,disabled:ut})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Arka Grsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:We?e.jsx("img",{src:ss(We),alt:"Arka",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(xe,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Arka"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[ht?"leniyor...":"Ykle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:zl,disabled:ht})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka *"}),e.jsx("input",{type:"text",placeholder:"34 ABC 123",value:C.plate,onChange:l=>Q({...C,plate:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka *"}),e.jsx("input",{type:"text",placeholder:"Mercedes",value:C.brand,onChange:l=>Q({...C,brand:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model *"}),e.jsx("input",{type:"text",placeholder:"Actros",value:C.model,onChange:l=>Q({...C,model:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yl"}),e.jsx("input",{type:"number",placeholder:"2020",value:C.year,onChange:l=>Q({...C,year:parseInt(l.target.value)||new Date().getFullYear()}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Tip *"}),e.jsxs("select",{value:C.type,onChange:l=>Q({...C,type:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"cekici",children:"ekici"}),e.jsx("option",{value:"vinc",children:"Vin"}),e.jsx("option",{value:"kurtarici",children:"Kurtarc"}),e.jsx("option",{value:"servis",children:"Servis Arac"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Src"}),e.jsx("input",{type:"text",placeholder:"Src ad (opsiyonel)",value:C.driver,onChange:l=>Q({...C,driver:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsx("p",{className:"text-xs text-slate-500 italic",children:"Bo braklrsa irket ad kullanlr"})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-purple-50 rounded-xl border border-purple-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-3",children:[e.jsx(Nt,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Vitrin Bilgileri (B2C Mterilere Gsterilecek)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{value:C.showcase_capacity,onChange:l=>Q({...C,showcase_capacity:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{value:C.showcase_insurance_type,onChange:l=>Q({...C,showcase_insurance_type:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Seiniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"Tama Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk Sigortas"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam Kapsaml"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"Vin"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz ekim"},{value:"gps_takip",label:"GPS Takip"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{const c=C.showcase_equipment||[],d=c.includes(l.value)?c.filter(v=>v!==l.value):[...c,l.value];Q({...C,showcase_equipment:d})},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${(C.showcase_equipment||[]).includes(l.value)?"bg-purple-600 text-white":"bg-white text-slate-600 border border-slate-200 hover:border-purple-300"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ara Aklamas (Vitrin)"}),e.jsx("textarea",{placeholder:"rn: Aracmz son model olup, alak asi spor aralar dahil tm binek ve hafif ticari aralar hasarsz ykleme garantisi ile tamaktadr.",value:C.showcase_description,onChange:l=>{const c=pl(l.target.value);Q({...C,showcase_description:c})},rows:3,className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-red-500 font-medium",children:" Telefon, e-mail, web adresi ve sosyal medya bilgisi otomatik olarak silinir."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-100 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"edit_is_showcase_vehicle",checked:C.is_showcase_vehicle,onChange:l=>Q({...C,is_showcase_vehicle:l.target.checked}),className:"w-5 h-5 rounded border-purple-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:"edit_is_showcase_vehicle",className:"text-sm font-medium text-purple-800",children:"Bu arac vitrin arac olarak belirle"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 flex-shrink-0",children:[e.jsx("button",{onClick:()=>{Wt(!1),Jt(null),Rs(null),Os(null),Ls(null)},className:"flex-1 px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"ptal"}),e.jsx("button",{onClick:hi,disabled:dt,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:dt?"Gncelleniyor...":"Gncelle"})]})]})}),yi(),e.jsx(Xi,{message:t.message,type:t.type,duration:t.duration,onClose:n,isVisible:t.isVisible}),e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 z-40 safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:(()=>{const l=[{id:"home",label:"Ana Sayfa",icon:xr},{id:"requests",label:" Talepleri",icon:qs,badge:S.length>0?S.length:null},{id:"fleet",label:"Filo",icon:te},{id:"wallet",label:"Finans",icon:vt}],d=["showcase","settings","support","documents","history","reviews","emptyTrucks","offers","accepted","active","payments"].includes(m);return e.jsxs(e.Fragment,{children:[l.map(v=>e.jsxs("button",{onClick:()=>Xe(v.id),className:`flex flex-col items-center justify-center flex-1 h-full relative transition-colors ${m===v.id?"text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(v.icon,{size:22,strokeWidth:m===v.id?2.5:2}),v.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:v.badge>9?"9+":v.badge})]}),e.jsx("span",{className:`text-[10px] mt-1 font-medium ${m===v.id?"font-bold":""}`,children:v.label}),m===v.id&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-blue-600 rounded-b-full"})]},v.id)),e.jsxs("button",{onClick:()=>H(!0),className:`flex flex-col items-center justify-center flex-1 h-full relative transition-colors ${d?"text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(Ui,{size:22,strokeWidth:d?2.5:2}),e.jsx("span",{className:`text-[10px] mt-1 font-medium ${d?"font-bold":""}`,children:"Daha Fazla"}),d&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-blue-600 rounded-b-full"})]})]})})()})})]})};export{ku as default};

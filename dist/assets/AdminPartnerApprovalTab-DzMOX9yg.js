import{r as i,s as o,j as e,S,P as f,p as N,X as T}from"./index-E23wXui6.js";import{u as A,L as E,E as R}from"./AdminDashboard-DiB8oUtZ.js";import{B as v}from"./building-Ci2UyuBL.js";import{M as y}from"./mail-lnbrbq_c.js";import{C as O}from"./calendar-N_rZ7iqs.js";import{E as m}from"./eye-BgYAqo0W.js";import{C as k}from"./circle-check-big-CqK43icZ.js";import{F as D}from"./file-text-CiTcuk5P.js";import{I as _}from"./image-fWsh5Wh5.js";import{C as L}from"./circle-alert-Cr6X6UL-.js";import{E as K}from"./external-link-CIWkvQIP.js";import"./activity-x4r1uIqm.js";import"./tag-ClZeJSCh.js";import"./wallet-LnEzRB8g.js";import"./credit-card-CO7gHSgc.js";import"./star-K0kjTMdj.js";import"./log-out-C7HknHx7.js";import"./dollar-sign-Bx3qjqNA.js";import"./StatusBadge-BMa-bhqD.js";import"./shield-B4IHCO2m.js";import"./user-plus-DsQ60pmF.js";import"./square-pen-gn75g4uP.js";import"./trash-2-DdJ1Ff78.js";const ce=()=>{var j;const[u,w]=i.useState([]),[z,h]=i.useState(!0),[t,n]=i.useState(null),[r,c]=i.useState(null),{filtered:p,searchTerm:x,setSearchTerm:B}=A(u,{searchKeys:["company_name","first_name","last_name","email","phone"]});i.useEffect(()=>{d()},[]);const d=async()=>{try{h(!0);const s=await o.partners.getAll();console.log("ðŸ“‹ TÃ¼m partnerler:",s);const l=s.filter(a=>a.status==="pending");console.log("â³ Pending partnerler:",l),w(l)}catch(s){console.error("Onay bekleyen partnerler yÃ¼klenemedi:",s)}finally{h(!1)}},b=async s=>{if(confirm("Bu partner baÅŸvurusunu onaylamak istediÄŸinize emin misiniz?"))try{const l=await o.partners.update(s,{status:"active"});alert(`Partner baÅŸvurusu onaylandÄ±! (${(l==null?void 0:l.id)||s})`),d()}catch(l){console.error("Partner onaylama hatasÄ±:",l),alert("Onaylama iÅŸlemi baÅŸarÄ±sÄ±z oldu.")}},g=async s=>{if(confirm("Bu partner baÅŸvurusunu reddetmek istediÄŸinize emin misiniz?"))try{const l=await o.partners.update(s,{status:"suspended"});alert(`Partner baÅŸvurusu reddedildi. (${(l==null?void 0:l.id)||s})`),d()}catch(l){console.error("Partner reddetme hatasÄ±:",l),alert("Reddetme iÅŸlemi baÅŸarÄ±sÄ±z oldu.")}};return z?e.jsx(E,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Partner Onay"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Onay bekleyen partner baÅŸvurularÄ±nÄ± deÄŸerlendirin"})]}),e.jsxs("div",{className:"px-4 py-2 bg-orange-100 rounded-xl",children:[e.jsx("p",{className:"text-xs text-orange-700 font-bold",children:"Bekleyen BaÅŸvuru"}),e.jsx("p",{className:"text-2xl font-black text-orange-900",children:u.length})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"BaÅŸvuru ara (ÅŸirket adÄ±, yetkili, e-posta, telefon)...",className:"w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none",value:x,onChange:s=>B(s.target.value)})]}),p.length===0?e.jsx(R,{title:x?"BaÅŸvuru BulunamadÄ±":"Onay Bekleyen BaÅŸvuru Yok",description:x?"Arama kriterine uygun baÅŸvuru bulunamadÄ±.":"Åžu anda onay bekleyen partner baÅŸvurusu bulunmuyor."}):e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Åžirket Bilgileri"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Ä°letiÅŸim"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"Hizmetler"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase",children:"BaÅŸvuru Tarihi"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-600 uppercase",children:"Ä°ÅŸlemler"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:p.map(s=>{var l,a;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(v,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:s.company_name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.first_name," ",s.last_name]}),s.tax_number&&e.jsxs("p",{className:"text-xs text-slate-400",children:["VKN: ",s.tax_number]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(y,{size:14,className:"text-slate-400"}),s.email]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(f,{size:14,className:"text-slate-400"}),s.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(l=s.service_types)==null?void 0:l.slice(0,2).map((C,P)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:C},P)),((a=s.service_types)==null?void 0:a.length)>2&&e.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-medium",children:["+",s.service_types.length-2]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(O,{size:14,className:"text-slate-400"}),new Date(s.created_at).toLocaleDateString("tr-TR")]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"DetaylarÄ± GÃ¶rÃ¼ntÃ¼le",children:e.jsx(m,{size:18})}),e.jsx("button",{onClick:()=>b(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Onayla",children:e.jsx(k,{size:18})}),e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reddet",children:e.jsx(N,{size:18})})]})})]},s.id)})})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Partner BaÅŸvuru DetaylarÄ±"}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100",children:"âœ•"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(v,{size:16,className:"text-orange-600"}),"Åžirket Bilgileri"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Åžirket AdÄ±"}),e.jsx("p",{className:"font-bold text-slate-900",children:t.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Yetkili KiÅŸi"}),e.jsxs("p",{className:"font-bold text-slate-900",children:[t.first_name," ",t.last_name]})]}),t.tax_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Vergi Kimlik No"}),e.jsx("p",{className:"font-bold text-slate-900",children:t.tax_number})]}),t.trade_registry_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Ticaret Sicil No"}),e.jsx("p",{className:"font-bold text-slate-900",children:t.trade_registry_number})]}),t.city&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Konum"}),e.jsxs("p",{className:"font-bold text-slate-900",children:[t.district,", ",t.city]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Ä°letiÅŸim Bilgileri"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(f,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:t.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Hizmet Tipleri"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(j=t.service_types)==null?void 0:j.map((s,l)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:s},l))})]}),(t.commercial_registry_url||t.vehicle_license_url)&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-blue-600"}),"YÃ¼klenen Belgeler"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.commercial_registry_url&&e.jsxs("button",{onClick:()=>c({url:t.commercial_registry_url,title:"Ticari Sicil Belgesi"}),className:"flex items-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-xl hover:bg-blue-100 transition-colors text-left group",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:e.jsx(_,{size:24,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-900",children:"Ticari Sicil Belgesi"}),e.jsx("p",{className:"text-xs text-slate-500",children:"TÄ±klayarak Ã¶nizleyin"})]}),e.jsx(m,{size:20,className:"text-blue-600"})]}),t.vehicle_license_url&&e.jsxs("button",{onClick:()=>c({url:t.vehicle_license_url,title:"AraÃ§ RuhsatÄ±"}),className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors text-left group",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-200 transition-colors",children:e.jsx(_,{size:24,className:"text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-900",children:"AraÃ§ RuhsatÄ±"}),e.jsx("p",{className:"text-xs text-slate-500",children:"TÄ±klayarak Ã¶nizleyin"})]}),e.jsx(m,{size:20,className:"text-green-600"})]})]})]}),!t.commercial_registry_url&&!t.vehicle_license_url&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(L,{size:18}),e.jsx("p",{className:"text-sm font-medium",children:"Bu baÅŸvuruda henÃ¼z belge yÃ¼klenmemiÅŸ."})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[e.jsxs("button",{onClick:()=>{b(t.id),n(null)},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{size:20}),"Onayla"]}),e.jsxs("button",{onClick:()=>{g(t.id),n(null)},className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(N,{size:20}),"Reddet"]})]})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60] p-4",onClick:()=>c(null),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(K,{size:16}),"Yeni Sekmede AÃ§"]}),e.jsx("button",{onClick:()=>c(null),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg hover:bg-slate-100 transition-colors",children:e.jsx(T,{size:20})})]})]}),e.jsx("div",{className:"p-4 bg-slate-100 flex items-center justify-center",style:{minHeight:"500px"},children:e.jsx("img",{src:r.url,alt:r.title,className:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-lg",onError:s=>{const l=s.target;l.style.display="none";const a=l.parentElement;a&&(a.innerHTML=`
                      <div class="text-center p-8">
                        <p class="text-slate-600 mb-4">Ã–nizleme yapÄ±lamÄ±yor. Belgeyi yeni sekmede aÃ§Ä±n.</p>
                        <a href="${r.url}" target="_blank" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 inline-block">
                          Belgeyi AÃ§
                        </a>
                      </div>
                    `)}})})]})})]})};export{ce as default};

import{u as I,h as Y,r as d,j as e,m,B as q,A as U,P as S,d as H,s as g}from"./index-Bya38QVO.js";import{n as K}from"./notifications-DDFNG8Nw.js";import{S as B}from"./star-CGDcrGJR.js";import{L as C}from"./lock-DZ5HdEFD.js";import{E as D}from"./eye-off-W-iMqfWa.js";import{E as R}from"./eye-BaK01t4_.js";const E={customer:{phone:"05XX1234567",password:"123456"}},V=({userType:F})=>{var k;const u=I(),P=Y(),[r,b]=d.useState("login"),j=((k=P.state)==null?void 0:k.returnUrl)||"/musteri/profil",[p,L]=d.useState(!1),[x,$]=d.useState(""),[i,A]=d.useState(""),[f,T]=d.useState(""),[h,G]=d.useState(""),[n,v]=d.useState(""),[N,l]=d.useState(""),[w,o]=d.useState(!1),t=F==="customer",O=async s=>{var z;s&&s.preventDefault(),console.log("ğŸ”µ handleSubmit called",{mode:r,isCustomer:t,email:i,password:n?"***":"empty"}),l(""),o(!0);try{if(r==="register"&&t){if(console.log("ğŸ“ Register mode"),!i||!f||!h||!n||!x){l("LÃ¼tfen tÃ¼m alanlarÄ± doldurun"),o(!1);return}if(x.length<10){l("Telefon numarasÄ± en az 10 karakter olmalÄ±dÄ±r"),o(!1);return}if(n.length<6){l("Åifre en az 6 karakter olmalÄ±dÄ±r"),o(!1);return}console.log("ğŸ”„ Calling signUpCustomer...");const a=await g.auth.signUpCustomer(i,n,{firstName:f,lastName:h,phone:x});if(console.log("âœ… SignUp result:",a),(z=a==null?void 0:a.user)!=null&&z.id)try{await K(a.user.id),console.log("âœ… Welcome notification sent")}catch(c){console.error("âš ï¸ Welcome notification failed:",c)}l(""),alert(`âœ… KayÄ±t baÅŸarÄ±lÄ±!

ğŸ“§ ${i} adresinize doÄŸrulama maili gÃ¶nderildi.

LÃ¼tfen mailinizi kontrol edin ve doÄŸrulama linkine tÄ±klayÄ±n.`),b("login"),v("")}else if(r==="login"&&t){if(console.log("ğŸ”‘ Login mode - Customer"),!i||!n){l("LÃ¼tfen email ve ÅŸifrenizi girin"),o(!1);return}console.log("ğŸ”„ Calling signIn...");const{user:a,session:c}=await g.auth.signIn(i,n);if(console.log("âœ… SignIn result:",{user:a==null?void 0:a.id,session:!!c}),!a){l("GiriÅŸ baÅŸarÄ±sÄ±z"),o(!1);return}console.log("ğŸ”„ Getting customer data...");const y=await g.customers.getById(a.id);if(console.log("âœ… Customer data:",y),!y){l("MÃ¼ÅŸteri bilgileri bulunamadÄ±"),o(!1);return}try{localStorage.setItem("yolmov_customer",JSON.stringify(y))}catch{}console.log("ğŸš€ Navigating to:",j),u(j)}else{if(console.log("ğŸ”‘ Login mode - Partner (password)"),!i||!n){l("LÃ¼tfen email ve ÅŸifrenizi girin"),o(!1);return}const{approved:a,partner:c}=await g.auth.signInPartner(i,n);if(!a){u("/partner/inceleniyor");return}localStorage.setItem("yolmov_partner",JSON.stringify(c)),u("/partner")}}catch(a){console.error("âŒ Submit error:",a),l(a.message||"Ä°ÅŸlem baÅŸarÄ±sÄ±z!")}finally{console.log("ğŸ handleSubmit finished"),o(!1)}};return e.jsxs("div",{className:"min-h-[calc(100vh-80px)] bg-[#F8FAFC] flex items-center justify-center p-4 md:p-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:`absolute -top-[20%] -left-[10%] w-[50%] h-[50%] rounded-full blur-3xl ${t?"bg-brand-orange/5":"bg-blue-600/5"}`}),e.jsx("div",{className:`absolute top-[40%] -right-[10%] w-[40%] h-[60%] rounded-full blur-3xl ${t?"bg-yellow-500/5":"bg-teal-500/5"}`})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white w-full max-w-[1100px] min-h-[600px] rounded-3xl shadow-2xl overflow-hidden grid grid-cols-1 lg:grid-cols-12 relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:col-span-5 relative bg-gray-900 text-white p-12 flex-col justify-between overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:t?"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=1920&auto=format&fit=crop":"https://images.unsplash.com/photo-1613214149922-f1809c99e35f?q=80&w=1920&auto=format&fit=crop",alt:"Background",className:"w-full h-full object-cover opacity-40"}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-b ${t?"from-brand-orange/80 to-gray-900/90":"from-blue-600/80 to-gray-900/90"} mix-blend-multiply`})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("span",{className:"yolmov-logo text-5xl font-bold text-white block mb-6",children:"yolmov"}),e.jsx("span",{className:"hidden"})]}),e.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[e.jsx("h2",{className:"text-4xl font-display font-bold leading-tight mb-6",children:t?"YolculuÄŸunuz GÃ¼vende.":"Ä°ÅŸ OrtaÄŸÄ± PortalÄ±"}),e.jsx("p",{className:"text-white/80 text-lg leading-relaxed font-light",children:t?"7/24 yol yardÄ±m desteÄŸi ile TÃ¼rkiye'nin her yerinde yanÄ±nÄ±zdayÄ±z. Tek tÄ±kla Ã§ekici, lastik ve akÃ¼ hizmeti.":"Ä°ÅŸlerinizi cebinizden yÃ¶netin. Talep takibi, bakiye sorgulama ve filo yÃ¶netimi tek ekranda."})]})]}),e.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[e.jsx("div",{className:"flex gap-1 mb-3",children:[1,2,3,4,5].map(s=>e.jsx(B,{size:16,fill:"#FFC107",className:"text-[#FFC107]"},s))}),e.jsxs("p",{className:"text-sm italic text-white/90 mb-4",children:['"',t?"Gece yarÄ±sÄ± yolda kaldÄ±m, 15 dakikada geldiler. Harika bir deneyimdi.":"Yolmov sayesinde iÅŸ hacmimiz %40 arttÄ±. Ã–demeler dÃ¼zenli ve sistem Ã§ok kolay.",'"']}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 overflow-hidden",children:e.jsx("img",{src:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=100&auto=format&fit=crop&q=60",alt:"User",className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold",children:t?"Ahmet YÄ±lmaz":"Oto Kurtarma Ltd."}),e.jsx("p",{className:"text-[10px] text-white/60",children:t?"Yolmov Ãœyesi":"Yolmov Partneri"})]})]})]})]}),e.jsxs("div",{className:"col-span-1 lg:col-span-7 p-8 md:p-12 lg:p-16 flex flex-col justify-center bg-white",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-4 ${t?"bg-orange-50 text-brand-orange":"bg-blue-50 text-blue-600"}`,children:t?e.jsx(C,{size:24}):e.jsx(q,{size:24})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:r==="login"?"Tekrar HoÅŸ Geldiniz!":"Hesap OluÅŸturun"}),e.jsx("p",{className:"text-gray-500 text-sm",children:t?r==="login"?"Yola devam etmek iÃ§in giriÅŸ yapÄ±n.":"HÄ±zlÄ±ca Ã¼ye olun, yolda kalmayÄ±n.":"Partner giriÅŸi: E-posta ve ÅŸifre ile giriÅŸ yapÄ±n."})]}),t&&e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("div",{className:"bg-gray-100 p-1.5 rounded-2xl flex w-full max-w-xs relative",children:[e.jsx(m.div,{className:"absolute top-1.5 bottom-1.5 rounded-xl bg-white shadow-sm",initial:!1,animate:{left:r==="login"?"6px":"50%",width:"calc(50% - 6px)"},transition:{type:"spring",stiffness:300,damping:30}}),e.jsx("button",{onClick:()=>b("login"),className:`flex-1 relative z-10 py-2 text-sm font-bold transition-colors duration-300 ${r==="login"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"GiriÅŸ Yap"}),e.jsx("button",{onClick:()=>b("register"),className:`flex-1 relative z-10 py-2 text-sm font-bold transition-colors duration-300 ${r==="register"?"text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:"KayÄ±t Ol"})]})}),e.jsx("form",{className:"space-y-5 max-w-sm mx-auto w-full",onSubmit:O,children:e.jsx(U,{mode:"wait",children:e.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-5",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 ml-1",children:"E-posta"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none transition-colors ${t?"text-gray-400 group-focus-within:text-brand-orange":"text-gray-400 group-focus-within:text-blue-600"}`,children:e.jsx(S,{size:18})}),e.jsx("input",{type:"email",className:`block w-full pl-11 pr-4 py-3.5 bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-xl focus:bg-white transition-all outline-none focus:ring-2 ${t?"focus:ring-brand-orange/20 focus:border-brand-orange":"focus:ring-blue-600/20 focus:border-blue-600"}`,placeholder:"ornek@email.com",value:i,onChange:s=>A(s.target.value),required:!0})]})]}),r==="register"&&t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 ml-1",children:"Ad"}),e.jsx("input",{type:"text",className:"block w-full px-4 py-3.5 bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-xl focus:bg-white transition-all outline-none focus:ring-2 focus:ring-brand-orange/20 focus:border-brand-orange",placeholder:"AdÄ±nÄ±z",value:f,onChange:s=>T(s.target.value),required:!0})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 ml-1",children:"Soyad"}),e.jsx("input",{type:"text",className:"block w-full px-4 py-3.5 bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-xl focus:bg-white transition-all outline-none focus:ring-2 focus:ring-brand-orange/20 focus:border-brand-orange",placeholder:"SoyadÄ±nÄ±z",value:h,onChange:s=>G(s.target.value),required:!0})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 ml-1",children:"Telefon"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none transition-colors text-gray-400 group-focus-within:text-brand-orange",children:e.jsx(S,{size:18})}),e.jsx("input",{type:"tel",className:"block w-full pl-11 pr-4 py-3.5 bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-xl focus:bg-white transition-all outline-none focus:ring-2 focus:ring-brand-orange/20 focus:border-brand-orange",placeholder:"05321234567",value:x,onChange:s=>$(s.target.value),pattern:"[0-9]{10,11}",required:!0})]})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5 ml-1",children:"Åifre"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none transition-colors ${t?"text-gray-400 group-focus-within:text-brand-orange":"text-gray-400 group-focus-within:text-blue-600"}`,children:e.jsx(C,{size:18})}),e.jsx("input",{type:p?"text":"password",className:`block w-full pl-11 pr-11 py-3.5 bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-xl focus:bg-white transition-all outline-none focus:ring-2 ${t?"focus:ring-brand-orange/20 focus:border-brand-orange":"focus:ring-blue-600/20 focus:border-blue-600"}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:n,onChange:s=>v(s.target.value)}),e.jsx("button",{type:"button",onClick:()=>L(!p),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 cursor-pointer",children:p?e.jsx(D,{size:18}):e.jsx(R,{size:18})})]})]}),r==="register"&&t&&e.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-start gap-3 pt-2",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx("input",{type:"checkbox",id:"terms",className:"w-4 h-4 rounded border-gray-300 text-brand-orange focus:ring-brand-orange"})}),e.jsxs("label",{htmlFor:"terms",className:"text-xs text-gray-500 leading-snug",children:[e.jsx("a",{href:"#",className:"font-bold text-brand-orange hover:underline",children:"KullanÄ±m KoÅŸullarÄ±"}),"'nÄ± ve ",e.jsx("a",{href:"#",className:"font-bold text-brand-orange hover:underline",children:"Gizlilik PolitikasÄ±"}),"'nÄ± okudum, onaylÄ±yorum."]})]}),r==="login"&&e.jsx("div",{className:"flex justify-end pt-1",children:e.jsx("button",{type:"button",className:`text-xs font-bold hover:underline ${t?"text-brand-orange":"text-blue-600"}`,children:"Åifremi Unuttum"})}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:N}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-xl text-xs",children:t?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold mb-1",children:"Test GiriÅŸi (MÃ¼ÅŸteri):"}),e.jsxs("p",{children:["Tel: ",E.customer.phone]}),e.jsxs("p",{children:["Åifre: ",E.customer.password]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold mb-1",children:"Partner AkÄ±ÅŸÄ±:"}),e.jsx("p",{children:"KayÄ±t sÄ±rasÄ±nda ÅŸifre belirleyin. Email doÄŸrulayÄ±n. Admin onayÄ± sonrasÄ± giriÅŸ yapabilirsiniz."})]})}),e.jsx("button",{type:"submit",disabled:w,className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all transform hover:-translate-y-0.5 active:scale-95 flex items-center justify-center gap-2 mt-6 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${t?"bg-gradient-to-r from-brand-orange to-brand-lightOrange shadow-orange-200":"bg-gradient-to-r from-blue-600 to-blue-500 shadow-blue-200"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Ä°ÅŸleniyor..."})]}):e.jsxs(e.Fragment,{children:[r==="login"?"GiriÅŸ Yap":"Hesap OluÅŸtur",e.jsx(H,{size:18})]})})]},r)})}),!t&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["HesabÄ±nÄ±z yok mu? ",e.jsx("button",{onClick:()=>u("/partner/kayit"),className:"text-blue-600 font-bold hover:underline",children:"BaÅŸvuru Formunu Doldurun"})]})})]})]})]})};export{V as default};

import{r as a,s as h,j as e,M as x,S,L as P,R as I,t as A,T as R}from"./index-BhOCebYO.js";import{R as Y}from"./refresh-cw-DHwWUDOt.js";import{R as u}from"./route-B7k3vZSR.js";import{E as q}from"./eye-C2COQMEk.js";import{C as G}from"./calendar-C3cH4QQP.js";import{C as J}from"./circle-check-DYVuFLmi.js";const X=()=>{const[o,p]=a.useState("areas"),[j,z]=a.useState([]),[t,T]=a.useState(null),[n,k]=a.useState([]),[c,L]=a.useState([]),[D,y]=a.useState(!0),[B,b]=a.useState(!1),[i,$]=a.useState(""),[m,E]=a.useState(""),[g,F]=a.useState("all");a.useEffect(()=>{f()},[]),a.useEffect(()=>{t&&H(t.id)},[t]);const f=async()=>{y(!0);try{const s=await h.partners.getAll();z(s.filter(r=>r.status==="active"))}catch(s){console.error("Partnerler yüklenemedi:",s)}finally{y(!1)}},H=async s=>{b(!0);try{const[r,l]=await Promise.all([h.serviceAreas.getByPartnerId(s),h.returnRoutes.getByPartnerId(s)]);k(r),L(l)}catch(r){console.error("Partner verileri yüklenemedi:",r)}finally{b(!1)}},v=j.filter(s=>{var l,d,C;return i===""||((l=s.name)==null?void 0:l.toLowerCase().includes(i.toLowerCase()))||((d=s.company_name)==null?void 0:d.toLowerCase().includes(i.toLowerCase()))||((C=s.email)==null?void 0:C.toLowerCase().includes(i.toLowerCase()))}),N=c.filter(s=>{const r=m===""||s.routeCities.some(d=>d.toLowerCase().includes(m.toLowerCase())),l=g==="all"||s.status===g;return r&&l}),w=s=>new Date(s).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),M=s=>{switch(s){case"active":return"bg-green-100 text-green-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_=s=>{switch(s){case"active":return"Aktif";case"completed":return"Tamamlandı";case"cancelled":return"İptal";default:return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Hizmet Bölgeleri & Rotalar"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Partner hizmet bölgelerini ve boş dönüş rotalarını yönetin"})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx(Y,{size:18}),"Yenile"]})]}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-xl w-fit",children:[e.jsxs("button",{onClick:()=>p("areas"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${o==="areas"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(x,{size:18}),"Hizmet Bölgeleri"]}),e.jsxs("button",{onClick:()=>p("routes"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${o==="routes"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(u,{size:18}),"Boş Dönüş Rotaları"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:s=>$(s.target.value),placeholder:"Partner ara...",className:"w-full pl-10 pr-4 py-2 border rounded-xl text-sm"})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:D?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(P,{className:"w-6 h-6 animate-spin text-brand-orange"})}):v.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Partner bulunamadı"}):v.map(s=>e.jsxs("button",{onClick:()=>T(s),className:`w-full p-4 text-left border-b border-gray-50 hover:bg-gray-50 transition-colors ${(t==null?void 0:t.id)===s.id?"bg-orange-50 border-l-4 border-l-brand-orange":""}`,children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.company_name||s.name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(x,{size:12}),s.city||"Şehir belirtilmemiş"]})]},s.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-gray-200 p-6",children:t?B?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(P,{className:"w-8 h-8 animate-spin text-brand-orange"})}):o==="areas"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[t.company_name||t.name," - Hizmet Bölgeleri"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[n.length," bölge"]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(x,{className:"w-10 h-10 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Henüz hizmet bölgesi tanımlanmamış"})]}):e.jsx("div",{className:"grid gap-3",children:n.map(s=>e.jsxs("div",{className:`p-4 rounded-xl border-2 ${s.isPrimary?"border-brand-orange bg-orange-50":"border-gray-100 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:s.city}),s.isPrimary&&e.jsx("span",{className:"text-xs font-bold text-brand-orange bg-white px-2 py-0.5 rounded-full",children:"Ana Bölge"})]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:s.isActive?"Aktif":"Pasif"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"İlçeler: "}),s.districts&&s.districts.length>0?s.districts.join(", "):"Tüm İl"]}),s.priceMultiplier!==1&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Fiyat Çarpanı: "}),s.priceMultiplier,"x"]})]},s.id))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[t.company_name||t.name," - Boş Dönüş Rotaları"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[c.length," rota"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(S,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:s=>E(s.target.value),placeholder:"Şehir ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm"})]}),e.jsxs("select",{value:g,onChange:s=>F(s.target.value),className:"px-4 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"cancelled",children:"İptal"})]})]}),N.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx(u,{className:"w-10 h-10 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Boş dönüş rotası bulunamadı"})]}):e.jsx("div",{className:"space-y-3",children:N.map(s=>e.jsxs("div",{className:"p-4 rounded-xl border border-gray-100 bg-white hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${M(s.status)}`,children:_(s.status)}),s.discountPercent>0&&e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full bg-green-100 text-green-700",children:["%",s.discountPercent," İndirimli"]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:w(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[e.jsx("span",{className:"font-bold text-gray-900",children:s.originCity}),s.routeCities.slice(1,-1).map((r,l)=>e.jsxs(I.Fragment,{children:[e.jsx(A,{size:14,className:"text-gray-300"}),e.jsx("span",{className:"text-gray-600",children:r})]},l)),e.jsx(A,{size:14,className:"text-gray-300"}),e.jsx("span",{className:"font-bold text-gray-900",children:s.destinationCity})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{size:14}),w(s.departureDate),s.departureTime&&` - ${s.departureTime}`]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{size:14}),s.vehiclePlate," (",s.vehicleType,")"]})]})]},s.id))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsx(q,{size:48,className:"mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Partner seçin"}),e.jsx("p",{className:"text-sm mt-1",children:"Detayları görüntülemek için sol listeden bir partner seçin"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Aktif Partner"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t?n.filter(s=>s.isActive).length:"-"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Aktif Bölge"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(u,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t?c.filter(s=>s.status==="active").length:"-"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Aktif Rota"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t?c.filter(s=>s.status==="active"&&s.discountPercent>0).length:"-"}),e.jsx("div",{className:"text-sm text-gray-500",children:"İndirimli Rota"})]})]})})]})]})};export{X as default};

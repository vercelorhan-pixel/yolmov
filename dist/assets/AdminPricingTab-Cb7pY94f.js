import{r,j as e}from"./index-CgBVxKrU.js";import{g as h,b as o}from"./priceCalculator-Bv36E9gB.js";import{R as m}from"./refresh-cw-CLzqTqf8.js";import{C as x}from"./circle-alert-3uv9Ie-A.js";import{D as j}from"./dollar-sign-Dq6zWqse.js";import{S as y}from"./save-CitM8xr1.js";import{C as f}from"./circle-check-DYa4kIAU.js";import{T as v}from"./trending-up-Bcj-dXlA.js";function L(){const[t,s]=r.useState(null),[u,n]=r.useState(!0),[d,c]=r.useState(!1),[i,a]=r.useState(null);r.useEffect(()=>{p()},[]);const p=async()=>{n(!0);try{const l=await h();s(l)}catch(l){console.error("Failed to load pricing config:",l)}finally{n(!1)}},b=async()=>{if(t){c(!0),a(null);try{const{error:l}=await window.supabase.from("pricing_config").update({base_fee:t.baseFee,short_distance_limit:t.shortDistanceLimit,medium_distance_limit:t.mediumDistanceLimit,short_distance_rate:t.shortDistanceRate,medium_distance_rate:t.mediumDistanceRate,long_distance_rate:t.longDistanceRate,night_multiplier:t.nightMultiplier,weekend_multiplier:t.weekendMultiplier,sedan_multiplier:t.sedanMultiplier,suv_multiplier:t.suvMultiplier,minibus_multiplier:t.minibusMultiplier,luxury_multiplier:t.luxuryMultiplier,broken_vehicle_multiplier:t.brokenVehicleMultiplier,ditch_multiplier:t.ditchMultiplier,accident_multiplier:t.accidentMultiplier,has_load_multiplier:t.hasLoadMultiplier,urgent_multiplier:t.urgentMultiplier,price_flexibility_percent:t.priceFlexibilityPercent,updated_by:"admin",notes:`GÃ¼ncelleme: ${new Date().toLocaleString("tr-TR")}`}).eq("id",t.id);if(l)throw l;o(),a({type:"success",text:"âœ… FiyatlandÄ±rma ayarlarÄ± gÃ¼ncellendi ve cache temizlendi!"}),setTimeout(()=>a(null),5e3)}catch(l){console.error("Save error:",l),a({type:"error",text:"âŒ Kaydetme hatasÄ±. LÃ¼tfen tekrar deneyin."})}finally{c(!1)}}},g=()=>{o(),a({type:"success",text:"ğŸ”„ FiyatlandÄ±rma cache temizlendi!"}),setTimeout(()=>a(null),3e3)};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-blue-600"})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(j,{className:"w-7 h-7 text-green-600"}),"FiyatlandÄ±rma YÃ¶netimi"]}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Dinamik fiyat hesaplama motorunun parametrelerini yÃ¶netin"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Cache Temizle"]}),e.jsxs("button",{onClick:b,disabled:d,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),d?"Kaydediliyor...":"Kaydet"]})]})]}),i&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-2 ${i.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[i.type==="success"?e.jsx(f,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:i.text})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-600"}),"Baz Ãœcretler ve Mesafe Limitleri"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"AÃ§Ä±lÄ±ÅŸ Ãœcreti (â‚º)"}),e.jsx("input",{type:"number",value:t.baseFee,onChange:l=>s({...t,baseFee:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Esneklik MarjÄ± (%)"}),e.jsx("input",{type:"number",value:t.priceFlexibilityPercent,onChange:l=>s({...t,priceFlexibilityPercent:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"KÄ±sa Mesafe Limiti (KM)"}),e.jsx("input",{type:"number",value:t.shortDistanceLimit,onChange:l=>s({...t,shortDistanceLimit:parseInt(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Orta Mesafe Limiti (KM)"}),e.jsx("input",{type:"number",value:t.mediumDistanceLimit,onChange:l=>s({...t,mediumDistanceLimit:parseInt(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:"ğŸ“ KM BaÅŸÄ± Ãœcretler"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"KÄ±sa Mesafe (â‚º/KM)"}),e.jsx("input",{type:"number",value:t.shortDistanceRate,onChange:l=>s({...t,shortDistanceRate:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["0-",t.shortDistanceLimit," KM"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Orta Mesafe (â‚º/KM)"}),e.jsx("input",{type:"number",value:t.mediumDistanceRate,onChange:l=>s({...t,mediumDistanceRate:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.shortDistanceLimit,"-",t.mediumDistanceLimit," KM"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Uzun Mesafe (â‚º/KM)"}),e.jsx("input",{type:"number",value:t.longDistanceRate,onChange:l=>s({...t,longDistanceRate:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.mediumDistanceLimit,"+ KM"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:"â° Zaman Ã‡arpanlarÄ±"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Gece Hizmeti (22:00-06:00)"}),e.jsx("input",{type:"number",value:t.nightMultiplier,onChange:l=>s({...t,nightMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mevcut: ",((t.nightMultiplier-1)*100).toFixed(0),"% zam"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Hafta Sonu (Cumartesi/Pazar)"}),e.jsx("input",{type:"number",value:t.weekendMultiplier,onChange:l=>s({...t,weekendMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mevcut: ",((t.weekendMultiplier-1)*100).toFixed(0),"% zam"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:"ğŸš— AraÃ§ Tipi Ã‡arpanlarÄ±"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Sedan"}),e.jsx("input",{type:"number",value:t.sedanMultiplier,onChange:l=>s({...t,sedanMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"SUV/4x4"}),e.jsx("input",{type:"number",value:t.suvMultiplier,onChange:l=>s({...t,suvMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.suvMultiplier-1)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"MinibÃ¼s"}),e.jsx("input",{type:"number",value:t.minibusMultiplier,onChange:l=>s({...t,minibusMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.minibusMultiplier-1)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"LÃ¼ks AraÃ§"}),e.jsx("input",{type:"number",value:t.luxuryMultiplier,onChange:l=>s({...t,luxuryMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.luxuryMultiplier-1)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:"âš ï¸ AraÃ§ Durumu Ã‡arpanlarÄ±"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"ArÄ±zalÄ± AraÃ§"}),e.jsx("input",{type:"number",value:t.brokenVehicleMultiplier,onChange:l=>s({...t,brokenVehicleMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.brokenVehicleMultiplier-1)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Kaza Durumu"}),e.jsx("input",{type:"number",value:t.accidentMultiplier,onChange:l=>s({...t,accidentMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.accidentMultiplier-1)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Åarampole DÃ¼ÅŸme"}),e.jsx("input",{type:"number",value:t.ditchMultiplier,onChange:l=>s({...t,ditchMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.ditchMultiplier-1)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:"ğŸ”§ Ek Hizmet Ã‡arpanlarÄ±"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"YÃ¼k TaÅŸÄ±ma"}),e.jsx("input",{type:"number",value:t.hasLoadMultiplier,onChange:l=>s({...t,hasLoadMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.hasLoadMultiplier-1)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Acil Hizmet (Hemen)"}),e.jsx("input",{type:"number",value:t.urgentMultiplier,onChange:l=>s({...t,urgentMultiplier:parseFloat(l.target.value)}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg",step:"0.05"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",((t.urgentMultiplier-1)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["ğŸ’¡ ",e.jsx("strong",{children:"Bilgi:"})," YapÄ±lan deÄŸiÅŸiklikler tÃ¼m yeni fiyat hesaplamalarÄ±nda anÄ±nda etkili olur. Cache temizleme, mevcut Ã¶nbelleklenmiÅŸ fiyatlarÄ± sÄ±fÄ±rlar."]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Son GÃ¼ncelleme: ",new Date(t.updatedAt).toLocaleString("tr-TR")]})]})]}):e.jsxs("div",{className:"text-center p-8",children:[e.jsx(x,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:"FiyatlandÄ±rma konfigÃ¼rasyonu yÃ¼klenemedi."})]})}export{L as AdminPricingTab,L as default};

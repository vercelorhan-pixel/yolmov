import{u as y,r,o as n,j as e}from"./index-C-KZUVFs.js";import{L as g}from"./lock-UKK6pzGG.js";const w=()=>{const m=y(),[a,b]=r.useState(""),[i,f]=r.useState(""),[p,o]=r.useState("idle"),[d,l]=r.useState(""),[u,c]=r.useState(!1);r.useEffect(()=>{const{data:t}=n.auth.onAuthStateChange(s=>{s==="PASSWORD_RECOVERY"&&o("recover")});return n.auth.getSession().then(({data:s})=>{s.session&&o("recover")}).catch(()=>{}),()=>{t.subscription.unsubscribe()}},[]);const h=async t=>{if(t&&t.preventDefault(),l(""),!a||a.length<6){l("Şifre en az 6 karakter olmalıdır");return}if(a!==i){l("Şifreler eşleşmiyor");return}c(!0);try{const{data:s,error:x}=await n.auth.updateUser({password:a});if(x)throw x;alert("Şifre oluşturma başarılı!"),m("/partner")}catch(s){l(s.message||"Şifre oluşturma başarısız")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(g,{size:20})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Şifre Oluştur"})]}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"E-postanıza gelen aktivasyon bağlantısını açtınız. Lütfen yeni şifrenizi belirleyin."}),p!=="recover"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 p-3 rounded-lg text-sm mb-4",children:"Bağlantı geçerliyse otomatik olarak etkinleşir. Eğer sorun yaşıyorsanız e-postanızdaki linke yeniden tıklayın."}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm mb-4",children:d}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Yeni Şifre"}),e.jsx("input",{type:"password",className:"mt-1 w-full px-4 py-3 rounded-xl border border-slate-200",value:a,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Şifre Tekrar"}),e.jsx("input",{type:"password",className:"mt-1 w-full px-4 py-3 rounded-xl border border-slate-200",value:i,onChange:t=>f(t.target.value)})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold disabled:opacity-50",children:u?"İşleniyor...":"Şifreyi Kaydet"})]})]})})};export{w as default};

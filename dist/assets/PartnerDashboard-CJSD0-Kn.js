import{c as ws,t as Ki,r as o,j as e,m as H,v as ie,P as ue,H as jt,A as pe,X as ne,w as ke,s as E,x as Te,C as ce,S as ls,d as Ps,M as Ne,y as rs,z as be,l as Na,T as ee,R as Vi,E as yt,a as Oe,h as je,G as cr,I as Gi,J as Bl,K as ca,N as Ml,O as qs,B as Yi,e as Nt,Q as Me,W as dr,q as xr,u as qi,V as Ui,Y as Ji}from"./index-Bn8Q3BpW.js";import{F as xe}from"./file-text-BpDBG9mG.js";import{C as ye}from"./circle-check-big-CqcM81E1.js";import{D as js}from"./dollar-sign-Bf2m5oMO.js";import{F as mr}from"./filter-CM8BCxMB.js";import{T as Ea}from"./trending-up-Cb2cPmhS.js";import{C as Ba}from"./credit-card-hvE0CsZZ.js";import{D as ts}from"./download-Cz1TmO8w.js";import{E as Ds}from"./eye-BAKrK0sx.js";import{U as Ts,i as Qe,c as es,a as ss,u as Wi,T as Xi}from"./useToast-CMlZ-U3d.js";import{T as Ma}from"./trash-2-Bc35tyai.js";import{P as as}from"./plus-2Jnc3o5h.js";import{C as St}from"./circle-alert-CZ2Yj6Nd.js";import{C as ur}from"./calendar-D1b0Y_--.js";import{P as gs}from"./pen-CtDx7eJ1.js";import{P as Zi}from"./percent-DZcpiFjj.js";import{c as Rl,g as Ol,s as Ll}from"./showcaseSanitizer-CU8VnsaU.js";import{S as vt,H as hr,W as wt,F as va}from"./wallet-Tjg30cx9.js";import{Z as da}from"./zap-CarEtdGw.js";import{S as wa}from"./save-DQpAmNA1.js";import{S as re}from"./star-PgN-DMKj.js";import{S as pr}from"./shield-BMnRQou0.js";import{A as Qi}from"./award-wKMnLWc1.js";import{I as Ae}from"./info-Cpj1Ov-g.js";import{P as $l}from"./phone-missed-UtB6_wLb.js";import{C as de}from"./camera-0cmzxOS5.js";import{S as Is}from"./send-TxbcjFsW.js";import{C as eo}from"./circle-help-ezEH5GJv.js";import{C as As}from"./circle-check-9KAPtrfx.js";import{L as br}from"./lock-ij3f4Lxo.js";import{B as fr}from"./building-W4VAz1vY.js";import{M as so}from"./map-Sif122Ob.js";import{R as ka}from"./route-_bOphmBL.js";import{M as to}from"./mail-CrakdI5j.js";import{L as ao}from"./log-out-dkc2aDMM.js";import"./image-B6MDZTmA.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ws("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=ws("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ws("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ws("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=ws("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ws("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ws("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),io=({variant:s="primary",size:t="md",className:a="",label:n="Destek HattÄ±nÄ± Ara"})=>{const{callSupport:i,callStatus:r,error:h}=Ki(),[u,b]=o.useState(!1),[m,A]=o.useState(null),[B,x]=o.useState(!1),S=()=>{try{const _=localStorage.getItem("yolmov_partner");if(_){const O=JSON.parse(_);return{id:O.id||O.partner_id,name:O.company_name||O.name||"Partner",phone:O.phone||""}}}catch{}return null},k=async()=>{if(!S()){A("Partner bilgileri bulunamadÄ±. LÃ¼tfen tekrar giriÅŸ yapÄ±n.");return}b(!0),A(null),x(!1);try{console.log("ðŸ“ž [PartnerCallSupport] Starting support call..."),await i(),console.log("âœ… [PartnerCallSupport] Call initiated successfully")}catch(O){console.error("âŒ [PartnerCallSupport] Call start error:",O),A(O.message||"BaÄŸlantÄ± kurulamadÄ±. LÃ¼tfen tekrar deneyin.")}finally{b(!1)}},z={sm:"px-3 py-2 text-sm",md:"px-4 py-3",lg:"px-6 py-4 text-lg"},P={primary:"bg-purple-600 text-white hover:bg-purple-700 shadow-lg shadow-purple-200",secondary:"bg-white text-purple-600 border-2 border-purple-600 hover:bg-purple-50"},M=r==="calling"||r==="connected"||r==="ringing";return e.jsxs(e.Fragment,{children:[e.jsx(H.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(!0),disabled:u||M,className:`
          ${z[t]}
          ${P[s]}
          ${a}
          rounded-xl font-bold flex items-center justify-center gap-2
          disabled:opacity-50 disabled:cursor-not-allowed
          transition-all duration-200
        `,children:u?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"}),e.jsx("span",{children:"BaÄŸlanÄ±yor..."})]}):M?e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:18,className:"animate-pulse"}),e.jsx("span",{children:"GÃ¶rÃ¼ÅŸmede"})]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{size:18}),e.jsx("span",{children:n})]})}),e.jsx(pe,{children:B&&e.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",onClick:()=>x(!1),children:e.jsxs(H.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",onClick:_=>_.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(jt,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Partner Destek HattÄ±"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Yolmov operasyon ekibi"})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:e.jsx(ne,{size:18})})]})}),e.jsxs("div",{className:"p-6",children:[m&&e.jsxs(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[e.jsx(St,{size:20,className:"text-red-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:m})]}),e.jsx("div",{className:"bg-purple-50 rounded-xl p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-purple-800",children:[e.jsx("strong",{children:"Partner Destek HattÄ±"}),"'nÄ± arayarak operasyonel sorunlarÄ±nÄ±z, mÃ¼ÅŸteri ÅŸikayetleri veya teknik konularda yardÄ±m alabilirsiniz."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:"Ä°ptal"}),e.jsx(H.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,disabled:u,className:"flex-1 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"}),e.jsx("span",{children:"BaÄŸlanÄ±yor..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:18}),e.jsx("span",{children:"Åžimdi Ara"})]})})]})]})]})})})]})},oo=()=>{};var Fl={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=function(s){const t=[];let a=0;for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);i<128?t[a++]=i:i<2048?(t[a++]=i>>6|192,t[a++]=i&63|128):(i&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++n)&1023),t[a++]=i>>18|240,t[a++]=i>>12&63|128,t[a++]=i>>6&63|128,t[a++]=i&63|128):(t[a++]=i>>12|224,t[a++]=i>>6&63|128,t[a++]=i&63|128)}return t},co=function(s){const t=[];let a=0,n=0;for(;a<s.length;){const i=s[a++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=s[a++];t[n++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=s[a++],h=s[a++],u=s[a++],b=((i&7)<<18|(r&63)<<12|(h&63)<<6|u&63)-65536;t[n++]=String.fromCharCode(55296+(b>>10)),t[n++]=String.fromCharCode(56320+(b&1023))}else{const r=s[a++],h=s[a++];t[n++]=String.fromCharCode((i&15)<<12|(r&63)<<6|h&63)}}return t.join("")},jr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<s.length;i+=3){const r=s[i],h=i+1<s.length,u=h?s[i+1]:0,b=i+2<s.length,m=b?s[i+2]:0,A=r>>2,B=(r&3)<<4|u>>4;let x=(u&15)<<2|m>>6,S=m&63;b||(S=64,h||(x=64)),n.push(a[A],a[B],a[x],a[S])}return n.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(gr(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):co(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<s.length;){const r=a[s.charAt(i++)],u=i<s.length?a[s.charAt(i)]:0;++i;const m=i<s.length?a[s.charAt(i)]:64;++i;const B=i<s.length?a[s.charAt(i)]:64;if(++i,r==null||u==null||m==null||B==null)throw new xo;const x=r<<2|u>>4;if(n.push(x),m!==64){const S=u<<4&240|m>>2;if(n.push(S),B!==64){const k=m<<6&192|B;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class xo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mo=function(s){const t=gr(s);return jr.encodeByteArray(t,!0)},yr=function(s){return mo(s).replace(/\./g,"")},uo=function(s){try{return jr.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=()=>ho().__FIREBASE_DEFAULTS__,bo=()=>{if(typeof process>"u"||typeof Fl>"u")return;const s=Fl.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fo=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&uo(s[1]);return t&&JSON.parse(t)},go=()=>{try{return oo()||po()||bo()||fo()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Nr=()=>{var s;return(s=go())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,n)=>{a?this.reject(a):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,n))}}}function vr(){try{return typeof indexedDB=="object"}catch{return!1}}function wr(){return new Promise((s,t)=>{try{let a=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),a||self.indexedDB.deleteDatabase(n),s(!0)},i.onupgradeneeded=()=>{a=!1},i.onerror=()=>{var r;t(((r=i.error)==null?void 0:r.message)||"")}}catch(a){t(a)}})}function yo(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="FirebaseError";class Es extends Error{constructor(t,a,n){super(a),this.code=t,this.customData=n,this.name=No,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}}class Ct{constructor(t,a,n){this.service=t,this.serviceName=a,this.errors=n}create(t,...a){const n=a[0]||{},i=`${this.service}/${t}`,r=this.errors[t],h=r?vo(r,n):"Error",u=`${this.serviceName}: ${h} (${i}).`;return new Es(i,u,n)}}function vo(s,t){return s.replace(wo,(a,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const wo=/\{\$([^}]+)}/g;function Sa(s,t){if(s===t)return!0;const a=Object.keys(s),n=Object.keys(t);for(const i of a){if(!n.includes(i))return!1;const r=s[i],h=t[i];if(Hl(r)&&Hl(h)){if(!Sa(r,h))return!1}else if(r!==h)return!1}for(const i of n)if(!a.includes(i))return!1;return!0}function Hl(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s){return s&&s._delegate?s._delegate:s}class os{constructor(t,a,n){this.name=t,this.instanceFactory=a,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const n=new jo;if(this.instancesDeferred.set(a,n),this.isInitialized(a)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:a});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(So(t))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[a,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(a);try{const r=this.getOrInitializeService({instanceIdentifier:i});n.resolve(r)}catch{}}}}clearInstance(t=bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bs){return this.instances.has(t)}getOptions(t=bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:a});for(const[r,h]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(r);n===u&&h.resolve(i)}return i}onInit(t,a){const n=this.normalizeInstanceIdentifier(a),i=this.onInitCallbacks.get(n)??new Set;i.add(t),this.onInitCallbacks.set(n,i);const r=this.instances.get(n);return r&&t(r,n),()=>{i.delete(t)}}invokeOnInitCallbacks(t,a){const n=this.onInitCallbacks.get(a);if(n)for(const i of n)try{i(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_o(t),options:a}),this.instances.set(t,n),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=bs){return this.component?this.component.multipleInstances?t:bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _o(s){return s===bs?void 0:s}function So(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new ko(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(J||(J={}));const Co={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},To=J.INFO,Ao={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Do=(s,t,...a)=>{if(t<s.logLevel)return;const n=new Date().toISOString(),i=Ao[t];if(i)console[i](`[${n}]  ${s.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Io{constructor(t){this.name=t,this._logLevel=To,this._logHandler=Do,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in J))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Co[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...t),this._logHandler(this,J.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...t),this._logHandler(this,J.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,J.INFO,...t),this._logHandler(this,J.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,J.WARN,...t),this._logHandler(this,J.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...t),this._logHandler(this,J.ERROR,...t)}}const Po=(s,t)=>t.some(a=>s instanceof a);let Kl,Vl;function Eo(){return Kl||(Kl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bo(){return Vl||(Vl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _r=new WeakMap,za=new WeakMap,Sr=new WeakMap,xa=new WeakMap,Ra=new WeakMap;function Mo(s){const t=new Promise((a,n)=>{const i=()=>{s.removeEventListener("success",r),s.removeEventListener("error",h)},r=()=>{a(Le(s.result)),i()},h=()=>{n(s.error),i()};s.addEventListener("success",r),s.addEventListener("error",h)});return t.then(a=>{a instanceof IDBCursor&&_r.set(a,s)}).catch(()=>{}),Ra.set(t,s),t}function Ro(s){if(za.has(s))return;const t=new Promise((a,n)=>{const i=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",h),s.removeEventListener("abort",h)},r=()=>{a(),i()},h=()=>{n(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",r),s.addEventListener("error",h),s.addEventListener("abort",h)});za.set(s,t)}let Ca={get(s,t,a){if(s instanceof IDBTransaction){if(t==="done")return za.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Sr.get(s);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Le(s[t])},set(s,t,a){return s[t]=a,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Oo(s){Ca=s(Ca)}function Lo(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const n=s.call(ma(this),t,...a);return Sr.set(n,t.sort?t.sort():[t]),Le(n)}:Bo().includes(s)?function(...t){return s.apply(ma(this),t),Le(_r.get(this))}:function(...t){return Le(s.apply(ma(this),t))}}function $o(s){return typeof s=="function"?Lo(s):(s instanceof IDBTransaction&&Ro(s),Po(s,Eo())?new Proxy(s,Ca):s)}function Le(s){if(s instanceof IDBRequest)return Mo(s);if(xa.has(s))return xa.get(s);const t=$o(s);return t!==s&&(xa.set(s,t),Ra.set(t,s)),t}const ma=s=>Ra.get(s);function Tt(s,t,{blocked:a,upgrade:n,blocking:i,terminated:r}={}){const h=indexedDB.open(s,t),u=Le(h);return n&&h.addEventListener("upgradeneeded",b=>{n(Le(h.result),b.oldVersion,b.newVersion,Le(h.transaction),b)}),a&&h.addEventListener("blocked",b=>a(b.oldVersion,b.newVersion,b)),u.then(b=>{r&&b.addEventListener("close",()=>r()),i&&b.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}function ua(s,{blocked:t}={}){const a=indexedDB.deleteDatabase(s);return t&&a.addEventListener("blocked",n=>t(n.oldVersion,n)),Le(a).then(()=>{})}const Fo=["get","getKey","getAll","getAllKeys","count"],Ho=["put","add","delete","clear"],ha=new Map;function Gl(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(ha.get(t))return ha.get(t);const a=t.replace(/FromIndex$/,""),n=t!==a,i=Ho.includes(a);if(!(a in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Fo.includes(a)))return;const r=async function(h,...u){const b=this.transaction(h,i?"readwrite":"readonly");let m=b.store;return n&&(m=m.index(u.shift())),(await Promise.all([m[a](...u),i&&b.done]))[0]};return ha.set(t,r),r}Oo(s=>({...s,get:(t,a,n)=>Gl(t,a)||s.get(t,a,n),has:(t,a)=>!!Gl(t,a)||s.has(t,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Vo(a)){const n=a.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(a=>a).join(" ")}}function Vo(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ta="@firebase/app",Yl="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e=new Io("@firebase/app"),Go="@firebase/app-compat",Yo="@firebase/analytics-compat",qo="@firebase/analytics",Uo="@firebase/app-check-compat",Jo="@firebase/app-check",Wo="@firebase/auth",Xo="@firebase/auth-compat",Zo="@firebase/database",Qo="@firebase/data-connect",ec="@firebase/database-compat",sc="@firebase/functions",tc="@firebase/functions-compat",ac="@firebase/installations",lc="@firebase/installations-compat",rc="@firebase/messaging",nc="@firebase/messaging-compat",ic="@firebase/performance",oc="@firebase/performance-compat",cc="@firebase/remote-config",dc="@firebase/remote-config-compat",xc="@firebase/storage",mc="@firebase/storage-compat",uc="@firebase/firestore",hc="@firebase/ai",pc="@firebase/firestore-compat",bc="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]",fc={[Ta]:"fire-core",[Go]:"fire-core-compat",[qo]:"fire-analytics",[Yo]:"fire-analytics-compat",[Jo]:"fire-app-check",[Uo]:"fire-app-check-compat",[Wo]:"fire-auth",[Xo]:"fire-auth-compat",[Zo]:"fire-rtdb",[Qo]:"fire-data-connect",[ec]:"fire-rtdb-compat",[sc]:"fire-fn",[tc]:"fire-fn-compat",[ac]:"fire-iid",[lc]:"fire-iid-compat",[rc]:"fire-fcm",[nc]:"fire-fcm-compat",[ic]:"fire-perf",[oc]:"fire-perf-compat",[cc]:"fire-rc",[dc]:"fire-rc-compat",[xc]:"fire-gcs",[mc]:"fire-gcs-compat",[uc]:"fire-fst",[pc]:"fire-fst-compat",[hc]:"fire-vertex","fire-js":"fire-js",[bc]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=new Map,gc=new Map,Da=new Map;function ql(s,t){try{s.container.addComponent(t)}catch(a){$e.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,a)}}function ys(s){const t=s.name;if(Da.has(t))return $e.debug(`There were multiple attempts to register component ${t}.`),!1;Da.set(t,s);for(const a of kt.values())ql(a,s);for(const a of gc.values())ql(a,s);return!0}function Oa(s,t){const a=s.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),s.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new Ct("app","Firebase",jc);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,a,n){this._isDeleted=!1,this._options={...t},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}function zr(s,t={}){let a=s;typeof t!="object"&&(t={name:t});const n={name:Aa,automaticDataCollectionEnabled:!0,...t},i=n.name;if(typeof i!="string"||!i)throw ns.create("bad-app-name",{appName:String(i)});if(a||(a=Nr()),!a)throw ns.create("no-options");const r=kt.get(i);if(r){if(Sa(a,r.options)&&Sa(n,r.config))return r;throw ns.create("duplicate-app",{appName:i})}const h=new zo(i);for(const b of Da.values())h.addComponent(b);const u=new yc(a,n,h);return kt.set(i,u),u}function Nc(s=Aa){const t=kt.get(s);if(!t&&s===Aa&&Nr())return zr();if(!t)throw ns.create("no-app",{appName:s});return t}function is(s,t,a){let n=fc[s]??s;a&&(n+=`-${a}`);const i=n.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const h=[`Unable to register library "${n}" with version "${t}":`];i&&h.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&r&&h.push("and"),r&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$e.warn(h.join(" "));return}ys(new os(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="firebase-heartbeat-database",wc=1,Us="firebase-heartbeat-store";let pa=null;function Cr(){return pa||(pa=Tt(vc,wc,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Us)}catch(a){console.warn(a)}}}}).catch(s=>{throw ns.create("idb-open",{originalErrorMessage:s.message})})),pa}async function kc(s){try{const a=(await Cr()).transaction(Us),n=await a.objectStore(Us).get(Tr(s));return await a.done,n}catch(t){if(t instanceof Es)$e.warn(t.message);else{const a=ns.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$e.warn(a.message)}}}async function Ul(s,t){try{const n=(await Cr()).transaction(Us,"readwrite");await n.objectStore(Us).put(t,Tr(s)),await n.done}catch(a){if(a instanceof Es)$e.warn(a.message);else{const n=ns.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});$e.warn(n.message)}}}function Tr(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=1024,Sc=30;class zc{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new Tc(a),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,a;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jl();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)==null?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(h=>h.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>Sc){const h=Ac(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){$e.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=Jl(),{heartbeatsToSend:n,unsentEntries:i}=Cc(this._heartbeatsCache.heartbeats),r=yr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=a,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(a){return $e.warn(a),""}}}function Jl(){return new Date().toISOString().substring(0,10)}function Cc(s,t=_c){const a=[];let n=s.slice();for(const i of s){const r=a.find(h=>h.agent===i.agent);if(r){if(r.dates.push(i.date),Wl(a)>t){r.dates.pop();break}}else if(a.push({agent:i.agent,dates:[i.date]}),Wl(a)>t){a.pop();break}n=n.slice(1)}return{heartbeatsToSend:a,unsentEntries:n}}class Tc{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vr()?wr().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await kc(this.app);return a!=null&&a.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ul(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ul(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Wl(s){return yr(JSON.stringify({version:2,heartbeats:s})).length}function Ac(s){if(s.length===0)return-1;let t=0,a=s[0].date;for(let n=1;n<s.length;n++)s[n].date<a&&(a=s[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(s){ys(new os("platform-logger",t=>new Ko(t),"PRIVATE")),ys(new os("heartbeat",t=>new zc(t),"PRIVATE")),is(Ta,Yl,s),is(Ta,Yl,"esm2020"),is("fire-js","")}Dc("");var Ic="firebase",Pc="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(Ic,Pc,"app");const Ar="@firebase/installations",La="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=1e4,Ir=`w:${La}`,Pr="FIS_v2",Ec="https://firebaseinstallations.googleapis.com/v1",Bc=3600*1e3,Mc="installations",Rc="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ns=new Ct(Mc,Rc,Oc);function Er(s){return s instanceof Es&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br({projectId:s}){return`${Ec}/projects/${s}/installations`}function Mr(s){return{token:s.token,requestStatus:2,expiresIn:$c(s.expiresIn),creationTime:Date.now()}}async function Rr(s,t){const n=(await t.json()).error;return Ns.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Or({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Lc(s,{refreshToken:t}){const a=Or(s);return a.append("Authorization",Fc(t)),a}async function Lr(s){const t=await s();return t.status>=500&&t.status<600?s():t}function $c(s){return Number(s.replace("s","000"))}function Fc(s){return`${Pr} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc({appConfig:s,heartbeatServiceProvider:t},{fid:a}){const n=Br(s),i=Or(s),r=t.getImmediate({optional:!0});if(r){const m=await r.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const h={fid:a,authVersion:Pr,appId:s.appId,sdkVersion:Ir},u={method:"POST",headers:i,body:JSON.stringify(h)},b=await Lr(()=>fetch(n,u));if(b.ok){const m=await b.json();return{fid:m.fid||a,registrationStatus:2,refreshToken:m.refreshToken,authToken:Mr(m.authToken)}}else throw await Rr("Create Installation",b)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=/^[cdef][\w-]{21}$/,Ia="";function Gc(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const a=Yc(s);return Vc.test(a)?a:Ia}catch{return Ia}}function Yc(s){return Kc(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Map;function Hr(s,t){const a=At(s);Kr(a,t),qc(a,t)}function Kr(s,t){const a=Fr.get(s);if(a)for(const n of a)n(t)}function qc(s,t){const a=Uc();a&&a.postMessage({key:s,fid:t}),Jc()}let fs=null;function Uc(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=s=>{Kr(s.data.key,s.data.fid)}),fs}function Jc(){Fr.size===0&&fs&&(fs.close(),fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="firebase-installations-database",Xc=1,vs="firebase-installations-store";let ba=null;function $a(){return ba||(ba=Tt(Wc,Xc,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(vs)}}})),ba}async function _t(s,t){const a=At(s),i=(await $a()).transaction(vs,"readwrite"),r=i.objectStore(vs),h=await r.get(a);return await r.put(t,a),await i.done,(!h||h.fid!==t.fid)&&Hr(s,t.fid),t}async function Vr(s){const t=At(s),n=(await $a()).transaction(vs,"readwrite");await n.objectStore(vs).delete(t),await n.done}async function Dt(s,t){const a=At(s),i=(await $a()).transaction(vs,"readwrite"),r=i.objectStore(vs),h=await r.get(a),u=t(h);return u===void 0?await r.delete(a):await r.put(u,a),await i.done,u&&(!h||h.fid!==u.fid)&&Hr(s,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(s){let t;const a=await Dt(s.appConfig,n=>{const i=Zc(n),r=Qc(s,i);return t=r.registrationPromise,r.installationEntry});return a.fid===Ia?{installationEntry:await t}:{installationEntry:a,registrationPromise:t}}function Zc(s){const t=s||{fid:Gc(),registrationStatus:0};return Gr(t)}function Qc(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ns.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const a={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=ed(s,a);return{installationEntry:a,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:sd(s)}:{installationEntry:t}}async function ed(s,t){try{const a=await Hc(s,t);return _t(s.appConfig,a)}catch(a){throw Er(a)&&a.customData.serverCode===409?await Vr(s.appConfig):await _t(s.appConfig,{fid:t.fid,registrationStatus:0}),a}}async function sd(s){let t=await Xl(s.appConfig);for(;t.registrationStatus===1;)await $r(100),t=await Xl(s.appConfig);if(t.registrationStatus===0){const{installationEntry:a,registrationPromise:n}=await Fa(s);return n||a}return t}function Xl(s){return Dt(s,t=>{if(!t)throw Ns.create("installation-not-found");return Gr(t)})}function Gr(s){return td(s)?{fid:s.fid,registrationStatus:0}:s}function td(s){return s.registrationStatus===1&&s.registrationTime+Dr<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad({appConfig:s,heartbeatServiceProvider:t},a){const n=ld(s,a),i=Lc(s,a),r=t.getImmediate({optional:!0});if(r){const m=await r.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const h={installation:{sdkVersion:Ir,appId:s.appId}},u={method:"POST",headers:i,body:JSON.stringify(h)},b=await Lr(()=>fetch(n,u));if(b.ok){const m=await b.json();return Mr(m)}else throw await Rr("Generate Auth Token",b)}function ld(s,{fid:t}){return`${Br(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(s,t=!1){let a;const n=await Dt(s.appConfig,r=>{if(!Yr(r))throw Ns.create("not-registered");const h=r.authToken;if(!t&&id(h))return r;if(h.requestStatus===1)return a=rd(s,t),r;{if(!navigator.onLine)throw Ns.create("app-offline");const u=cd(r);return a=nd(s,u),u}});return a?await a:n.authToken}async function rd(s,t){let a=await Zl(s.appConfig);for(;a.authToken.requestStatus===1;)await $r(100),a=await Zl(s.appConfig);const n=a.authToken;return n.requestStatus===0?Ha(s,t):n}function Zl(s){return Dt(s,t=>{if(!Yr(t))throw Ns.create("not-registered");const a=t.authToken;return dd(a)?{...t,authToken:{requestStatus:0}}:t})}async function nd(s,t){try{const a=await ad(s,t),n={...t,authToken:a};return await _t(s.appConfig,n),a}catch(a){if(Er(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await Vr(s.appConfig);else{const n={...t,authToken:{requestStatus:0}};await _t(s.appConfig,n)}throw a}}function Yr(s){return s!==void 0&&s.registrationStatus===2}function id(s){return s.requestStatus===2&&!od(s)}function od(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+Bc}function cd(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function dd(s){return s.requestStatus===1&&s.requestTime+Dr<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(s){const t=s,{installationEntry:a,registrationPromise:n}=await Fa(t);return n?n.catch(console.error):Ha(t).catch(console.error),a.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(s,t=!1){const a=s;return await ud(a),(await Ha(a,t)).token}async function ud(s){const{registrationPromise:t}=await Fa(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(s){if(!s||!s.options)throw fa("App Configuration");if(!s.name)throw fa("App Name");const t=["projectId","apiKey","appId"];for(const a of t)if(!s.options[a])throw fa(a);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function fa(s){return Ns.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="installations",pd="installations-internal",bd=s=>{const t=s.getProvider("app").getImmediate(),a=hd(t),n=Oa(t,"heartbeat");return{app:t,appConfig:a,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},fd=s=>{const t=s.getProvider("app").getImmediate(),a=Oa(t,qr).getImmediate();return{getId:()=>xd(a),getToken:i=>md(a,i)}};function gd(){ys(new os(qr,bd,"PUBLIC")),ys(new os(pd,fd,"PRIVATE"))}gd();is(Ar,La);is(Ar,La,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="/firebase-messaging-sw.js",yd="/firebase-cloud-messaging-push-scope",Ur="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nd="https://fcmregistrations.googleapis.com/v1",Jr="google.c.a.c_id",vd="google.c.a.c_l",wd="google.c.a.ts",kd="google.c.a.e",Ql=1e4;var er;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(er||(er={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Js;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Js||(Js={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(s){const t=new Uint8Array(s);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _d(s){const t="=".repeat((4-s.length%4)%4),a=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(a),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="fcm_token_details_db",Sd=5,sr="fcm_token_object_Store";async function zd(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(r=>r.name).includes(ga))return null;let t=null;return(await Tt(ga,Sd,{upgrade:async(n,i,r,h)=>{if(i<2||!n.objectStoreNames.contains(sr))return;const u=h.objectStore(sr),b=await u.index("fcmSenderId").get(s);if(await u.clear(),!!b){if(i===2){const m=b;if(!m.auth||!m.p256dh||!m.endpoint)return;t={token:m.fcmToken,createTime:m.createTime??Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:Re(m.vapidKey)}}}else if(i===3){const m=b;t={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Re(m.auth),p256dh:Re(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Re(m.vapidKey)}}}else if(i===4){const m=b;t={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Re(m.auth),p256dh:Re(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Re(m.vapidKey)}}}}}})).close(),await ua(ga),await ua("fcm_vapid_details_db"),await ua("undefined"),Cd(t)?t:null}function Cd(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:t}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="firebase-messaging-database",Ad=1,Ws="firebase-messaging-store";let ja=null;function Wr(){return ja||(ja=Tt(Td,Ad,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Ws)}}})),ja}async function Dd(s){const t=Xr(s),n=await(await Wr()).transaction(Ws).objectStore(Ws).get(t);if(n)return n;{const i=await zd(s.appConfig.senderId);if(i)return await Ka(s,i),i}}async function Ka(s,t){const a=Xr(s),i=(await Wr()).transaction(Ws,"readwrite");return await i.objectStore(Ws).put(t,a),await i.done,t}function Xr({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},he=new Ct("messaging","Messaging",Id);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(s,t){const a=await Ga(s),n=Zr(t),i={method:"POST",headers:a,body:JSON.stringify(n)};let r;try{r=await(await fetch(Va(s.appConfig),i)).json()}catch(h){throw he.create("token-subscribe-failed",{errorInfo:h==null?void 0:h.toString()})}if(r.error){const h=r.error.message;throw he.create("token-subscribe-failed",{errorInfo:h})}if(!r.token)throw he.create("token-subscribe-no-token");return r.token}async function Ed(s,t){const a=await Ga(s),n=Zr(t.subscriptionOptions),i={method:"PATCH",headers:a,body:JSON.stringify(n)};let r;try{r=await(await fetch(`${Va(s.appConfig)}/${t.token}`,i)).json()}catch(h){throw he.create("token-update-failed",{errorInfo:h==null?void 0:h.toString()})}if(r.error){const h=r.error.message;throw he.create("token-update-failed",{errorInfo:h})}if(!r.token)throw he.create("token-update-no-token");return r.token}async function Bd(s,t){const n={method:"DELETE",headers:await Ga(s)};try{const r=await(await fetch(`${Va(s.appConfig)}/${t}`,n)).json();if(r.error){const h=r.error.message;throw he.create("token-unsubscribe-failed",{errorInfo:h})}}catch(i){throw he.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Va({projectId:s}){return`${Nd}/projects/${s}/registrations`}async function Ga({appConfig:s,installations:t}){const a=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${a}`})}function Zr({p256dh:s,auth:t,endpoint:a,vapidKey:n}){const i={web:{endpoint:a,auth:t,p256dh:s}};return n!==Ur&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=10080*60*1e3;async function Rd(s){const t=await Ld(s.swRegistration,s.vapidKey),a={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:t.endpoint,auth:Re(t.getKey("auth")),p256dh:Re(t.getKey("p256dh"))},n=await Dd(s.firebaseDependencies);if(n){if($d(n.subscriptionOptions,a))return Date.now()>=n.createTime+Md?Od(s,{token:n.token,createTime:Date.now(),subscriptionOptions:a}):n.token;try{await Bd(s.firebaseDependencies,n.token)}catch(i){console.warn(i)}return tr(s.firebaseDependencies,a)}else return tr(s.firebaseDependencies,a)}async function Od(s,t){try{const a=await Ed(s.firebaseDependencies,t),n={...t,token:a,createTime:Date.now()};return await Ka(s.firebaseDependencies,n),a}catch(a){throw a}}async function tr(s,t){const n={token:await Pd(s,t),createTime:Date.now(),subscriptionOptions:t};return await Ka(s,n),n.token}async function Ld(s,t){const a=await s.pushManager.getSubscription();return a||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_d(t)})}function $d(s,t){const a=t.vapidKey===s.vapidKey,n=t.endpoint===s.endpoint,i=t.auth===s.auth,r=t.p256dh===s.p256dh;return a&&n&&i&&r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(s){const t={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return Fd(t,s),Hd(t,s),Kd(t,s),t}function Fd(s,t){if(!t.notification)return;s.notification={};const a=t.notification.title;a&&(s.notification.title=a);const n=t.notification.body;n&&(s.notification.body=n);const i=t.notification.image;i&&(s.notification.image=i);const r=t.notification.icon;r&&(s.notification.icon=r)}function Hd(s,t){t.data&&(s.data=t.data)}function Kd(s,t){var i,r,h,u;if(!t.fcmOptions&&!((i=t.notification)!=null&&i.click_action))return;s.fcmOptions={};const a=((r=t.fcmOptions)==null?void 0:r.link)??((h=t.notification)==null?void 0:h.click_action);a&&(s.fcmOptions.link=a);const n=(u=t.fcmOptions)==null?void 0:u.analytics_label;n&&(s.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(s){return typeof s=="object"&&!!s&&Jr in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(s){if(!s||!s.options)throw ya("App Configuration Object");if(!s.name)throw ya("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:a}=s;for(const n of t)if(!a[n])throw ya(n);return{appName:s.name,projectId:a.projectId,apiKey:a.apiKey,appId:a.appId,senderId:a.messagingSenderId}}function ya(s){return he.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,a,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Gd(t);this.firebaseDependencies={app:t,appConfig:i,installations:a,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(s){try{s.swRegistration=await navigator.serviceWorker.register(jd,{scope:yd}),s.swRegistration.update().catch(()=>{}),await Ud(s.swRegistration)}catch(t){throw he.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function Ud(s){return new Promise((t,a)=>{const n=setTimeout(()=>a(new Error(`Service worker not registered after ${Ql} ms`)),Ql),i=s.installing||s.waiting;s.active?(clearTimeout(n),t()):i?i.onstatechange=r=>{var h;((h=r.target)==null?void 0:h.state)==="activated"&&(i.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),a(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(s,t){if(!t&&!s.swRegistration&&await qd(s),!(!t&&s.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw he.create("invalid-sw-registration");s.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(s,t){t?s.vapidKey=t:s.vapidKey||(s.vapidKey=Ur)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(s,t){if(!navigator)throw he.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw he.create("permission-blocked");return await Wd(s,t==null?void 0:t.vapidKey),await Jd(s,t==null?void 0:t.serviceWorkerRegistration),Rd(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(s,t,a){const n=Zd(t);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:a[Jr],message_name:a[vd],message_time:a[wd],message_device_time:Math.floor(Date.now()/1e3)})}function Zd(s){switch(s){case Js.NOTIFICATION_CLICKED:return"notification_open";case Js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(s,t){const a=t.data;if(!a.isFirebaseMessaging)return;s.onMessageHandler&&a.messageType===Js.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(ar(a)):s.onMessageHandler.next(ar(a)));const n=a.data;Vd(n)&&n[kd]==="1"&&await Xd(s,a.messageType,n)}const lr="@firebase/messaging",rr="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=s=>{const t=new Yd(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>Qd(t,a)),t},sx=s=>{const t=s.getProvider("messaging").getImmediate();return{getToken:n=>Qr(t,n)}};function tx(){ys(new os("messaging",ex,"PUBLIC")),ys(new os("messaging-internal",sx,"PRIVATE")),is(lr,rr),is(lr,rr,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(){try{await wr()}catch{return!1}return typeof window<"u"&&vr()&&yo()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(s=Nc()){return ax().then(t=>{if(!t)throw he.create("unsupported-browser")},t=>{throw he.create("indexed-db-unsupported")}),Oa(kr(s),"messaging").getImmediate()}async function rx(s,t){return s=kr(s),Qr(s,t)}tx();const nx={apiKey:"AIzaSyBoF-wh-ro18wSgJR5FFT7WzrLZX48Kcck",authDomain:"yolmov-web-push.firebaseapp.com",projectId:"yolmov-web-push",storageBucket:"yolmov-web-push.firebasestorage.app",messagingSenderId:"806551149404",appId:"1:806551149404:web:d356974ca9c187440e7f99",measurementId:"G-N99CHPLQHW"},ix="BOHukI7P2r18VSnpIULfSV-z75IbItBU9ZtlfvxZOCLJK3XqiXTi47yCv2QaT_0sldlOqmkymGqkZdUMq-OG1KM",ox=zr(nx);let Pa=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{Pa=lx(ox)}catch(s){console.warn("Firebase Messaging could not be initialized:",s)}const cx=async()=>{var s,t;try{if(typeof window>"u"||!("Notification"in window))return console.warn("[FCM] Bu tarayÄ±cÄ± bildirim desteklemiyor"),null;if(!("PushManager"in window))return console.warn("[FCM] Bu tarayÄ±cÄ± Push API desteklemiyor"),null;const a=await Notification.requestPermission();if(console.log("[FCM] Bildirim izni durumu:",a),a!=="granted")return console.warn("[FCM] Bildirim izni reddedildi"),null;if(!Pa)return console.warn("[FCM] Firebase Messaging baÅŸlatÄ±lamadÄ±"),null;console.log("[FCM] Service Worker hazÄ±rlanÄ±yor...");let n=null;const i=await navigator.serviceWorker.getRegistrations();for(const u of i)if((s=u.active)!=null&&s.scriptURL.includes("firebase-messaging-sw.js")){n=u,console.log("[FCM] Mevcut Firebase SW bulundu:",u.scope);break}if(!n&&(console.log("[FCM] Yeni Firebase SW kaydediliyor..."),n=await navigator.serviceWorker.register("/firebase-messaging-sw.js"),console.log("[FCM] Firebase SW kaydedildi, scope:",n.scope),n.installing||n.waiting)){const u=n.installing||n.waiting;u&&await new Promise(b=>{const m=setTimeout(()=>{console.log("[FCM] SW activation timeout"),b()},1e4),A=()=>{u.state==="activated"&&(clearTimeout(m),console.log("[FCM] SW aktif oldu"),b())};u.addEventListener("statechange",A),A()})}await navigator.serviceWorker.ready,console.log("[FCM] Service Worker hazÄ±r!");let r=null,h=null;for(let u=1;u<=3;u++)try{if(console.log(`[FCM] Token alÄ±nÄ±yor... (Deneme ${u}/3)`),r=await rx(Pa,{vapidKey:ix,serviceWorkerRegistration:n}),r)return console.log("[FCM] ðŸ”¥ TOKEN ALINDI:",r.substring(0,50)+"..."),r;console.warn("[FCM] Token boÅŸ dÃ¶ndÃ¼")}catch(b){h=b,console.warn(`[FCM] Deneme ${u} baÅŸarÄ±sÄ±z:`,b.message),(t=b.message)!=null&&t.includes("push service")&&u<3&&(console.log("[FCM] 2 saniye beklenip tekrar denenecek..."),await new Promise(m=>setTimeout(m,2e3)))}return console.error("[FCM] âŒ TÃ¼m denemeler baÅŸarÄ±sÄ±z. Son hata:",h),null}catch(a){return console.error("[FCM] âŒ Kritik hata:",a),null}},dx=async(s,t)=>{if(!s||!t){console.warn("[FCM] Partner ID veya token eksik");return}try{const{error:a}=await ke.from("partners").update({fcm_token:t,fcm_token_updated_at:new Date().toISOString()}).eq("id",s);a?console.error("[FCM] Token kaydetme hatasÄ±:",a):console.log("[FCM] âœ… Token veritabanÄ±na kaydedildi")}catch(a){console.error("[FCM] Supabase hatasÄ±:",a)}},xx=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const k=localStorage.getItem("yolmov_partner"),z=k?JSON.parse(k).id:"";console.log("ðŸ“¦ [PartnerOfferHistory] Partner ID:",z);const P=await E.offers.getByPartnerId(z);if(console.log("ðŸ“¦ [PartnerOfferHistory] Loaded offers:",(P==null?void 0:P.length)||0,P),P&&P.length>0){const M=P.map(_=>({id:_.id,requestId:_.request_id,customer:"MÃ¼ÅŸteri",service:"Hizmet",location:"Konum",price:_.price,sentDate:new Date(_.created_at).toLocaleString("tr-TR"),status:_.status,responseDate:_.updated_at?new Date(_.updated_at).toLocaleString("tr-TR"):void 0,responseMessage:_.notes}));t(M)}}catch(k){console.error("âŒ Teklifler yÃ¼klenemedi:",k)}finally{n(!1)}},[r,h]=o.useState(""),[u,b]=o.useState("all"),[m,A]=o.useState(null),B=s.filter(k=>{const z=k.customer.toLowerCase().includes(r.toLowerCase())||k.service.toLowerCase().includes(r.toLowerCase())||k.id.toLowerCase().includes(r.toLowerCase()),P=u==="all"||k.status===u;return z&&P}),x={total:s.length,accepted:s.filter(k=>k.status==="accepted").length,rejected:s.filter(k=>k.status==="rejected").length,pending:s.filter(k=>k.status==="pending").length,winRate:s.length>0?(s.filter(k=>k.status==="accepted").length/s.length*100).toFixed(1):"0"},S=k=>{const z={accepted:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"Kabul Edildi"},rejected:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"Reddedildi"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:ce,label:"Beklemede"},expired:{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:Te,label:"SÃ¼resi Doldu"}},{bg:P,text:M,border:_,icon:O,label:p}=z[k];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-semibold border ${P} ${M} ${_}`,children:[e.jsx(O,{size:14}),p]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Toplam Teklif"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{size:24,className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Kabul Edilen"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.accepted})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(ye,{size:24,className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Reddedilen"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.rejected})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(Te,{size:24,className:"text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Bekleyen"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.pending})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center",children:e.jsx(ce,{size:24,className:"text-yellow-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-100 mb-1",children:"Kazanma OranÄ±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[x.winRate,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(js,{size:24})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ls,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"MÃ¼ÅŸteri, hizmet veya teklif ID'si ile ara...",value:r,onChange:k=>h(k.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{size:20,className:"text-gray-400"}),e.jsxs("select",{value:u,onChange:k=>b(k.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"TÃ¼m Durumlar"}),e.jsx("option",{value:"accepted",children:"Kabul Edildi"}),e.jsx("option",{value:"rejected",children:"Reddedildi"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"expired",children:"SÃ¼resi Doldu"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:B.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Teklif BulunamadÄ±"}),e.jsx("p",{className:"text-gray-500",children:"Arama kriterlerinize uygun teklif bulunamadÄ±."})]}):B.map(k=>e.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all cursor-pointer",onClick:()=>A(k),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500",children:k.id}),S(k.status)]}),e.jsx("span",{className:"text-sm text-gray-400",children:k.sentDate})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ps,{size:16,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"MÃ¼ÅŸteri"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.customer})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center",children:e.jsx(xe,{size:16,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Hizmet"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.service})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-full flex items-center justify-center",children:e.jsx(Ne,{size:16,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Konum"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-50 rounded-full flex items-center justify-center",children:e.jsx(js,{size:16,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Teklif FiyatÄ±"}),e.jsxs("p",{className:"text-sm font-bold text-orange-600",children:[k.price," â‚º"]})]})]})]}),k.responseMessage&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"MÃ¼ÅŸteri YanÄ±tÄ±:"})," ",k.responseMessage]})})]},k.id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4",onClick:()=>A(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Teklif DetaylarÄ±"}),e.jsx("button",{onClick:()=>A(null),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Teklif ID"}),e.jsx("span",{className:"font-mono font-semibold",children:m.id})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Talep ID"}),e.jsx("span",{className:"font-mono font-semibold",children:m.requestId})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Durum"}),S(m.status)]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"MÃ¼ÅŸteri"}),e.jsx("span",{className:"font-semibold",children:m.customer})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hizmet"}),e.jsx("span",{className:"font-semibold",children:m.service})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Konum"}),e.jsx("span",{className:"font-semibold",children:m.location})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("span",{className:"text-sm text-orange-700 font-semibold",children:"Teklif FiyatÄ±"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:[m.price," â‚º"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"GÃ¶nderilme Tarihi"}),e.jsx("span",{className:"font-semibold",children:m.sentDate})]}),m.responseDate&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"YanÄ±t Tarihi"}),e.jsx("span",{className:"font-semibold",children:m.responseDate})]}),m.responseMessage&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700 mb-1 font-semibold",children:"MÃ¼ÅŸteri YanÄ±tÄ±:"}),e.jsx("p",{className:"text-gray-700",children:m.responseMessage})]})]})]})})]})},mx=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const y=localStorage.getItem("yolmov_partner"),F=y?JSON.parse(y).id:"";console.log("ðŸ’° [PartnerPayments] Partner ID:",F);const q=await E.completedJobs.getByPartnerId(F);console.log("ðŸ’° [PartnerPayments] Loaded completed jobs:",(q==null?void 0:q.length)||0);const W=(q||[]).map(G=>{var se,U;return{id:`PAY-${((se=G.id)==null?void 0:se.substring(0,8))||""}`,jobId:`JOB-${((U=G.id)==null?void 0:U.substring(0,4))||""}`,type:"earning",grossAmount:G.totalAmount||0,commission:G.commission||0,commissionRate:G.totalAmount?Math.round(G.commission/G.totalAmount*100):0,amount:G.partnerEarning||G.totalAmount||0,date:G.completionTime||G.startTime||new Date().toISOString(),status:G.status==="completed"?"completed":G.status==="cancelled"?"failed":"pending",paymentMethod:G.paymentMethod==="nakit"?"cash":G.paymentMethod==="kredi_karti"?"card":"bank_transfer",customer:G.customerName||"MÃ¼ÅŸteri",service:G.serviceType||"Hizmet"}});t(W),console.log("ðŸ’° [PartnerPayments] Formatted payments:",W.length)}catch(y){console.error("âŒ Ã–demeler yÃ¼klenemedi:",y)}finally{n(!1)}},[r,h]=o.useState("all"),[u,b]=o.useState("all"),[m,A]=o.useState(null),[B,x]=o.useState(""),[S,k]=o.useState(""),[z,P]=o.useState(10),[M,_]=o.useState(1),[O,p]=o.useState(!1),v=s.filter(y=>{const F=r==="all"||y.type===r,q=u==="all"||y.status===u;return F&&q}),I=s.filter(y=>y.type==="earning"&&y.status==="completed").reduce((y,F)=>y+(F.grossAmount||F.amount),0),K=new Date;K.setDate(K.getDate()-30);const V=s.filter(y=>y.type==="earning"&&y.status==="completed"&&new Date(y.date)>=K).reduce((y,F)=>y+(F.grossAmount||F.amount),0);s.filter(y=>y.status==="pending").reduce((y,F)=>y+F.amount,0);const L=s.filter(y=>y.type==="earning"&&y.status==="completed").length,j=y=>{const F={completed:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"TamamlandÄ±"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:ce,label:"Beklemede"},failed:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"BaÅŸarÄ±sÄ±z"}},{bg:q,text:W,border:G,icon:se,label:U}=F[y];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${q} ${W} ${G}`,children:[e.jsx(se,{size:12}),U]})},$=y=>({cash:"Nakit",card:"Kredi KartÄ±",bank_transfer:"Banka Havalesi"})[y]||y;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Ea,{size:24})}),e.jsx(_a,{size:20,className:"opacity-60"})]}),e.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Toplam KazanÃ§"}),e.jsxs("p",{className:"text-3xl font-bold",children:[I.toLocaleString()," â‚º"]}),e.jsxs("p",{className:"text-xs text-green-100 mt-1",children:[L," Ä°ÅŸ TamamlandÄ±"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Ba,{size:24})}),e.jsx(ft,{size:20,className:"opacity-60"})]}),e.jsx("p",{className:"text-sm text-purple-100 mb-1",children:"Bu Ay KazanÃ§"}),e.jsxs("p",{className:"text-3xl font-bold",children:[V.toLocaleString()," â‚º"]}),e.jsx("p",{className:"text-xs text-purple-100 mt-1",children:"Son 30 GÃ¼n"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"ðŸ’° Komisyonsuz KazanÃ§ Sistemi"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Yolmov platformunda mÃ¼ÅŸterilerden aldÄ±ÄŸÄ±nÄ±z Ã¶demenin ",e.jsx("span",{className:"font-bold",children:"%100'Ã¼ size aittir!"}),"Platform geliri sadece kredi satÄ±ÅŸÄ±ndan elde edilir. Ä°ÅŸ baÅŸÄ± komisyon alÄ±nmaz."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"%0 Komisyon"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"HÄ±zlÄ± Ã–deme"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 px-3 py-2 rounded-lg",children:[e.jsx(ye,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"AnÄ±nda Tahsilat"})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{size:20,className:"text-gray-400"}),e.jsxs("select",{value:r,onChange:y=>h(y.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"TÃ¼m Ä°ÅŸlemler"}),e.jsx("option",{value:"earning",children:"KazanÃ§lar"}),e.jsx("option",{value:"commission",children:"Komisyonlar"}),e.jsx("option",{value:"fee",children:"Ãœcretler"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:u,onChange:y=>b(y.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"TÃ¼m Durumlar"}),e.jsx("option",{value:"completed",children:"TamamlandÄ±"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"failed",children:"BaÅŸarÄ±sÄ±z"})]})}),e.jsxs("button",{onClick:()=>p(!0),className:"ml-auto px-6 py-2.5 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(ts,{size:18}),"Rapor Ä°ndir"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[a?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ã–deme kayÄ±tlarÄ± yÃ¼kleniyor..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Ä°ÅŸlem ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Ä°ÅŸ No"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"MÃ¼ÅŸteri/Hizmet"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tutar"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Ã–deme YÃ¶ntemi"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tarih"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Detay"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:v.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-700",children:y.id})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-600",children:y.jobId})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:y.customer||"-"}),e.jsx("p",{className:"text-gray-500 text-xs",children:y.service})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`text-sm font-bold ${y.amount>=0?"text-green-600":"text-red-600"}`,children:[y.amount>=0?"+":"",(y.grossAmount||y.amount).toLocaleString()," â‚º"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:$(y.paymentMethod)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:y.date})}),e.jsx("td",{className:"px-6 py-4",children:j(y.status)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>A(y),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors mx-auto",children:e.jsx(Ds,{size:16,className:"text-gray-600"})})})]},y.id))})]})}),v.length===0&&!a&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Ã–deme BulunamadÄ±"}),e.jsx("p",{className:"text-gray-500",children:"HenÃ¼z tamamlanmÄ±ÅŸ bir iÅŸ kaydÄ±nÄ±z bulunmuyor."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Ä°ÅŸ tamamladÄ±ÄŸÄ±nÄ±zda Ã¶deme kayÄ±tlarÄ± burada gÃ¶rÃ¼necektir."})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-2xl w-full",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Rapor Ä°ndir"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ã–deme raporunuzu Ã¶zelleÅŸtirin ve indirin"})]}),e.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Tarih AralÄ±ÄŸÄ±"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"BaÅŸlangÄ±Ã§"}),e.jsx("input",{type:"date",value:B,onChange:y=>x(y.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"BitiÅŸ"}),e.jsx("input",{type:"date",value:S,onChange:y=>k(y.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{x(""),k("")},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"TÃ¼mÃ¼"}),e.jsx("button",{onClick:()=>{const y=new Date,F=new Date(y.getFullYear(),y.getMonth()-1,y.getDate());x(F.toISOString().split("T")[0]),k(y.toISOString().split("T")[0])},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"Son 30 GÃ¼n"}),e.jsx("button",{onClick:()=>{const y=new Date,F=new Date(y.getFullYear(),y.getMonth(),1);x(F.toISOString().split("T")[0]),k(y.toISOString().split("T")[0])},className:"text-xs px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",children:"Bu Ay"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Sayfa BaÅŸÄ±na KayÄ±t"}),e.jsx("div",{className:"flex gap-3",children:[10,20,50,100].map(y=>e.jsx("button",{onClick:()=>P(y),className:`flex-1 py-2.5 rounded-lg font-bold transition-all ${z===y?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Dosya FormatÄ±"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{alert(`Excel formatÄ±nda rapor indiriliyor... (${v.length} kayÄ±t)`),p(!1)},className:"py-3 px-4 bg-green-50 border-2 border-green-200 text-green-700 rounded-lg font-bold hover:bg-green-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"Excel"]}),e.jsxs("button",{onClick:()=>{alert(`PDF formatÄ±nda rapor indiriliyor... (${v.length} kayÄ±t)`),p(!1)},className:"py-3 px-4 bg-red-50 border-2 border-red-200 text-red-700 rounded-lg font-bold hover:bg-red-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"PDF"]}),e.jsxs("button",{onClick:()=>{alert(`CSV formatÄ±nda rapor indiriliyor... (${v.length} kayÄ±t)`),p(!1)},className:"py-3 px-4 bg-blue-50 border-2 border-blue-200 text-blue-700 rounded-lg font-bold hover:bg-blue-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"CSV"]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsxs("strong",{children:[v.length," kayÄ±t"]})," indirilecek. Tarih aralÄ±ÄŸÄ± ve filtreler uygulanacaktÄ±r."]})})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>A(null),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ã–deme DetaylarÄ±"}),e.jsx("button",{onClick:()=>A(null),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ä°ÅŸlem ID"}),e.jsx("span",{className:"font-mono font-semibold",children:m.id})]}),m.jobId!=="-"&&e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ä°ÅŸ No"}),e.jsx("span",{className:"font-mono font-semibold",children:m.jobId})]}),m.customer&&e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"MÃ¼ÅŸteri"}),e.jsx("span",{className:"font-semibold",children:m.customer})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hizmet"}),e.jsx("span",{className:"font-semibold",children:m.service})]}),m.grossAmount&&e.jsxs("div",{className:"flex justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Ã–deme TutarÄ±"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[m.grossAmount," â‚º"]})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-blue-50 rounded-lg border-2 border-blue-300",children:[e.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"KazancÄ±nÄ±z (%0 Komisyon)"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[m.grossAmount||m.amount," â‚º"]})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ã–deme YÃ¶ntemi"}),e.jsx("span",{className:"font-semibold",children:$(m.paymentMethod)})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tarih"}),e.jsx("span",{className:"font-semibold",children:m.date})]}),e.jsxs("div",{className:"flex justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Durum"}),j(m.status)]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsxs("button",{className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18}),"Fatura Ä°ndir"]}),e.jsxs("button",{className:"flex-1 px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ft,{size:18}),"Dekont GÃ¶rÃ¼ntÃ¼le"]})]})]})})]})},Ys=[{value:"license",label:"SÃ¼rÃ¼cÃ¼ Belgesi",required:!0},{value:"insurance",label:"Kasko/Sigorta PoliÃ§esi",required:!0},{value:"registration",label:"AraÃ§ RuhsatÄ±",required:!0},{value:"tax",label:"Vergi LevhasÄ±",required:!0},{value:"identity",label:"Kimlik Belgesi",required:!0}],ux=()=>{var _,O;const[s,t]=o.useState([]),[a,n]=o.useState(""),[i,r]=o.useState(!1),h=o.useRef(null),[u,b]=o.useState(null),[m,A]=o.useState(null),B=localStorage.getItem("yolmov_partner"),x=B?JSON.parse(B).id:"",S=localStorage.getItem("yolmov_partner_name")||"Partner";o.useEffect(()=>{k()},[]);const k=async()=>{try{const v=(await E.partnerDocuments.getByPartnerId(x)).map(I=>({id:I.id,partnerId:I.partnerId,partnerName:I.partnerName||S,type:I.type,name:I.fileName,fileUrl:I.fileUrl,fileSize:I.fileSize,uploadDate:I.uploadDate?new Date(I.uploadDate).toLocaleDateString("tr-TR"):"",expiryDate:I.expiryDate?new Date(I.expiryDate).toLocaleDateString("tr-TR"):void 0,status:I.status,rejectionReason:I.rejectionReason}));t(v)}catch(p){console.error("âŒ Belgeler yÃ¼klenemedi:",p)}},z=p=>{const v={approved:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"OnaylandÄ±"},pending:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",icon:ce,label:"Ä°nceleniyor"},rejected:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:Te,label:"Reddedildi"}},{bg:I,text:K,border:V,icon:L,label:j}=v[p];return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${I} ${K} ${V}`,children:[e.jsx(L,{size:12}),j]})},P=async p=>{if(!a){b("LÃ¼tfen Ã¶nce belge tÃ¼rÃ¼nÃ¼ seÃ§in.");return}if(!p.target.files||!p.target.files.length)return;const v=p.target.files[0];r(!0);try{let I=v;if(Qe(v)){const j=await es(v);I=j.compressedFile,console.log(`ðŸ“„ Belge sÄ±kÄ±ÅŸtÄ±rÄ±ldÄ±: ${j.compressionRatio.toFixed(1)}% kÃ¼Ã§Ã¼ltÃ¼ldÃ¼`)}const K=`https://placeholder-url/${I.name}`,L={id:(await E.partnerDocuments.create({partnerId:x,partnerName:S,type:a,fileName:I.name,fileSize:`${(I.size/1024/1024).toFixed(2)} MB`,status:"pending"})).id,partnerId:x,partnerName:S,type:a,name:I.name,fileSize:`${(I.size/1024/1024).toFixed(2)} MB`,uploadDate:new Date().toLocaleDateString("tr-TR"),status:"pending"};t(j=>[...j,L]),console.log("ðŸ“„ [PartnerDocuments] Document uploaded:",K),r(!1),n(""),h.current&&(h.current.value=""),b(null)}catch(I){console.error("âŒ Belge yÃ¼kleme hatasÄ±:",I),b("Belge yÃ¼klenirken hata oluÅŸtu. LÃ¼tfen tekrar deneyin."),r(!1)}},M={total:Ys.length,approved:s.filter(p=>p.status==="approved").length,pending:s.filter(p=>p.status==="pending").length,rejected:s.filter(p=>p.status==="rejected").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Toplam Belge"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.total})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{size:24,className:"text-gray-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"OnaylÄ±"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:M.approved})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(ye,{size:24,className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ä°nceleniyor"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:M.pending})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center",children:e.jsx(ce,{size:24,className:"text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Reddedilen"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:M.rejected})]}),e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center",children:e.jsx(Te,{size:24,className:"text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Yeni Belge YÃ¼kle"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("select",{value:a,onChange:p=>n(p.target.value),className:"flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Belge TÃ¼rÃ¼ SeÃ§in"}),Ys.map(p=>e.jsxs("option",{value:p.value,children:[p.label," ",p.required&&"*"]},p.value))]}),e.jsxs("label",{onClick:()=>{a||b("Ã–nce belge tÃ¼rÃ¼nÃ¼ seÃ§melisiniz.")},className:`px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2 ${a?"bg-orange-600 text-white cursor-pointer hover:bg-orange-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[i?e.jsx(ie,{size:18,className:"animate-spin"}):e.jsx(Ts,{size:18}),i?"YÃ¼kleniyor...":"Belge SeÃ§ ve YÃ¼kle",e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:P,disabled:!a||i,className:"hidden",ref:h})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"* PDF, JPG, PNG formatÄ±nda, maksimum 5 MB"}),u&&e.jsx("p",{className:"text-xs mt-2 text-red-600",children:u})]}),e.jsx("div",{className:"space-y-3",children:s.map(p=>{const v=Ys.find(I=>I.value===p.type);return e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(xe,{size:24,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900",children:v==null?void 0:v.label}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.name," â€¢ ",p.fileSize]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["YÃ¼klenme: ",p.uploadDate]}),p.expiryDate&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Son GeÃ§erlilik: ",p.expiryDate]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[z(p.status),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(p),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200",children:e.jsx(Ds,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>alert(`'${p.name}' indiriliyor.`),className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200",children:e.jsx(ts,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>t(s.filter(I=>I.id!==p.id)),className:"w-8 h-8 bg-red-50 rounded-lg flex items-center justify-center hover:bg-red-100",children:e.jsx(Ma,{size:16,className:"text-red-600"})})]})]})]}),p.status==="rejected"&&p.rejectionReason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx(be,{size:16,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-red-700 mb-1",children:"Red Nedeni:"}),e.jsx("p",{className:"text-xs text-red-600",children:p.rejectionReason})]})]})]},p.id)})}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-5 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(xe,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-900 mb-2",children:"Belge Onay SÃ¼reci"}),e.jsx("p",{className:"text-sm text-blue-700",children:"YÃ¼klediÄŸiniz belgeler admin ekibi tarafÄ±ndan 24 saat iÃ§inde incelenir. Onaylanan belgeler ile iÅŸ kabulÃ¼ne baÅŸlayabilirsiniz. Eksik veya hatalÄ± belgeler iÃ§in bildirim alacaksÄ±nÄ±z."})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>A(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Belge DetaylarÄ±"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(_=Ys.find(p=>p.value===m.type))==null?void 0:_.label})]}),e.jsx("button",{onClick:()=>A(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(Te,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Belge TÃ¼rÃ¼"}),e.jsx("p",{className:"font-bold text-gray-900",children:(O=Ys.find(p=>p.value===m.type))==null?void 0:O.label})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Dosya AdÄ±"}),e.jsx("p",{className:"font-mono text-sm text-gray-900",children:m.name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Dosya Boyutu"}),e.jsx("p",{className:"font-bold text-gray-900",children:m.fileSize})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"YÃ¼klenme Tarihi"}),e.jsx("p",{className:"font-bold text-gray-900",children:m.uploadDate})]}),m.expiryDate&&e.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-200",children:[e.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase mb-2",children:"Son GeÃ§erlilik"}),e.jsx("p",{className:"font-bold text-orange-900",children:m.expiryDate})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),z(m.status)]}),m.status==="rejected"&&m.rejectionReason&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-bold text-red-600 uppercase mb-2",children:"Red Nedeni"}),e.jsx("p",{className:"text-sm text-red-800",children:m.rejectionReason})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 h-96 flex items-center justify-center border-2 border-dashed border-gray-300 overflow-hidden",children:m.name.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{size:64,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"PDF Belgesi"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tam gÃ¶rÃ¼nÃ¼m iÃ§in indirin"})]}):m.fileUrl?e.jsx("img",{src:m.fileUrl,alt:m.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:p=>{const v=p.target;v.style.display="none",v.parentElement.innerHTML='<div class="text-center"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 mx-auto mb-4"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg><p class="text-gray-600 font-medium">GÃ¶rsel yÃ¼klenemedi</p></div>'}}):e.jsxs("div",{className:"text-center",children:[e.jsx(Ds,{size:64,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"GÃ¶rsel Ã–nizleme"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:m.name})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:m.fileUrl||"#",target:"_blank",rel:"noopener noreferrer",download:m.name,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${m.fileUrl?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,onClick:p=>!m.fileUrl&&p.preventDefault(),children:[e.jsx(ts,{size:18}),"Ä°ndir"]}),e.jsx("button",{onClick:()=>A(null),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-all",children:"Kapat"})]}),m.status==="rejected"&&e.jsxs("button",{onClick:()=>{A(null),n(m.type)},className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18}),"Yeniden YÃ¼kle"]})]})]})]})})]})},en=({partnerId:s,partnerVehicles:t,onToast:a})=>{var us;const[n,i]=o.useState([]),[r,h]=o.useState(!0),[u,b]=o.useState(!1),[m,A]=o.useState(null),[B,x]=o.useState(""),[S,k]=o.useState(""),[z,P]=o.useState([]),[M,_]=o.useState(""),[O,p]=o.useState(""),[v,I]=o.useState(""),[K,V]=o.useState(""),[L,j]=o.useState(""),[$,y]=o.useState(""),[F,q]=o.useState(""),[W,G]=o.useState(""),[se,U]=o.useState(0),[g,D]=o.useState(""),[R,te]=o.useState(!1),[fe,_e]=o.useState(!1),[Se,C]=o.useState(""),[ae,De]=o.useState(!1),[Fe,cs]=o.useState(""),[ks,me]=o.useState(!1),[Ie,ze]=o.useState(""),[He,Ke]=o.useState(!1),Pe=Object.keys(Na).sort(),_s=Pe.filter(f=>f.toLowerCase().includes(Se.toLowerCase())),ds=Pe.filter(f=>f.toLowerCase().includes(Fe.toLowerCase())),xs=Pe.filter(f=>f.toLowerCase().includes(Ie.toLowerCase())&&!z.includes(f));o.useEffect(()=>{Ve()},[s]);const Ve=async()=>{h(!0);try{const f=await E.returnRoutes.getByPartnerId(s);i(f)}catch(f){console.error("Rotalar yÃ¼klenemedi:",f),a("Rotalar yÃ¼klenirken hata oluÅŸtu","error")}finally{h(!1)}},Ge=()=>{x(""),k(""),P([]),_(""),p(""),I(""),V(""),j(""),y(""),q(""),G(""),U(0),D(""),C(""),cs(""),ze("")},N=()=>{Ge(),A(null);const f=new Date;f.setDate(f.getDate()+1),_(f.toISOString().split("T")[0]),b(!0)},ge=f=>{x(f.originCity),k(f.destinationCity),P(f.routeCities||[]),_(f.departureDate),p(f.departureTime||""),I(f.vehicleType),V(f.vehiclePlate),j(f.vehicleId||""),y(f.driverName||""),q(f.driverPhone||""),G(f.availableCapacity||""),U(f.discountPercent),D(f.notes||""),A(f),b(!0)},It=f=>{j(f.id),V(f.plate),I(f.type),y(f.driver||""),Ke(!1)},Pt=f=>{P(le=>[...le,f]),ze("")},Xs=f=>{P(le=>le.filter(ve=>ve!==f))},Ee=(f,le)=>{const ve=le==="up"?f-1:f+1;if(ve<0||ve>=z.length)return;const Ye=[...z];[Ye[f],Ye[ve]]=[Ye[ve],Ye[f]],P(Ye)},Zs=async()=>{if(!B||!S||!M){a("LÃ¼tfen zorunlu alanlarÄ± doldurun (KalkÄ±ÅŸ, VarÄ±ÅŸ, Tarih)","error");return}const f=[B,...z,S];te(!0);try{m?(await E.returnRoutes.update(m.id,{originCity:B,destinationCity:S,routeCities:f,departureDate:M,departureTime:O||void 0,vehicleType:v,vehiclePlate:K,driverName:$||void 0,driverPhone:F||void 0,availableCapacity:W||void 0,discountPercent:se,notes:g||void 0}),a("BoÅŸ dÃ¶nÃ¼ÅŸ rotasÄ± gÃ¼ncellendi","success")):(await E.returnRoutes.create({partnerId:s,vehicleId:L||void 0,originCity:B,destinationCity:S,routeCities:f,departureDate:M,departureTime:O||void 0,vehicleType:v,vehiclePlate:K,driverName:$||void 0,driverPhone:F||void 0,availableCapacity:W||void 0,discountPercent:se,notes:g||void 0}),a("BoÅŸ dÃ¶nÃ¼ÅŸ rotasÄ± eklendi","success")),await Ve(),b(!1),Ge()}catch(le){console.error("KayÄ±t hatasÄ±:",le),a(le.message||"KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu","error")}finally{te(!1)}},Ss=async f=>{if(confirm("Bu rotayÄ± iptal etmek istediÄŸinize emin misiniz?"))try{await E.returnRoutes.cancel(f.id),a("Rota iptal edildi","success"),await Ve()}catch(le){console.error("Ä°ptal hatasÄ±:",le),a("Ä°ptal sÄ±rasÄ±nda hata oluÅŸtu","error")}},Qs=async f=>{if(confirm("Bu rotayÄ± silmek istediÄŸinize emin misiniz?"))try{await E.returnRoutes.delete(f.id),a("Rota silindi","success"),await Ve()}catch(le){console.error("Silme hatasÄ±:",le),a("Silme sÄ±rasÄ±nda hata oluÅŸtu","error")}},ms=f=>new Date(f).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),Bs=f=>{switch(f){case"active":return"bg-green-100 text-green-700";case"completed":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},oe=f=>{switch(f){case"active":return"Aktif";case"completed":return"TamamlandÄ±";case"cancelled":return"Ä°ptal";default:return f}};return r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ie,{className:"w-8 h-8 animate-spin text-brand-orange"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"BoÅŸ DÃ¶nÃ¼ÅŸ RotalarÄ±m"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"BoÅŸ dÃ¶nen araÃ§larÄ±nÄ±zÄ± tanÄ±mlayÄ±n, gÃ¼zergah Ã¼zerinden iÅŸ alÄ±n"})]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:[e.jsx(as,{size:18}),"Rota Ekle"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[e.jsx(St,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"BoÅŸ DÃ¶nÃ¼ÅŸ AvantajÄ±"}),e.jsx("p",{children:"AraÃ§larÄ±nÄ±z boÅŸ dÃ¶nerken gÃ¼zergah Ã¼zerindeki illerden iÅŸ alabilirsiniz. MÃ¼ÅŸterilere indirimli fiyat sunarak hem siz hem mÃ¼ÅŸteri kazanÃ§lÄ± Ã§Ä±kar."})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"HenÃ¼z boÅŸ dÃ¶nÃ¼ÅŸ rotasÄ± tanÄ±mlamadÄ±nÄ±z"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"BoÅŸ dÃ¶nen araÃ§larÄ±nÄ±z iÃ§in rota tanÄ±mlayÄ±n, gÃ¼zergah Ã¼zerinden iÅŸ alÄ±n"}),e.jsx("button",{onClick:N,className:"px-6 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:"Ä°lk RotayÄ± Ekle"})]}):e.jsx("div",{className:"space-y-4",children:n.map(f=>e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 border border-gray-100 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${Bs(f.status)}`,children:oe(f.status)}),f.discountPercent>0&&e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full bg-green-100 text-green-700",children:["%",f.discountPercent," Ä°ndirimli"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[e.jsx("span",{className:"font-bold text-gray-900",children:f.originCity}),f.routeCities.slice(1,-1).map((le,ve)=>e.jsxs(Vi.Fragment,{children:[e.jsx(yt,{size:16,className:"text-gray-300"}),e.jsx("span",{className:"text-gray-600",children:le})]},ve)),e.jsx(yt,{size:16,className:"text-gray-300"}),e.jsx("span",{className:"font-bold text-gray-900",children:f.destinationCity})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ur,{size:14}),ms(f.departureDate),f.departureTime&&` - ${f.departureTime}`]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{size:14}),f.vehiclePlate," (",f.vehicleType,")"]}),f.availableCapacity&&e.jsxs("div",{children:["Kapasite: ",f.availableCapacity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ge(f),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"DÃ¼zenle",children:e.jsx(gs,{size:18})}),e.jsx("button",{onClick:()=>Ss(f),className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-orange-50 rounded-lg transition-colors",title:"Ä°ptal Et",children:e.jsx(ne,{size:18})})]}),e.jsx("button",{onClick:()=>Qs(f),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",children:e.jsx(Ma,{size:18})})]})]})},f.id))}),e.jsx(pe,{children:u&&e.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>b(!1),children:e.jsxs(H.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:m?"BoÅŸ DÃ¶nÃ¼ÅŸ RotasÄ± DÃ¼zenle":"Yeni BoÅŸ DÃ¶nÃ¼ÅŸ RotasÄ±"}),e.jsxs("div",{className:"space-y-5",children:[t.length>0&&!m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AraÃ§ SeÃ§in (Opsiyonel)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>Ke(!He),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:L?"text-gray-900":"text-gray-400",children:L?((us=t.find(f=>f.id===L))==null?void 0:us.plate)||"AraÃ§ seÃ§ildi":"KayÄ±tlÄ± araÃ§tan seÃ§..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),He&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-y-auto",children:t.map(f=>e.jsxs("button",{onClick:()=>It(f),className:"w-full px-4 py-3 text-left hover:bg-orange-50 flex items-center justify-between border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f.plate}),e.jsxs("div",{className:"text-sm text-gray-500",children:[f.type," - ",f.driver||"SÃ¼rÃ¼cÃ¼ yok"]})]}),L===f.id&&e.jsx(je,{size:18,className:"text-brand-orange"})]},f.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"KalkÄ±ÅŸ Ä°li *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>_e(!fe),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:B?"text-gray-900":"text-gray-400",children:B||"Ä°l seÃ§in..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),fe&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Se,onChange:f=>C(f.target.value),placeholder:"Ä°l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:_s.map(f=>e.jsx("button",{onClick:()=>{x(f),_e(!1),C("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:f},f))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VarÄ±ÅŸ Ä°li *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>De(!ae),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:S?"text-gray-900":"text-gray-400",children:S||"Ä°l seÃ§in..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),ae&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Fe,onChange:f=>cs(f.target.value),placeholder:"Ä°l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:ds.map(f=>e.jsx("button",{onClick:()=>{k(f),De(!1),cs("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:f},f))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ara GÃ¼zergah Ä°lleri"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"SÄ±rasÄ±yla geÃ§eceÄŸiniz illeri ekleyin. Bu iller Ã¼zerinden iÅŸ alabilirsiniz."}),z.length>0&&e.jsx("div",{className:"mb-3 space-y-2",children:z.map((f,le)=>e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-orange-400",children:le+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[le>0&&e.jsx("button",{onClick:()=>Ee(le,"up"),className:"p-1 text-gray-400 hover:text-gray-600",children:"â†‘"}),le<z.length-1&&e.jsx("button",{onClick:()=>Ee(le,"down"),className:"p-1 text-gray-400 hover:text-gray-600",children:"â†“"}),e.jsx("button",{onClick:()=>Xs(f),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(ne,{size:14})})]})]},f))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>me(!ks),className:"w-full px-4 py-3 border border-dashed rounded-xl text-left flex items-center justify-center gap-2 text-gray-400 hover:border-brand-orange hover:text-brand-orange transition-colors",children:[e.jsx(as,{size:18}),"Ara Ä°l Ekle"]}),ks&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:Ie,onChange:f=>ze(f.target.value),placeholder:"Ä°l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:xs.map(f=>e.jsx("button",{onClick:()=>{Pt(f),me(!1)},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:f},f))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hareket Tarihi *"}),e.jsx("input",{type:"date",value:M,onChange:f=>_(f.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hareket Saati"}),e.jsx("input",{type:"time",value:O,onChange:f=>p(f.target.value),className:"w-full px-4 py-3 border rounded-xl"})]})]}),!L&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AraÃ§ Tipi *"}),e.jsx("input",{type:"text",value:v,onChange:f=>I(f.target.value),placeholder:"Ã¶r. Ã‡ekici, Kamyon",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plaka *"}),e.jsx("input",{type:"text",value:K,onChange:f=>V(f.target.value.toUpperCase()),placeholder:"34 ABC 123",className:"w-full px-4 py-3 border rounded-xl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SÃ¼rÃ¼cÃ¼ AdÄ±"}),e.jsx("input",{type:"text",value:$,onChange:f=>y(f.target.value),placeholder:"SÃ¼rÃ¼cÃ¼ adÄ± soyadÄ±",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SÃ¼rÃ¼cÃ¼ Telefonu"}),e.jsx("input",{type:"tel",value:F,onChange:f=>q(f.target.value),placeholder:"05xx xxx xx xx",className:"w-full px-4 py-3 border rounded-xl"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BoÅŸ Kapasite"}),e.jsx("input",{type:"text",value:W,onChange:f=>G(f.target.value),placeholder:"Ã¶r. 2 araÃ§, 5 ton",className:"w-full px-4 py-3 border rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ä°ndirim OranÄ±"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"50",step:"5",value:se,onChange:f=>U(parseInt(f.target.value)),className:"flex-1 accent-brand-orange"}),e.jsxs("span",{className:"font-bold text-gray-900 w-12 text-right flex items-center gap-1",children:[e.jsx(Zi,{size:14}),se]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BoÅŸ dÃ¶nÃ¼ÅŸ avantajÄ± iÃ§in mÃ¼ÅŸterilere sunulacak indirim"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar"}),e.jsx("textarea",{value:g,onChange:f=>D(f.target.value),placeholder:"Ek bilgiler, Ã¶zel durumlar...",rows:2,className:"w-full px-4 py-3 border rounded-xl resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-50 transition-colors",children:"Ä°ptal"}),e.jsx("button",{onClick:Zs,disabled:R||!B||!S||!M,className:"flex-1 px-4 py-3 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18}),m?"GÃ¼ncelle":"Ekle"]})})]})]})})})]})},nr=[{value:"nakit",label:"Nakit",icon:"ðŸ’µ"},{value:"kredi_karti",label:"Kredi KartÄ±",icon:"ðŸ’³"},{value:"banka_havale",label:"Banka Havale/EFT",icon:"ðŸ¦"},{value:"firmaya_fatura",label:"Firmaya Fatura",icon:"ðŸ“„"}],ir=[{value:"vinc",label:"VinÃ§",icon:"ðŸ—ï¸"},{value:"hidrolik_platform",label:"Hidrolik Platform",icon:"â¬†ï¸"},{value:"uzun_platform",label:"Uzun Platform",icon:"ðŸ“"},{value:"tekerleksiz_cekim",label:"Tekerleksiz Ã‡ekim",icon:"ðŸ”§"},{value:"otopark_cekimi",label:"Otopark Ã‡ekimi",icon:"ðŸ…¿ï¸"},{value:"gps_takip",label:"GPS Takip",icon:"ðŸ“"},{value:"gece_aydinlatma",label:"Gece AydÄ±nlatma",icon:"ðŸ’¡"}],hx=({partnerId:s,partnerData:t})=>{var U;const[a,n]=o.useState(!0),[i,r]=o.useState(!1),[h,u]=o.useState(null),[b,m]=o.useState([]),[A,B]=o.useState(null),[x,S]=o.useState("info"),[k,z]=o.useState(!1),[P,M]=o.useState(null),[_,O]=o.useState({showcase_description:"",showcase_working_hours:"",showcase_payment_methods:[],showcase_is_24_7:!1,showcase_satisfaction_rate:null,showcase_response_time:""}),[p,v]=o.useState({showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:""}),[I,K]=o.useState(null),[V,L]=o.useState(null),j=o.useCallback(async()=>{if(!s){console.log("ðŸ”´ PartnerShowcaseTab: partnerId is empty");return}console.log("ðŸŸ¡ PartnerShowcaseTab: Loading showcase data for partnerId:",s),n(!0),M(null);try{const g=await E.partnerShowcase.getShowcaseData(s);if(console.log("ðŸŸ¢ PartnerShowcaseTab: Showcase data loaded:",g),g){u(g),O({showcase_description:g.partner.showcase_description||"",showcase_working_hours:g.partner.showcase_working_hours||"",showcase_payment_methods:g.partner.showcase_payment_methods||[],showcase_is_24_7:g.partner.showcase_is_24_7||!1,showcase_satisfaction_rate:g.partner.showcase_satisfaction_rate||null,showcase_response_time:g.partner.showcase_response_time||""});const D=g.vehicles||[];console.log("ðŸš— PartnerShowcaseTab: Vehicles loaded:",D.length,D),m(D);const R=D.find(te=>te.is_showcase_vehicle);R?(B(R.id),v({showcase_capacity:R.showcase_capacity||"",showcase_insurance_type:R.showcase_insurance_type||"",showcase_equipment:R.showcase_equipment||[],showcase_description:R.showcase_description||""})):D.length>0&&B(D[0].id)}}catch(g){console.error("Showcase data load error:",g),M("Vitrin verileri yÃ¼klenirken hata oluÅŸtu.")}finally{n(!1)}},[s]);o.useEffect(()=>{j()},[j]),o.useEffect(()=>{if(A&&b.length>0){const g=b.find(D=>D.id===A);g&&v({showcase_capacity:g.showcase_capacity||"",showcase_insurance_type:g.showcase_insurance_type||"",showcase_equipment:g.showcase_equipment||[],showcase_description:g.showcase_description||""})}},[A,b]);const $=g=>{Rl(g)?K(Ol(g)):K(null),O(D=>({...D,showcase_description:g}))},y=g=>{Rl(g)?L(Ol(g)):L(null),v(D=>({...D,showcase_description:g}))},F=async()=>{r(!0),M(null),z(!1);try{const g={showcase_description:Ll(_.showcase_description),showcase_working_hours:_.showcase_working_hours,showcase_payment_methods:_.showcase_payment_methods,showcase_is_24_7:_.showcase_is_24_7,showcase_satisfaction_rate:_.showcase_satisfaction_rate,showcase_response_time:_.showcase_response_time};await E.partnerShowcase.updateShowcase(s,g)?(z(!0),setTimeout(()=>z(!1),3e3)):M("KayÄ±t sÄ±rasÄ±nda bir hata oluÅŸtu.")}catch(g){console.error("Save partner showcase error:",g),M("KayÄ±t sÄ±rasÄ±nda bir hata oluÅŸtu.")}finally{r(!1)}},q=async()=>{if(A){r(!0),M(null),z(!1);try{const g={showcase_capacity:p.showcase_capacity,showcase_insurance_type:p.showcase_insurance_type,showcase_equipment:p.showcase_equipment,showcase_description:Ll(p.showcase_description)};await E.partnerShowcase.updateVehicleShowcase(A,g)?(z(!0),m(R=>R.map(te=>te.id===A?{...te,...g}:te)),setTimeout(()=>z(!1),3e3)):M("AraÃ§ bilgileri kaydedilirken hata oluÅŸtu.")}catch(g){console.error("Save vehicle showcase error:",g),M("AraÃ§ bilgileri kaydedilirken hata oluÅŸtu.")}finally{r(!1)}}},W=async g=>{r(!0);try{await E.partnerShowcase.setShowcaseVehicle(s,g)&&(m(R=>R.map(te=>({...te,is_showcase_vehicle:te.id===g}))),B(g),z(!0),setTimeout(()=>z(!1),3e3))}catch(D){console.error("Set showcase vehicle error:",D),M("Vitrin aracÄ± belirlenirken hata oluÅŸtu.")}finally{r(!1)}},G=g=>{O(D=>({...D,showcase_payment_methods:D.showcase_payment_methods.includes(g)?D.showcase_payment_methods.filter(R=>R!==g):[...D.showcase_payment_methods,g]}))},se=g=>{v(D=>({...D,showcase_equipment:D.showcase_equipment.includes(g)?D.showcase_equipment.filter(R=>R!==g):[...D.showcase_equipment,g]}))};return a?e.jsx("div",{className:"h-full flex items-center justify-center bg-white rounded-2xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ie,{size:48,className:"text-blue-600 animate-spin"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"Vitrin bilgileri yÃ¼kleniyor..."})]})}):e.jsxs("div",{className:"p-4 lg:p-6 max-w-6xl mx-auto",children:[e.jsx(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(vt,{size:28})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:"ðŸª Bu Ekran Sizin Vitrininiz!"}),e.jsxs("p",{className:"text-blue-100 text-sm leading-relaxed",children:["MÃ¼ÅŸteriler taleplerinde sizin firmanÄ±zÄ± gÃ¶rdÃ¼klerinde bu bilgileri gÃ¶recekler. Profesyonel bir tanÄ±tÄ±m, Ã§alÄ±ÅŸma saatleri ve Ã¶deme yÃ¶ntemleri ekleyerek mÃ¼ÅŸterilerin size gÃ¼venmesini saÄŸlayÄ±n.",e.jsx("strong",{className:"text-white",children:" Ä°yi bir vitrin = Daha fazla iÅŸ!"})]})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 bg-slate-100 p-1.5 rounded-xl",children:[e.jsxs("button",{onClick:()=>S("info"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${x==="info"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Firma Bilgileri"})]}),e.jsxs("button",{onClick:()=>S("vehicle"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${x==="vehicle"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(ee,{size:18}),e.jsx("span",{children:"AraÃ§ Vitrin"})]}),e.jsxs("button",{onClick:()=>S("preview"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${x==="preview"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Ds,{size:18}),e.jsx("span",{children:"Ã–nizleme"})]})]}),P&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(St,{className:"text-red-500 shrink-0",size:20}),e.jsx("p",{className:"text-red-700 text-sm",children:P}),e.jsx("button",{onClick:()=>M(null),className:"ml-auto text-red-400 hover:text-red-600",children:e.jsx(ne,{size:18})})]}),k&&e.jsxs(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(ye,{className:"text-green-500 shrink-0",size:20}),e.jsx("p",{className:"text-green-700 text-sm font-medium",children:"DeÄŸiÅŸiklikler baÅŸarÄ±yla kaydedildi!"})]}),x==="info"&&e.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(gs,{size:20,className:"text-blue-600"}),"Firma TanÄ±tÄ±mÄ±"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"MÃ¼ÅŸterilere kendinizi tanÄ±tÄ±n. TecrÃ¼beniz, Ã¶zellikleriniz ve neden sizi seÃ§meleri gerektiÄŸini yazÄ±n."}),e.jsx("textarea",{value:_.showcase_description,onChange:g=>$(g.target.value),placeholder:"Ã–rn: 15 yÄ±llÄ±k tecrÃ¼bemiz ile 7/24 profesyonel Ã§ekici hizmeti sunuyoruz. TÃ¼m araÃ§ tipleri iÃ§in uygun ekipmanlara sahibiz...",className:`w-full h-32 border rounded-xl p-4 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${I?"border-orange-300 bg-orange-50":"border-slate-200"}`,maxLength:500}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[I?e.jsxs("p",{className:"text-xs text-orange-600 flex items-center gap-1",children:[e.jsx(be,{size:14}),I]}):e.jsx("p",{className:"text-xs text-slate-400",children:"Maksimum 500 karakter"}),e.jsxs("span",{className:"text-xs text-slate-400",children:[_.showcase_description.length,"/500"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(ce,{size:20,className:"text-blue-600"}),"Ã‡alÄ±ÅŸma Saatleri"]}),e.jsxs("label",{className:"flex items-center gap-3 mb-4 p-4 bg-blue-50 rounded-xl border border-blue-100 cursor-pointer hover:bg-blue-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:_.showcase_is_24_7,onChange:g=>O(D=>({...D,showcase_is_24_7:g.target.checked})),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-bold text-blue-800 flex items-center gap-2",children:[e.jsx(da,{size:16}),"7/24 Hizmet Veriyoruz"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'Bu seÃ§enek iÅŸaretlenirse Ã§alÄ±ÅŸma saatleri yerine "7/24 AÃ§Ä±k" gÃ¶sterilir'})]})]}),!_.showcase_is_24_7&&e.jsx("input",{type:"text",value:_.showcase_working_hours,onChange:g=>O(D=>({...D,showcase_working_hours:g.target.value})),placeholder:"Ã–rn: Hafta iÃ§i 08:00 - 22:00, Hafta sonu 09:00 - 20:00",className:"w-full border border-slate-200 rounded-xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Ba,{size:20,className:"text-blue-600"}),"Kabul Edilen Ã–deme YÃ¶ntemleri"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:nr.map(g=>e.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${_.showcase_payment_methods.includes(g.value)?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsx("input",{type:"checkbox",checked:_.showcase_payment_methods.includes(g.value),onChange:()=>G(g.value),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-lg",children:g.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:g.label})]},g.value))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(da,{size:20,className:"text-blue-600"}),"Ortalama YanÄ±t SÃ¼resi"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"MÃ¼ÅŸteri taleplerine ortalama kaÃ§ dakikada yanÄ±t veriyorsunuz?"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["5 dk","10 dk","15 dk","30 dk"].map(g=>e.jsx("button",{onClick:()=>O(D=>({...D,showcase_response_time:g})),className:`py-3 px-4 rounded-xl font-medium transition-all ${_.showcase_response_time===g?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:g},g))})]}),e.jsx("button",{onClick:F,disabled:i,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center justify-center gap-3 disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:20,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{size:20}),"Firma Bilgilerini Kaydet"]})})]}),x==="vehicle"&&e.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:b.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-slate-200",children:[e.jsx(ee,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"HenÃ¼z AraÃ§ EklenmemiÅŸ"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:'Vitrin aracÄ± belirlemek iÃ§in Ã¶nce "Filo YÃ¶netimi" bÃ¶lÃ¼mÃ¼nden araÃ§ ekleyin.'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(ee,{size:20,className:"text-blue-600"}),"Vitrin AracÄ± SeÃ§in"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"MÃ¼ÅŸterilere gÃ¶sterilecek ana aracÄ±nÄ±zÄ± seÃ§in. Bu araÃ§ tekliflerinizde Ã¶ne Ã§Ä±kar."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(g=>e.jsxs("div",{onClick:()=>B(g.id),className:`p-4 rounded-xl border cursor-pointer transition-all ${A===g.id?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${g.is_showcase_vehicle?"bg-yellow-100":"bg-slate-100"}`,children:g.is_showcase_vehicle?e.jsx(re,{size:24,className:"text-yellow-500"}):e.jsx(ee,{size:24,className:"text-slate-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-bold text-slate-800",children:[g.brand," ",g.model]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[g.plate," â€¢ ",g.year]})]}),g.is_showcase_vehicle&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs font-bold px-2 py-1 rounded-lg",children:"Vitrin"})]}),A===g.id&&!g.is_showcase_vehicle&&e.jsxs("button",{onClick:D=>{D.stopPropagation(),W(g.id)},className:"w-full mt-3 py-2 bg-yellow-500 text-white rounded-lg text-sm font-bold hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{size:16}),"Vitrin AracÄ± Olarak Belirle"]})]},g.id))})]}),A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(zt,{size:20,className:"text-blue-600"}),"AraÃ§ Kapasitesi"]}),e.jsx("input",{type:"text",value:p.showcase_capacity,onChange:g=>v(D=>({...D,showcase_capacity:g.target.value})),placeholder:"Ã–rn: 3.5 ton, SUV'a kadar tÃ¼m araÃ§lar",className:"w-full border border-slate-200 rounded-xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(pr,{size:20,className:"text-blue-600"}),"Sigorta Tipi"]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Kasko","Trafik","Full Kasko"].map(g=>e.jsx("button",{onClick:()=>v(D=>({...D,showcase_insurance_type:g})),className:`py-3 px-4 rounded-xl font-medium transition-all ${p.showcase_insurance_type===g?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:g},g))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Qi,{size:20,className:"text-blue-600"}),"Ekipmanlar"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ir.map(g=>e.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-xl border cursor-pointer transition-all ${p.showcase_equipment.includes(g.value)?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsx("input",{type:"checkbox",checked:p.showcase_equipment.includes(g.value),onChange:()=>se(g.value),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-lg",children:g.icon}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:g.label})]},g.value))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(cr,{size:20,className:"text-blue-600"}),"AraÃ§ AÃ§Ä±klamasÄ±"]}),e.jsx("textarea",{value:p.showcase_description,onChange:g=>y(g.target.value),placeholder:"Ã–rn: Profesyonel Ã§ekici, her tÃ¼rlÃ¼ araÃ§ tipi iÃ§in uygundur. Hidrolik platform ve gece Ã§alÄ±ÅŸma lambasÄ± mevcuttur...",className:`w-full h-24 border rounded-xl p-4 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${V?"border-orange-300 bg-orange-50":"border-slate-200"}`,maxLength:300}),V&&e.jsxs("p",{className:"text-xs text-orange-600 flex items-center gap-1 mt-2",children:[e.jsx(be,{size:14}),V]})]}),e.jsx("button",{onClick:q,disabled:i,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center justify-center gap-3 disabled:opacity-50",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:20,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{size:20}),"AraÃ§ Bilgilerini Kaydet"]})})]})]})}),x==="preview"&&e.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-100 rounded-2xl p-4",children:[e.jsxs("p",{className:"text-center text-sm text-slate-500 mb-4 flex items-center justify-center gap-2",children:[e.jsx(Ds,{size:16}),"MÃ¼ÅŸteriler profilinizi bÃ¶yle gÃ¶recek"]}),e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg border border-slate-200 max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:((U=t.company_name)==null?void 0:U[0])||"P"}),e.jsxs("div",{className:"text-white flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:t.company_name||"Firma AdÄ±"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(re,{size:16,fill:"currentColor",className:"text-yellow-400"}),e.jsx("span",{className:"font-bold",children:t.rating||"4.8"}),e.jsxs("span",{className:"text-blue-200",children:["â€¢ ",(h==null?void 0:h.totalReviews)||0," deÄŸerlendirme"]})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[_.showcase_description&&e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:_.showcase_description}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[e.jsx(ce,{size:20,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Ã‡alÄ±ÅŸma Saatleri"}),e.jsx("p",{className:"font-medium text-slate-800",children:_.showcase_is_24_7?"ðŸŸ¢ 7/24 AÃ§Ä±k":_.showcase_working_hours||"BelirtilmemiÅŸ"})]})]}),_.showcase_response_time&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-xl",children:[e.jsx(da,{size:20,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Ortalama YanÄ±t"}),e.jsxs("p",{className:"font-medium text-green-700",children:[_.showcase_response_time," iÃ§inde yanÄ±t"]})]})]}),_.showcase_payment_methods.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ã–deme YÃ¶ntemleri"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.showcase_payment_methods.map(g=>{const D=nr.find(R=>R.value===g);return D?e.jsxs("span",{className:"bg-slate-100 text-slate-700 text-xs px-3 py-1.5 rounded-lg font-medium",children:[D.icon," ",D.label]},g):null})})]}),b.find(g=>g.is_showcase_vehicle)&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl border border-yellow-200",children:[e.jsxs("p",{className:"text-xs text-yellow-700 font-bold mb-2 flex items-center gap-1",children:[e.jsx(re,{size:14})," Vitrin AracÄ±"]}),(()=>{const g=b.find(D=>D.is_showcase_vehicle);return g?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{size:24,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-800",children:[g.brand," ",g.model]}),e.jsx("p",{className:"text-xs text-slate-500",children:p.showcase_capacity||g.capacity})]})]}):null})()]}),p.showcase_equipment.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Ekipmanlar"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.showcase_equipment.map(g=>{const D=ir.find(R=>R.value===g);return D?e.jsxs("span",{className:"bg-blue-50 text-blue-700 text-xs px-3 py-1.5 rounded-lg font-medium",children:[D.icon," ",D.label]},g):null})})]})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(Ae,{size:18}),"Vitrin Ä°puÃ§larÄ±"]}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Profesyonel bir tanÄ±tÄ±m yazÄ±sÄ± gÃ¼ven oluÅŸturur"}),e.jsx("li",{children:"â€¢ 7/24 hizmet, acil durumlar iÃ§in Ã§ok Ã¶nemlidir"}),e.jsx("li",{children:"â€¢ Ã‡oklu Ã¶deme yÃ¶ntemi sunmak mÃ¼ÅŸteri memnuniyetini artÄ±rÄ±r"}),e.jsx("li",{children:"â€¢ Ekipman listesi, hangi araÃ§lara hizmet verebileceÄŸinizi gÃ¶sterir"})]})]})]})]})},px=()=>{const[s,t]=o.useState([]),[a,n]=o.useState(null),[i,r]=o.useState(!0),[h,u]=o.useState("all"),[b,m]=o.useState(""),{answerCall:A,rejectCall:B,callStatus:x,currentCall:S,isInitiator:k}=Gi(),z=!k&&x==="ringing",P=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),M=P.id||P.partner_id||"";console.log("ðŸ“ž [PartnerCallHistory] partnerId:",M,"isIncoming:",z,"callStatus:",x),o.useEffect(()=>{if(M){_(),O();const j=ke.channel(`partner_calls_${M}`).on("postgres_changes",{event:"*",schema:"public",table:"customer_partner_calls",filter:`partner_id=eq.${M}`},$=>{console.log("ðŸ“ž [PartnerCallHistory] Realtime update for partner:",M,$),_(),O()}).subscribe();return()=>{ke.removeChannel(j)}}},[M,h]);const _=async()=>{try{r(!0);let j=ke.from("customer_partner_calls").select("*").eq("partner_id",M).order("started_at",{ascending:!1}).limit(50);h!=="all"&&(h==="connected"?j=j.in("status",["connected","ended"]):j=j.eq("status",h));const{data:$,error:y}=await j;if(y){console.error("Error loading calls:",y);return}t($||[])}catch(j){console.error("Error:",j)}finally{r(!1)}},O=async()=>{try{const{data:j,error:$}=await ke.from("customer_partner_calls").select("status, duration_seconds, quality_rating, credit_deducted").eq("partner_id",M);if($){console.error("Error loading stats:",$);return}if(j){const y=j.length,F=j.filter(R=>R.status==="connected"||R.status==="ended").length,q=j.filter(R=>R.status==="missed").length,W=j.filter(R=>R.status==="rejected").length,G=j.filter(R=>R.duration_seconds&&R.duration_seconds>0).map(R=>R.duration_seconds),se=G.length>0?G.reduce((R,te)=>R+te,0)/G.length:0,U=j.filter(R=>R.quality_rating).map(R=>R.quality_rating),g=U.length>0?U.reduce((R,te)=>R+te,0)/U.length:0,D=j.filter(R=>R.credit_deducted).length;n({total_calls:y,connected_calls:F,missed_calls:q,rejected_calls:W,avg_duration_seconds:se,avg_quality_rating:g,credits_spent:D})}}catch(j){console.error("Error:",j)}},p=j=>{if(!j)return"-";const $=Math.floor(j/60),y=j%60;return`${$}:${y.toString().padStart(2,"0")}`},v=j=>{const $=new Date(j),F=Math.floor((new Date().getTime()-$.getTime())/(1e3*60*60*24));return F===0?`BugÃ¼n ${$.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:F===1?`DÃ¼n ${$.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:F<7?$.toLocaleDateString("tr-TR",{weekday:"long",hour:"2-digit",minute:"2-digit"}):$.toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},I=(j,$)=>{switch(j){case"connected":case"ended":return{icon:e.jsx(Ml,{className:"text-green-500",size:18}),label:"CevaplandÄ±",color:"bg-green-50 text-green-700 border-green-200",badge:$?"1 kredi":null};case"missed":return{icon:e.jsx($l,{className:"text-orange-500",size:18}),label:"CevapsÄ±z",color:"bg-orange-50 text-orange-700 border-orange-200",badge:null};case"rejected":return{icon:e.jsx(ca,{className:"text-red-500",size:18}),label:"Reddedildi",color:"bg-red-50 text-red-700 border-red-200",badge:null};case"ringing":return{icon:e.jsx(ue,{className:"text-blue-500 animate-pulse",size:18}),label:"Ã‡alÄ±yor",color:"bg-blue-50 text-blue-700 border-blue-200",badge:null};default:return{icon:e.jsx(ue,{className:"text-slate-400",size:18}),label:"Bilinmiyor",color:"bg-slate-50 text-slate-700 border-slate-200",badge:null}}},K=j=>j.caller_id.startsWith("anon_")?{name:"Anonim Arayan",phone:j.caller_id.replace("anon_","").substring(0,8)+"...",isAnonymous:!0}:{name:j.caller_name||"MÃ¼ÅŸteri",phone:j.caller_phone||"-",isAnonymous:!1},V=s.filter(j=>{if(!b)return!0;const $=K(j);return $.name.toLowerCase().includes(b.toLowerCase())||$.phone.includes(b)}),L=s.find(j=>j.status==="ringing");return e.jsxs("div",{className:"space-y-6",children:[z&&x==="ringing"||L?e.jsx(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(H.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(ue,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Gelen Arama!"}),e.jsxs("p",{className:"text-white/80",children:[(S==null?void 0:S.callerName)||(L==null?void 0:L.caller_name)||"Anonim Arayan"," sizi arÄ±yor"]}),e.jsxs("p",{className:"text-white/60 text-sm mt-1 flex items-center gap-1",children:[e.jsx(rs,{size:14}),"Cevaplamak 1 kredi harcar"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:async()=>{const j=(S==null?void 0:S.id)||(L==null?void 0:L.id);j&&(await A(j),_())},className:"flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-bold hover:bg-green-50 transition-colors",children:[e.jsx(Bl,{size:20}),"Cevapla"]}),e.jsxs("button",{onClick:async()=>{const j=(S==null?void 0:S.id)||(L==null?void 0:L.id);j&&(await B(j),_())},className:"flex items-center gap-2 px-6 py-3 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:[e.jsx(ca,{size:20}),"Reddet"]})]})]})}):null,e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ue,{className:"text-blue-600",size:28}),"Arama GeÃ§miÅŸi"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Yolmov Voice Ã¼zerinden gelen aramalar"})]})}),a&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ue,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.total_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"Toplam Arama"})]})]})}),e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ml,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.connected_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"Cevaplanan"})]})]})}),e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx($l,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.missed_calls}),e.jsx("p",{className:"text-xs text-slate-500",children:"CevapsÄ±z"})]})]})}),e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(rs,{size:20,className:"text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.credits_spent}),e.jsx("p",{className:"text-xs text-slate-500",children:"Harcanan Kredi"})]})]})})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Ortalama GÃ¶rÃ¼ÅŸme SÃ¼resi"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:p(Math.round(a.avg_duration_seconds))})]}),e.jsx(ce,{size:32,className:"text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Ortalama Kalite PuanÄ±"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 flex items-center gap-1",children:[a.avg_quality_rating>0?a.avg_quality_rating.toFixed(1):"-",e.jsx(re,{size:20,className:"text-amber-200"})]})]}),e.jsx(Ea,{size:32,className:"text-amber-200"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ls,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Arayan ara...",value:b,onChange:j=>m(j.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"TÃ¼mÃ¼"},{id:"connected",label:"Cevaplanan"},{id:"missed",label:"CevapsÄ±z"},{id:"rejected",label:"Reddedilen"}].map(j=>e.jsx("button",{onClick:()=>u(j.id),className:`px-4 py-2.5 rounded-xl font-medium text-sm transition-all ${h===j.id?"bg-blue-600 text-white shadow-lg":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:j.label},j.id))})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Aramalar yÃ¼kleniyor..."})]}):V.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{size:32,className:"text-slate-300"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"HenÃ¼z arama yok"}),e.jsx("p",{className:"text-slate-500",children:h==="all"?"MÃ¼ÅŸteriler sizi aradÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necek.":"Bu filtreye uygun arama bulunamadÄ±."})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:V.map(j=>{const $=I(j.status,j.credit_deducted),y=K(j);return e.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${y.isAnonymous?"bg-slate-100":"bg-blue-100"}`,children:e.jsx(Ps,{size:24,className:y.isAnonymous?"text-slate-400":"text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-800 truncate",children:y.name}),y.isAnonymous&&e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 text-xs rounded-full",children:"Anonim"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[$.icon,$.label]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:v(j.started_at)}),j.duration_seconds&&j.duration_seconds>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{size:14}),p(j.duration_seconds)]})]})]})]}),j.credit_deducted&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(rs,{size:14,className:"text-yellow-600"}),e.jsx("span",{className:"text-xs font-semibold text-yellow-700",children:"-1"})]}),j.quality_rating&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(re,{size:14,className:"text-amber-500 fill-amber-500"}),e.jsx("span",{className:"text-sm font-semibold text-amber-700",children:j.quality_rating})]}),j.status==="ringing"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:async()=>{await answerCallById(j.id),_()},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 text-white rounded-lg text-xs font-medium hover:bg-green-600 transition-colors",children:[e.jsx(Bl,{size:14}),"Cevapla"]}),e.jsxs("button",{onClick:async()=>{await rejectCallById(j.id),_()},className:"flex items-center gap-1 px-3 py-1.5 bg-red-500 text-white rounded-lg text-xs font-medium hover:bg-red-600 transition-colors",children:[e.jsx(ca,{size:14}),"Reddet"]})]}):e.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium border ${$.color}`,children:$.label})]})},j.id)})})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg h-fit",children:e.jsx(ue,{size:18,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"Yolmov Voice HakkÄ±nda"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"MÃ¼ÅŸteriler profilinizden sizi doÄŸrudan arayabilir. AramayÄ± cevapladÄ±ÄŸÄ±nÄ±zda 1 kredi dÃ¼ÅŸer. CevapsÄ±z ve reddedilen aramalarda kredi dÃ¼ÅŸmez."})]})]})})]})},bx=({fleet:s,partnerHistory:t,partnerName:a,showVehicleEditPage:n,setShowVehicleEditPage:i,selectedVehicleForSettings:r,setSelectedVehicleForSettings:h,selectedVehicleForHistory:u,setSelectedVehicleForHistory:b,vehicleStats:m,loadingVehicleStats:A,setShowAddVehicleModal:B})=>n&&r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:p-8 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>{i(!1),h(null)},className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-bold transition-all",children:[e.jsx(Oe,{size:20,className:"rotate-90"}),e.jsx("span",{children:"Filo YÃ¶netimine DÃ¶n"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${r.status==="active"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:r.status==="active"?"ðŸŸ¢ Aktif":"ðŸŸ  BakÄ±mda"})})]}),e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-32 h-32 rounded-2xl overflow-hidden bg-slate-100 border-4 border-white shadow-lg",children:r.front_photo_url?e.jsx("img",{src:r.front_photo_url,alt:r.plate,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ee,{size:48,className:"text-slate-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-2",children:r.plate}),e.jsxs("p",{className:"text-xl text-slate-600 mb-4",children:[r.brand," ",r.model]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-blue-600 font-bold uppercase",children:"AraÃ§ Tipi"}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:r.type})]}),e.jsxs("div",{className:"bg-purple-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-purple-600 font-bold uppercase",children:"Model YÄ±lÄ±"}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:r.year})]}),e.jsxs("div",{className:"bg-amber-50 px-4 py-2 rounded-xl",children:[e.jsx("span",{className:"text-xs text-amber-600 font-bold uppercase",children:"SÃ¼rÃ¼cÃ¼"}),e.jsx("p",{className:"text-sm font-bold text-amber-900",children:r.driver})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(ee,{size:20,className:"text-white"})}),"AraÃ§ Bilgileri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka"}),e.jsx("input",{type:"text",defaultValue:r.plate,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"AraÃ§ Tipi"}),e.jsxs("select",{defaultValue:r.type,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"cekici",children:"Ã‡ekici"}),e.jsx("option",{value:"vinc",children:"VinÃ§"}),e.jsx("option",{value:"kurtarici",children:"KurtarÄ±cÄ±"}),e.jsx("option",{value:"servis",children:"Servis AracÄ±"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka"}),e.jsx("input",{type:"text",defaultValue:r.brand,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model"}),e.jsx("input",{type:"text",defaultValue:r.model,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model YÄ±lÄ±"}),e.jsx("input",{type:"number",defaultValue:r.year,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"SÃ¼rÃ¼cÃ¼"}),e.jsx("input",{type:"text",defaultValue:r.driver,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"AraÃ§ Durumu"}),e.jsxs("select",{defaultValue:r.status,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"active",children:"ðŸŸ¢ Aktif"}),e.jsx("option",{value:"maintenance",children:"ðŸŸ  BakÄ±mda"}),e.jsx("option",{value:"inactive",children:"âš« Pasif"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center",children:e.jsx(de,{size:20,className:"text-white"})}),"AraÃ§ GÃ¶rselleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Ã–n GÃ¶rÃ¼nÃ¼m"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.front_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.front_photo_url,alt:"Ã–n",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"DeÄŸiÅŸtir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(de,{size:32})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Yan GÃ¶rÃ¼nÃ¼m"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.side_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.side_photo_url,alt:"Yan",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"DeÄŸiÅŸtir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(de,{size:32})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Arka GÃ¶rÃ¼nÃ¼m"}),e.jsx("div",{className:"aspect-video bg-slate-100 rounded-2xl overflow-hidden border-4 border-slate-200 relative group",children:r.back_photo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.back_photo_url,alt:"Arka",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{className:"bg-white text-slate-900 px-4 py-2 rounded-xl font-bold text-sm",children:"DeÄŸiÅŸtir"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx(de,{size:32})})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(vt,{size:20,className:"text-white"})}),"Vitrin Bilgileri (MÃ¼ÅŸterilere GÃ¶sterilir)"]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ae,{size:20,className:"text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-800",children:"Bu bilgiler mÃ¼ÅŸteri vitrininizde gÃ¶rÃ¼necektir"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Hizmet saÄŸlayÄ±cÄ± profilinizde bu araÃ§ bilgileri mÃ¼ÅŸterilere gÃ¶sterilir."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{defaultValue:r.showcase_capacity||"",className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve Ã¼zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{defaultValue:r.showcase_insurance_type||"",className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-bold focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"TaÅŸÄ±ma Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk SigortasÄ±"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam KapsamlÄ±"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"VinÃ§"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz Ã‡ekim"},{value:"gps_takip",label:"GPS Takip"},{value:"gece_aydinlatma",label:"Gece AydÄ±nlatma"}].map(x=>e.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-bold ${(r.showcase_equipment||[]).includes(x.value)?"bg-orange-500 text-white":"bg-slate-100 text-slate-500"}`,children:x.label},x.value))})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"AraÃ§ AÃ§Ä±klamasÄ± (Vitrin)"}),e.jsx("textarea",{defaultValue:r.showcase_description||"",placeholder:"Ã–rn: AracÄ±mÄ±z son model olup, alÃ§ak ÅŸasi spor araÃ§lar dahil tÃ¼m binek ve hafif ticari araÃ§larÄ± hasarsÄ±z yÃ¼kleme garantisi ile taÅŸÄ±maktadÄ±r.",rows:4,className:"w-full p-4 bg-slate-50 rounded-xl border-2 border-slate-200 text-slate-900 font-medium focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Bu aÃ§Ä±klama mÃ¼ÅŸterilere gÃ¶sterilecektir. Telefon, email veya sosyal medya bilgisi girmeyin."})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl ${r.is_showcase_vehicle?"bg-green-100 border-2 border-green-300":"bg-slate-100 border-2 border-slate-200"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${r.is_showcase_vehicle?"bg-green-500 text-white":"bg-slate-300 text-slate-500"}`,children:r.is_showcase_vehicle?e.jsx(je,{size:14}):null}),e.jsx("span",{className:`font-bold ${r.is_showcase_vehicle?"text-green-800":"text-slate-600"}`,children:r.is_showcase_vehicle?"âœ“ Bu araÃ§ vitrin aracÄ± olarak belirlendi":"Bu araÃ§ vitrin aracÄ± olarak belirlenmedi"})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-3xl shadow-xl p-6 text-white",children:[e.jsx("h3",{className:"text-xl font-black mb-6",children:"AraÃ§ Ä°statistikleri"}),A?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ie,{size:32,className:"animate-spin text-white"})}):m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Toplam Ä°ÅŸ"}),e.jsx("div",{className:"text-3xl font-black",children:m.totalJobs})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Son 30 GÃ¼n"}),e.jsx("div",{className:"text-3xl font-black",children:m.monthlyJobs})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Ortalama Puan"}),e.jsx("div",{className:"text-3xl font-black",children:m.averageRating>0?`${m.averageRating} â­`:"HenÃ¼z yok"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Toplam KazanÃ§"}),e.jsxs("div",{className:"text-2xl font-black",children:["â‚º",m.totalEarnings.toLocaleString("tr-TR")]})]})]}):e.jsx("div",{className:"text-center py-8 text-blue-100 text-sm",children:"Veri yÃ¼klenemedi"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 mb-4",children:"HÄ±zlÄ± Ä°ÅŸlemler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-slate-900 text-white p-4 rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center gap-3",children:[e.jsx(ur,{size:20}),"Ä°ÅŸ GeÃ§miÅŸini GÃ¶r"]}),e.jsxs("button",{className:"w-full bg-blue-500 text-white p-4 rounded-xl font-bold hover:bg-blue-600 transition-all flex items-center gap-3",children:[e.jsx(xe,{size:20}),"Belgeleri GÃ¶rÃ¼ntÃ¼le"]}),e.jsxs("button",{className:"w-full bg-red-500 text-white p-4 rounded-xl font-bold hover:bg-red-600 transition-all flex items-center gap-3",children:[e.jsx(St,{size:20}),"AracÄ± Devre DÄ±ÅŸÄ± BÄ±rak"]})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:e.jsxs("button",{onClick:()=>{alert("âœ… AraÃ§ bilgileri baÅŸarÄ±yla gÃ¼ncellendi!"),i(!1),h(null)},className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white p-5 rounded-2xl font-black text-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg shadow-green-200 flex items-center justify-center gap-3",children:[e.jsx(wa,{size:24}),"DeÄŸiÅŸiklikleri Kaydet"]})})]})]})]})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"hidden lg:flex justify-between items-center p-4 lg:p-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"AraÃ§ Filosu"}),e.jsx("p",{className:"text-sm text-slate-500",children:"KayÄ±tlÄ± araÃ§larÄ±nÄ±zÄ± yÃ¶netin ve durumlarÄ±nÄ± izleyin."})]}),e.jsxs("button",{onClick:()=>B(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-slate-800 flex items-center gap-2",children:[e.jsx(as,{size:16})," Yeni AraÃ§ Ekle"]})]}),e.jsx("div",{className:"lg:hidden px-4 pt-2",children:e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-4 text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Toplam AraÃ§"}),e.jsx("p",{className:"text-2xl font-black",children:s.length})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-green-400",children:"Aktif"}),e.jsx("p",{className:"text-lg font-bold",children:s.filter(x=>x.status==="active").length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-orange-400",children:"BakÄ±m"}),e.jsx("p",{className:"text-lg font-bold",children:s.filter(x=>x.status!=="active").length})]})]})]})}),e.jsx("div",{className:"px-4 lg:px-0 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:s.length>0?e.jsxs(e.Fragment,{children:[s.map(x=>e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"h-36 lg:h-40 bg-slate-100 relative",children:[x.front_photo_url?e.jsx("img",{src:x.front_photo_url,alt:x.plate,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-100 to-slate-200",children:e.jsx(ee,{size:48,className:"text-slate-300"})}),e.jsx("div",{className:`absolute top-3 right-3 px-2.5 py-1 rounded-full text-xs font-bold shadow-sm ${x.status==="active"?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:x.status==="active"?"Aktif":"BakÄ±mda"})]}),e.jsxs("div",{className:"p-4 lg:p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-slate-900 text-lg lg:text-xl tracking-wide",children:x.plate}),e.jsxs("p",{className:"text-sm text-slate-500",children:[x.brand," ",x.model]})]}),e.jsx("button",{onClick:()=>{h(x),i(!0)},className:"p-3 text-slate-400 hover:text-blue-600 bg-slate-50 hover:bg-blue-50 rounded-xl transition-colors -mr-1",children:e.jsx(zt,{size:18})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-slate-500",children:"AraÃ§ Tipi"}),e.jsx("span",{className:"font-semibold text-slate-800 capitalize",children:x.type})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-slate-500",children:"SÃ¼rÃ¼cÃ¼"}),e.jsxs("span",{className:"font-semibold text-slate-800 flex items-center gap-1.5",children:[e.jsx(Ps,{size:14,className:"text-slate-400"}),x.driver||a]})]})]}),e.jsxs("div",{className:"mt-4 pt-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>{h(x),i(!0)},className:"flex-1 py-2.5 rounded-xl bg-slate-900 text-white text-xs font-bold hover:bg-slate-800 transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(gs,{size:14})," DÃ¼zenle"]}),e.jsxs("button",{onClick:()=>b(x),className:"flex-1 py-2.5 rounded-xl border border-slate-200 text-slate-600 text-xs font-bold hover:bg-slate-50 transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(hr,{size:14})," GeÃ§miÅŸ"]})]})]})]},x.id)),e.jsxs("button",{onClick:()=>B(!0),className:"hidden lg:flex bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200 flex-col items-center justify-center text-slate-400 hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 transition-all min-h-[300px] gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-current flex items-center justify-center",children:e.jsx(as,{size:24})}),e.jsx("span",{className:"font-bold",children:"Yeni AraÃ§ TanÄ±mla"})]})]}):e.jsxs("div",{className:"col-span-full text-center py-12 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[e.jsx(ee,{size:64,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 font-bold text-lg mb-2",children:"HenÃ¼z araÃ§ eklenmemiÅŸ"}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:"Filonuza ilk aracÄ±nÄ±zÄ± ekleyin"}),e.jsxs("button",{onClick:()=>B(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-xl text-sm font-bold hover:bg-slate-800 inline-flex items-center gap-2",children:[e.jsx(as,{size:16})," Yeni AraÃ§ Ekle"]})]})}),e.jsx("button",{onClick:()=>B(!0),className:"lg:hidden fixed bottom-24 right-4 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg shadow-blue-300 flex items-center justify-center hover:bg-blue-700 active:scale-95 transition-all z-30",children:e.jsx(as,{size:24,strokeWidth:2.5})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>b(null),children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AraÃ§ GeÃ§miÅŸi"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u.plate," - Tamamlanan Ä°ÅŸler"]})]}),e.jsx("button",{onClick:()=>b(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200",children:e.jsx(ne,{size:20})})]}),e.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((x,S)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200 hover:border-blue-300 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900",children:["#",x.id]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(x.completionTime).toLocaleString("tr-TR")})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"TamamlandÄ±"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hizmet"}),e.jsx("p",{className:"font-bold text-gray-900",children:x.serviceType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"MÃ¼ÅŸteri"}),e.jsx("p",{className:"font-bold text-gray-900",children:x.customerName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rota"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[x.startLocation," ",x.endLocation?`â†’ ${x.endLocation}`:""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"KazanÃ§"}),e.jsxs("p",{className:"font-bold text-green-600",children:["â‚º",x.partnerEarning]})]})]})]},S))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsxs("strong",{children:["Toplam ",t.length," iÅŸ"]}),' bu araÃ§la tamamlandÄ±. DetaylÄ± rapor iÃ§in "GeÃ§miÅŸ Ä°ÅŸler" sekmesini kullanabilirsiniz.']})})]})})]}),fx=["Kibar MÃ¼ÅŸteri","Sorunsuz Ã–deme","BahÅŸiÅŸ BÄ±raktÄ±","Konum DoÄŸruydu","AnlayÄ±ÅŸlÄ±","Ä°letiÅŸim KolaydÄ±"],gx=({reviews:s,ratingFilter:t,setRatingFilter:a,showObjectionPage:n,setShowObjectionPage:i,selectedReviewForObjection:r,setSelectedReviewForObjection:h,objectionReason:u,setObjectionReason:b,objectionDetails:m,setObjectionDetails:A,handleSubmitObjection:B,handleOpenObjection:x})=>{if(n&&r)return e.jsx("div",{className:"p-4 md:p-6 h-full",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-3xl border border-slate-200 shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-6 text-white",children:[e.jsxs("button",{onClick:()=>{i(!1),h(null),b(""),A("")},className:"mb-4 text-sm flex items-center gap-2 hover:text-red-100 transition-colors",children:[e.jsx(Oe,{size:16,className:"rotate-90"})," Geri DÃ¶n"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(gt,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"DeÄŸerlendirmeye Ä°tiraz"}),e.jsxs("p",{className:"text-sm text-red-100",children:["Ä°ÅŸ No: #",r.jobId]})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white font-bold text-lg shrink-0",children:"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-3",children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:"MÃ¼ÅŸteri ***"}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((z,P)=>e.jsx(re,{size:18,fill:P<r.rating?"#ef4444":"none",className:P<r.rating?"text-red-500":"text-slate-300"},P))})]}),e.jsxs("p",{className:"text-sm text-slate-700 mb-3 leading-relaxed bg-white p-3 rounded-lg",children:['"',r.comment,'"']}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsx("span",{className:"text-slate-500",children:r.date}),e.jsx("span",{className:"text-slate-300",children:"â€¢"}),e.jsx("span",{className:"text-slate-600 font-medium",children:r.service})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Ä°tiraz Nedeni *"}),e.jsxs("select",{value:u,onChange:z=>b(z.target.value),className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm text-slate-800 font-medium focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz..."}),e.jsx("option",{value:"wrong_job",children:"YanlÄ±ÅŸ Ä°ÅŸ KaydÄ±"}),e.jsx("option",{value:"false_claim",children:"HaksÄ±z Ä°ddia"}),e.jsx("option",{value:"customer_mistake",children:"MÃ¼ÅŸteri HatasÄ±"}),e.jsx("option",{value:"technical_issue",children:"Teknik Sorun"}),e.jsx("option",{value:"unfair_rating",children:"Adaletsiz Puanlama"}),e.jsx("option",{value:"other",children:"DiÄŸer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"AÃ§Ä±klama & KanÄ±tlar *"}),e.jsx("textarea",{value:m,onChange:z=>A(z.target.value),placeholder:"Ä°tirazÄ±nÄ±zÄ± detaylÄ± olarak aÃ§Ä±klayÄ±n. Varsa fotoÄŸraf, mesaj ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gibi kanÄ±tlarÄ±nÄ±zÄ± aÃ§Ä±klayÄ±n.",rows:10,maxLength:500,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[m.length,"/500 karakter"]})]}),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-5 flex items-start gap-3",children:[e.jsx(Ae,{size:22,className:"text-amber-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-900 mb-2",children:"âš ï¸ Ã–nemli Bilgilendirme"}),e.jsxs("p",{className:"text-xs text-amber-800 leading-relaxed",children:["Ä°tirazÄ±nÄ±z ekibimiz tarafÄ±ndan ",e.jsx("strong",{children:"3 iÅŸ gÃ¼nÃ¼ iÃ§inde"})," incelenecektir. Ä°tiraz haklÄ± bulunursa deÄŸerlendirme ortalamanÄ±zdan Ã§Ä±karÄ±lÄ±r. Ancak haksÄ±z itirazlar hesabÄ±nÄ±za uyarÄ± olarak iÅŸlenir."]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i(!1),h(null),b(""),A("")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Ä°ptal"}),e.jsxs("button",{onClick:B,disabled:!u||!m.trim(),className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," Ä°tiraz GÃ¶nder"]})]})]})]})});const S=s.length>0?s.reduce((z,P)=>z+P.rating,0)/s.length:0,k=t?s.filter(z=>t===2?z.rating<=2:z.rating===t):s;return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"MÃ¼ÅŸteri DeÄŸerlendirmeleri"}),e.jsx("p",{className:"text-sm text-slate-500",children:"AldÄ±ÄŸÄ±nÄ±z puanlar ve yorumlar"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(re,{size:24,fill:"currentColor",className:"text-yellow-400"}),e.jsx("span",{className:"text-3xl font-bold",children:S.toFixed(1)})]}),e.jsxs("p",{className:"text-xs text-slate-300",children:[s.length," DeÄŸerlendirme"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("button",{onClick:()=>a(null),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===null?"border-slate-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#64748b",className:"text-slate-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"TÃ¼mÃ¼"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.length})]}),e.jsxs("button",{onClick:()=>a(5),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===5?"border-green-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#22c55e",className:"text-green-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"5 YÄ±ldÄ±z"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(z=>z.rating===5).length})]}),e.jsxs("button",{onClick:()=>a(4),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===4?"border-blue-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#3b82f6",className:"text-blue-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"4 YÄ±ldÄ±z"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(z=>z.rating===4).length})]}),e.jsxs("button",{onClick:()=>a(3),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===3?"border-amber-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#f59e0b",className:"text-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"3 YÄ±ldÄ±z"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(z=>z.rating===3).length})]}),e.jsxs("button",{onClick:()=>a(2),className:`bg-white rounded-xl border-2 p-4 text-left transition-all hover:shadow-md ${t===2?"border-red-400 shadow-md":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(re,{size:16,fill:"#ef4444",className:"text-red-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"â‰¤2 YÄ±ldÄ±z"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.filter(z=>z.rating<=2).length})]})]}),e.jsx("div",{className:"space-y-4",children:k.length>0?k.map(z=>{const P=z.rating<3,M=P?"MÃ¼ÅŸteri ***":z.customerName,_=P?"**********":z.customerPhone;return e.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl border-2 p-4 md:p-6 transition-all hover:shadow-md ${P?"border-red-200 bg-red-50/30":"border-slate-200"}`,children:[e.jsxs("div",{className:"hidden md:flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md ${P?"bg-red-500":"bg-slate-700"}`,children:P?"?":z.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:M}),e.jsxs("p",{className:"text-xs text-slate-500",children:[z.date," â€¢ ",z.service]}),P?e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx(gt,{size:12}),"Bilgiler gizlendi"]}):e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:_})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((O,p)=>e.jsx(re,{size:18,fill:p<z.rating?"#FFA500":"none",className:p<z.rating?"text-orange-500":"text-slate-300"},p))})]}),e.jsxs("div",{className:"md:hidden flex items-start gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-md shrink-0 ${P?"bg-red-500":"bg-slate-700"}`,children:P?"?":z.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs text-slate-500",children:[z.date," â€¢ ",z.service]}),P&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx(gt,{size:12}),"Bilgiler gizlendi"]})]})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-4 leading-relaxed",children:z.comment}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:z.tags.map((O,p)=>e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold ${fx.includes(O)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:O},p))}),e.jsx("div",{className:"md:hidden space-y-3 pt-4 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-sm",children:M}),!P&&e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:_})]}),e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((O,p)=>e.jsx(re,{size:16,fill:p<z.rating?"#FFA500":"none",className:p<z.rating?"text-orange-500":"text-slate-300"},p))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 md:border-t-0 md:pt-0 mt-4 md:mt-0",children:[e.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["Ä°ÅŸ No: #",z.jobId]}),P&&e.jsxs("button",{onClick:()=>x(z),className:"text-xs text-slate-600 hover:text-slate-900 font-bold flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx(eo,{size:14})," Ä°tiraz Et"]})]})]},z.id)}):e.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[e.jsx(re,{size:64,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 font-bold text-lg mb-2",children:"HenÃ¼z deÄŸerlendirme yok"}),e.jsx("p",{className:"text-xs text-slate-400",children:"TamamladÄ±ÄŸÄ±nÄ±z iÅŸlerden sonra mÃ¼ÅŸteri deÄŸerlendirmeleri burada gÃ¶rÃ¼necek"})]})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-5",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ae,{size:22,className:"text-blue-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-bold mb-2",children:"ðŸ“‹ DÃ¼ÅŸÃ¼k PuanlÄ± DeÄŸerlendirmeler HakkÄ±nda"}),e.jsx("p",{className:"leading-relaxed",children:"3 yÄ±ldÄ±z ve altÄ± puan alan iÅŸlerde mÃ¼ÅŸteri bilgileri (isim ve telefon) gizlenir. Bu puanlar ortalamanÄ±za dahildir ancak iletiÅŸim bilgilerine eriÅŸiminiz kÄ±sÄ±tlanÄ±r. Bu, her iki tarafÄ±n da gÃ¼venliÄŸi iÃ§in alÄ±nan bir Ã¶nlemdir."})]})]})})]})},jx=({tickets:s,partnerId:t,partnerName:a,showNewTicketPage:n,setShowNewTicketPage:i,ticketSubject:r,setTicketSubject:h,ticketCategory:u,setTicketCategory:b,ticketDescription:m,setTicketDescription:A})=>{const[B,x]=o.useState(null);if(n)return e.jsx("div",{className:"p-4 md:p-6 h-full",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl border border-slate-200 shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:[e.jsxs("button",{onClick:()=>{i(!1),h(""),b(""),A("")},className:"mb-4 text-sm flex items-center gap-2 hover:text-blue-100 transition-colors",children:[e.jsx(Oe,{size:16,className:"rotate-90"})," Geri DÃ¶n"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(xe,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Yeni Destek Talebi"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Sorununuzu detaylÄ± olarak aÃ§Ä±klayÄ±n"})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Kategori *"}),e.jsxs("select",{value:u,onChange:k=>b(k.target.value),className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz..."}),e.jsx("option",{value:"technical",children:"Teknik Sorun"}),e.jsx("option",{value:"customer_complaint",children:"MÃ¼ÅŸteri Åžikayeti"}),e.jsx("option",{value:"account",children:"Hesap Ä°ÅŸlemleri"}),e.jsx("option",{value:"document",children:"Belge & Onay"}),e.jsx("option",{value:"other",children:"DiÄŸer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Konu *"}),e.jsx("input",{type:"text",value:r,onChange:k=>h(k.target.value),placeholder:"Ã–rn: Uygulamada teknik bir sorun yaÅŸÄ±yorum",maxLength:100,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[r.length,"/100 karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"AÃ§Ä±klama *"}),e.jsx("textarea",{value:m,onChange:k=>A(k.target.value),placeholder:"Sorununuzu detaylÄ± olarak aÃ§Ä±klayÄ±n. Gerekirse iÅŸ numarasÄ±, tarih gibi bilgileri ekleyin.",rows:8,maxLength:1e3,className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[m.length,"/1000 karakter"]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Ae,{size:20,className:"text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Destek SÃ¼resi"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Talepler genellikle 2-4 iÅŸ saati iÃ§inde yanÄ±tlanÄ±r."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i(!1),h(""),b(""),A("")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Ä°ptal"}),e.jsxs("button",{onClick:()=>{if(!u||!r.trim()||!m.trim()){alert("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.");return}console.log("Destek Talebi:",{partnerId:t,partnerName:a,category:u,subject:r,description:m}),i(!1),h(""),b(""),A(""),alert("Destek talebiniz baÅŸarÄ±yla oluÅŸturuldu.")},disabled:!u||!r.trim()||!m.trim(),className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," Talep GÃ¶nder"]})]})]})]})});const S=()=>B?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",onClick:()=>x(null),children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",onClick:k=>k.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Destek Talebi DetayÄ±"}),e.jsxs("p",{className:"text-sm text-white/80",children:["Talep No: #",B.id]})]}),e.jsx("button",{onClick:()=>x(null),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Konu:"})," ",B.subject]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Tarih:"})," ",B.date]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Durum:"})," ",B.status]}),e.jsx("p",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsx("span",{className:"font-bold",children:"Detaylar:"})}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor."})]})]})}):null;return e.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(ue,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Sesli Destek"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Operasyonel sorunlar iÃ§in 7/24 temsilcilerimizle gÃ¶rÃ¼ÅŸÃ¼n."}),e.jsx(io,{variant:"primary",size:"md",label:"Destek HattÄ±nÄ± Ara",className:"w-full"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(xe,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Talep OluÅŸtur"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Finansal konular veya ÅŸikayetler iÃ§in bilet oluÅŸturun."}),e.jsx("button",{onClick:()=>i(!0),className:"w-full py-3 bg-white border-2 border-slate-100 text-slate-700 rounded-xl font-bold hover:border-blue-200 hover:text-blue-600 transition-colors",children:"Yeni Bilet AÃ§"})]})]}),e.jsxs("div",{className:"flex-1 bg-white rounded-3xl border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"GeÃ§miÅŸ Taleplerim"}),e.jsx("div",{className:"space-y-2",children:s.length>0?s.map(k=>e.jsxs("div",{onClick:()=>x(k),className:"flex items-center justify-between p-4 rounded-xl border border-slate-100 hover:bg-slate-50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${k.status==="open"?"bg-green-500":"bg-slate-300"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:[k.subject," ",e.jsxs("span",{className:"text-slate-400 font-normal",children:["#",k.id]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:k.date})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-xs font-bold ${k.status==="open"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:k.status==="open"?"AÃ§Ä±k":"Ã‡Ã¶zÃ¼ldÃ¼"})]},k.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jt,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"HenÃ¼z destek talebi yok"}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"SorularÄ±nÄ±z veya sorunlarÄ±nÄ±z iÃ§in yukarÄ±dan talep oluÅŸturabilirsiniz"})]})})]}),e.jsx(pe,{children:B&&S()})]})},yx=({requests:s,partnerHistory:t,emptyTrucks:a,reviews:n,handleTabChange:i,setActiveTab:r,setShowAddCreditModal:h})=>e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>i("requests"),className:"bg-slate-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(qs,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:s.length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"Yeni Ä°ÅŸ Talebi"})]}),e.jsxs("button",{onClick:()=>i("history"),className:"bg-slate-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ye,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:t.filter(u=>u.status==="completed").length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"Tamamlanan Ä°ÅŸ"})]}),e.jsxs("button",{onClick:()=>i("emptyTrucks"),className:"bg-slate-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ee,{size:24,className:"opacity-80"}),e.jsx("span",{className:"text-3xl font-black",children:a.length})]}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:"BoÅŸ AraÃ§"})]}),e.jsxs("button",{onClick:()=>i("reviews"),className:"bg-slate-900 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{size:24,className:"opacity-80",fill:"currentColor"}),e.jsx("span",{className:"text-3xl font-black",children:n.length>0?(n.reduce((u,b)=>u+(b.rating||0),0)/n.length).toFixed(1):"-"})]}),e.jsxs("p",{className:"text-sm font-bold opacity-80",children:["Ortalama Puan (",n.length,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-yellow-500",fill:"currentColor"})," Yeni Ä°ÅŸler"]}),e.jsx("button",{onClick:()=>r("newJobs"),className:"text-sm text-blue-600 font-bold hover:text-blue-700",children:"TÃ¼mÃ¼nÃ¼ GÃ¶r â†’"})]}),e.jsx("div",{className:"space-y-3",children:s.slice(0,3).map(u=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-blue-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:u.serviceType}),e.jsx("span",{className:"text-xs text-slate-500",children:u.distance})]}),e.jsx("p",{className:"text-xs text-slate-600",children:u.location})]},u.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.jsx(ee,{size:20,className:"text-orange-600"})," BoÅŸ DÃ¶nen AraÃ§lar"]}),e.jsx("button",{onClick:()=>r("emptyTrucks"),className:"text-sm text-blue-600 font-bold hover:text-blue-700",children:"TÃ¼mÃ¼nÃ¼ GÃ¶r â†’"})]}),e.jsx("div",{className:"space-y-3",children:a.slice(0,3).map(u=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-orange-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:u.vehicle}),e.jsx("span",{className:"text-xs text-slate-500",children:u.date})]}),e.jsxs("p",{className:"text-xs text-slate-600",children:[u.origin," â†’ ",u.destinations[0]]})]},u.id))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-8 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"HÄ±zlÄ± Ä°ÅŸlemler"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>r("newJobs"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(re,{size:32,className:"mx-auto mb-2 text-yellow-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Yeni Ä°ÅŸler"})]}),e.jsxs("button",{onClick:()=>r("emptyTrucks"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(ee,{size:32,className:"mx-auto mb-2 text-orange-400"}),e.jsx("p",{className:"text-sm font-bold",children:"BoÅŸ AraÃ§ Ekle"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(rs,{size:32,className:"mx-auto mb-2 text-green-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Kredi YÃ¼kle"})]}),e.jsxs("button",{onClick:()=>r("settings"),className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 transition-all text-center",children:[e.jsx(zt,{size:32,className:"mx-auto mb-2 text-purple-400"}),e.jsx("p",{className:"text-sm font-bold",children:"Ayarlar"})]})]})]})]}),Nx=({credits:s,transactions:t,walletFilter:a,setWalletFilter:n,setShowAddCreditModal:i})=>e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(wt,{size:64})}),e.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:"Toplam Bakiye (Kredi)"}),e.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[s," ",e.jsx("span",{className:"text-lg font-normal text-slate-400",children:"Kredi"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl text-sm font-bold transition-colors shadow-lg shadow-blue-900/50 flex items-center gap-2",children:[e.jsx(as,{size:16})," Kredi YÃ¼kle"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 shadow-sm flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-lg",children:e.jsx(Ea,{size:20})}),e.jsx("span",{className:"text-slate-500 text-sm font-bold",children:"Bu Ay KazanÃ§"})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:"â‚º12,450.00"}),e.jsxs("p",{className:"text-xs text-green-600 font-bold mt-1 flex items-center gap-1",children:[e.jsx(_a,{size:12})," %12 artÄ±ÅŸ"]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 shadow-sm flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(Yi,{size:20})}),e.jsx("span",{className:"text-slate-500 text-sm font-bold",children:"Tamamlanan Ä°ÅŸ"})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:"42 Adet"}),e.jsx("p",{className:"text-xs text-slate-400 font-bold mt-1",children:"Son 30 gÃ¼n"})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Hesap Hareketleri"}),e.jsx("div",{className:"flex gap-2",children:["all","income","expense"].map(r=>e.jsx("button",{onClick:()=>n(r),className:`px-3 py-1.5 rounded-lg text-xs font-bold capitalize ${a===r?"bg-slate-100 text-slate-800":"text-slate-400 hover:text-slate-600"}`,children:r==="all"?"TÃ¼mÃ¼":r==="income"?"Gelirler":"Giderler"},r))})]}),e.jsx("div",{className:"space-y-4",children:t.filter(r=>a==="all"||r.type===a).length>0?t.filter(r=>a==="all"||r.type===a).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-slate-100 hover:border-blue-100 hover:bg-blue-50/30 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r.type==="income"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.type==="income"?e.jsx(lo,{size:20}):e.jsx(_a,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm group-hover:text-blue-700 transition-colors",children:r.title}),e.jsx("p",{className:"text-xs text-slate-400",children:r.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${r.type==="income"?"text-green-600":"text-slate-800"}`,children:[r.type==="income"?"+":"-",r.isCredit?`${r.amount} Kredi`:`â‚º${r.amount}`]}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold",children:r.status==="completed"?"TamamlandÄ±":"Bekliyor"})]})]},r.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wt,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"HenÃ¼z iÅŸlem kaydÄ± yok"}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Ä°ÅŸlemleriniz burada gÃ¶rÃ¼necek"})]})})]})]}),vx=({selectedHistoryItem:s,setSelectedHistoryItem:t,historySearch:a,setHistorySearch:n,historyFilter:i,setHistoryFilter:r,filteredHistory:h})=>{if(s){const u=s;return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("button",{onClick:()=>t(null),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-bold mb-4",children:[e.jsx(yt,{size:20,className:"rotate-180"})," Geri DÃ¶n"]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-6 md:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:["Ä°ÅŸ DetayÄ± ",e.jsxs("span",{className:"text-blue-600",children:["#",u.id]})]}),e.jsx("p",{className:"text-sm text-slate-500",children:new Date(u.completionTime).toLocaleString("tr-TR")})]}),e.jsx("div",{className:`px-4 py-2 rounded-xl font-bold ${u.status==="completed"?"bg-green-50 text-green-700":u.status==="cancelled"?"bg-red-50 text-red-700":"bg-gray-50 text-gray-700"}`,children:u.status==="completed"?"âœ“ TamamlandÄ±":u.status==="cancelled"?"âœ— Ä°ptal":"â†© Ä°ade"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2",children:"Finansal Detaylar"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Hizmet Bedeli"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["â‚º",u.totalAmount]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Komisyon (%15)"}),e.jsxs("span",{className:"font-bold text-red-500",children:["-â‚º",u.commission]})]}),e.jsxs("div",{className:"flex justify-between text-base pt-3 border-t border-slate-100",children:[e.jsx("span",{className:"font-bold text-slate-800",children:"Toplam KazanÃ§"}),e.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["â‚º",u.partnerEarning]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-100 rounded-xl text-xs text-yellow-800",children:[e.jsx(Ae,{size:14,className:"inline mr-1 mb-0.5"}),"Bu iÅŸlem iÃ§in ",e.jsx("strong",{children:"1 Kredi"})," kullanÄ±lmÄ±ÅŸtÄ±r."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2",children:"MÃ¼ÅŸteri & Rota"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold",children:u.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800",children:u.customerName}),e.jsx("p",{className:"text-xs text-slate-500",children:"MÃ¼ÅŸteri"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 bg-white/50 p-2 rounded-lg",children:[e.jsx(gt,{size:16,className:"text-orange-500"}),e.jsx("span",{children:u.customerPhone||"05** *** ** 12"}),e.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded ml-auto",children:"Gizli"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"BAÅžLANGIÃ‡"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:u.startLocation})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-slate-800"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"VARIÅž"}),e.jsx("p",{className:"text-sm font-medium text-slate-800",children:u.endLocation||"Yerinde Hizmet"})]})]})]})]})]})]})]})}return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Ä°ÅŸ No, MÃ¼ÅŸteri AdÄ± veya Plaka ara...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:u=>n(u.target.value)})]}),e.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shrink-0",children:["week","month","year"].map(u=>e.jsx("button",{onClick:()=>r(u),className:`px-4 py-2 rounded-lg text-sm font-bold capitalize transition-all ${i===u?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:u==="week"?"Bu Hafta":u==="month"?"Bu Ay":"Bu YÄ±l"},u))})]}),e.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-400 font-bold",children:[e.jsx("th",{className:"p-4 pl-6",children:"Ä°ÅŸ No / Tarih"}),e.jsx("th",{className:"p-4",children:"Hizmet & Rota"}),e.jsx("th",{className:"p-4",children:"MÃ¼ÅŸteri"}),e.jsx("th",{className:"p-4",children:"Tutar"}),e.jsx("th",{className:"p-4",children:"Durum"}),e.jsx("th",{className:"p-4"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.map(u=>e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors cursor-pointer group",onClick:()=>t(u),children:[e.jsxs("td",{className:"p-4 pl-6",children:[e.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",u.id]}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(u.completionTime).toLocaleString("tr-TR")})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm",children:u.serviceType}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Ne,{size:10})," ",u.startLocation," ",u.endLocation?`â†’ ${u.endLocation}`:""]})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center text-xs font-bold",children:u.customerName.charAt(0)}),e.jsx("span",{className:"text-sm text-slate-600",children:u.customerName})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-bold text-slate-800",children:["â‚º",u.totalAmount]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-bold ${u.status==="completed"?"bg-green-50 text-green-700":u.status==="cancelled"?"bg-red-50 text-red-700":"bg-slate-100 text-slate-600"}`,children:u.status==="completed"?"TamamlandÄ±":u.status==="cancelled"?"Ä°ptal":"Ä°ade"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(yt,{size:18})})})]},u.id))})]})})})]})},wx=({acceptedJobs:s,setActiveTab:t,handleStartOperation:a})=>e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Kabul Edilen Ä°ÅŸler"}),e.jsx("p",{className:"text-sm text-slate-600",children:'Teklifiniz kabul edildi! Ä°ÅŸe baÅŸlamak iÃ§in "Operasyonu BaÅŸlat" butonuna basÄ±n'})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(As,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Kabul EdilmiÅŸ Ä°ÅŸ Yok"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"MÃ¼ÅŸteriler tekliflerinizi kabul ettiÄŸinde burada gÃ¶rÃ¼necek"}),e.jsx("button",{onClick:()=>t("requests"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:"Ä°ÅŸ Taleplerini GÃ¶r"})]}):e.jsx("div",{className:"grid gap-4",children:s.map(n=>{const i={id:n.id,customerName:n.customerName||"MÃ¼ÅŸteri",location:n.fromLocation||"",dropoffLocation:n.toLocation||"",vehicleInfo:n.vehicleInfo||"AraÃ§ bilgisi yok",serviceType:n.serviceType==="cekici"?"Ã‡ekici":n.serviceType==="vinc"?"VinÃ§":"Hizmet",urgency:"normal",distance:"0 km",price:n.amount||0,estimatedPrice:n.amount||0,timestamp:n.createdAt||new Date().toISOString(),notes:n.description||"",_originalRequest:n};return e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border-2 border-green-200 shadow-lg overflow-hidden hover:shadow-xl transition-all",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(As,{size:24,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:i.serviceType}),e.jsx("p",{className:"text-sm text-slate-500",children:i.customerName})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"âœ… Kabul Edildi"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ne,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-700",children:"Nereden:"}),e.jsx("p",{className:"text-slate-600",children:i.location})]})]}),i.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-700",children:"Nereye:"}),e.jsx("p",{className:"text-slate-600",children:i.dropoffLocation})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ee,{size:16,className:"text-slate-500"}),e.jsx("p",{className:"text-slate-600",children:i.vehicleInfo})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:()=>a(i),className:"w-full py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl text-sm font-bold hover:from-green-700 hover:to-emerald-700 transition-all flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(Nt,{size:18}),"Operasyonu BaÅŸlat"]})})]})},n.id)})})]}),kx=({myOffers:s,setActiveTab:t,handleCancelOffer:a})=>{const n=s.filter(b=>b.status==="sent"),i=s.filter(b=>b.status==="accepted"),r=s.filter(b=>b.status==="rejected"),h=s.filter(b=>b.status==="withdrawn"),u=b=>{switch(b){case"sent":return e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full",children:"â³ Beklemede"});case"accepted":return e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"âœ… Kabul Edildi"});case"rejected":return e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:"âŒ Reddedildi"});case"withdrawn":return e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-bold rounded-full",children:"ðŸš« Ä°ptal Edildi"});default:return e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-xs font-bold rounded-full",children:b})}};return e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"GÃ¶nderilen Tekliflerim"}),e.jsx("p",{className:"text-sm text-slate-600",children:"MÃ¼ÅŸterilere gÃ¶nderdiÄŸiniz teklifleri takip edin"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-bold mb-1",children:"Beklemede"}),e.jsx("p",{className:"text-2xl font-black text-blue-700",children:n.length})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:"Kabul Edildi"}),e.jsx("p",{className:"text-2xl font-black text-green-700",children:i.length})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-red-600 font-bold mb-1",children:"Reddedildi"}),e.jsx("p",{className:"text-2xl font-black text-red-700",children:r.length})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 font-bold mb-1",children:"Ä°ptal Edildi"}),e.jsx("p",{className:"text-2xl font-black text-gray-700",children:h.length})]})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Is,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"HenÃ¼z Teklif GÃ¶ndermediniz"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Ä°ÅŸ taleplerine teklif gÃ¶ndererek kazanmaya baÅŸlayÄ±n"}),e.jsx("button",{onClick:()=>t("requests"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:"Ä°ÅŸ Taleplerini GÃ¶r"})]}):e.jsx("div",{className:"space-y-4",children:s.map(b=>{const m=b.status==="sent";return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 lg:p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center shrink-0",children:e.jsx(ee,{size:20,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"font-bold text-slate-900",children:["Teklif #",b.id.slice(0,8)]}),u(b.status)]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Talep: #",b.requestId.slice(0,8)," â€¢ ",new Date(b.createdAt).toLocaleDateString("tr-TR")," ",new Date(b.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]})]})]}),b.message&&e.jsx("div",{className:"ml-13 p-3 bg-slate-50 rounded-lg mb-3",children:e.jsx("p",{className:"text-xs text-slate-600",children:b.message})}),e.jsxs("div",{className:"ml-13 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{size:16,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["â‚º",b.price]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:16,className:"text-blue-600"}),e.jsxs("span",{className:"text-sm text-slate-600",children:[b.etaMinutes," dakika"]})]})]})]}),e.jsx("div",{className:"flex lg:flex-col gap-2",children:m&&e.jsxs("button",{onClick:()=>a(b.id),className:"flex-1 lg:w-32 px-4 py-2 bg-red-50 text-red-600 rounded-lg font-bold text-sm hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ne,{size:16}),e.jsx("span",{children:"Ä°ptal Et"})]})})]}),b.status==="sent"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-2",children:[e.jsx(Ae,{size:14}),"MÃ¼ÅŸteri teklifinizi deÄŸerlendiriyor. Bildirim geldiÄŸinde haberdar olacaksÄ±nÄ±z."]})}),b.status==="accepted"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-2",children:[e.jsx(ye,{size:14}),"Tebrikler! Teklifiniz kabul edildi. MÃ¼ÅŸteriyle iletiÅŸime geÃ§ebilirsiniz."]})}),b.status==="rejected"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-2",children:[e.jsx(Te,{size:14}),"Teklifiniz reddedildi. BaÅŸka iÅŸlere teklif verebilirsiniz."]})})]},b.id)})})]})},or=({requests:s,customerRequests:t,partnerServiceAreas:a,serviceAreasLoaded:n,newJobsFilter:i,setNewJobsFilter:r,unlockedJobs:h,offeringJobId:u,offerError:b,myOffers:m,setSelectedJobForDetail:A,setSelectedJobForQuote:B,setQuotePrice:x,setActiveTab:S,handleOpenCustomerOfferModal:k,handleStartOperation:z,handleCancelOffer:P})=>{const M=t.map(v=>({id:v.id,serviceType:v.serviceType==="cekici"?"Ã‡ekici Hizmeti":v.serviceType==="aku"?"AkÃ¼ Takviyesi":v.serviceType==="lastik"?"Lastik DeÄŸiÅŸimi":v.serviceType==="yakit"?"YakÄ±t DesteÄŸi":"Yol YardÄ±mÄ±",location:v.fromLocation,dropoffLocation:v.toLocation,distance:"~5 km",price:v.amount||500,timestamp:new Date(v.createdAt).toLocaleString("tr-TR"),customerName:v.customerName||"B2C MÃ¼ÅŸteri",vehicleInfo:v.vehicleInfo||"Belirtilmedi",urgency:"normal",notes:v.description,_originalRequest:v})),O=[...s,...M].filter(v=>i==="nearest"?parseFloat(v.distance)<10:i==="urgent"?v.urgency==="high":!0),p=v=>{var I;v._originalRequest?k(v._originalRequest):(B(v),x(((I=v.estimatedPrice)==null?void 0:I.toString())||""))};return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-blue-800",children:"Hizmet BÃ¶lgeniz:"}),a.map((v,I)=>e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-xs font-bold rounded-full",children:v},I))]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Sadece bu bÃ¶lgelerdeki iÅŸ talepleri gÃ¶sterilmektedir"})]})]})}),a.length===0&&n&&e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center text-white",children:e.jsx(be,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-amber-800",children:"Hizmet BÃ¶lgesi TanÄ±mlÄ± DeÄŸil"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Ayarlar â†’ Hizmet BÃ¶lgeleri'nden bÃ¶lgenizi tanÄ±mlayÄ±n"})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-3 w-full md:w-auto overflow-x-auto",children:[{id:"all",label:"TÃ¼mÃ¼",icon:no},{id:"nearest",label:"En YakÄ±n",icon:Me},{id:"urgent",label:"Acil Ä°ÅŸler",icon:be}].map(v=>e.jsxs("button",{onClick:()=>r(v.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all whitespace-nowrap ${i===v.id?"bg-blue-600 text-white shadow-lg shadow-blue-200":"bg-white text-slate-600 border border-slate-200 hover:border-blue-300"}`,children:[e.jsx(v.icon,{size:16})," ",v.label]},v.id))}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(ce,{size:16}),e.jsxs("span",{children:[O.length," Yeni Ä°ÅŸ"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:O.map(v=>{const I=h.includes(v.id),K=u===v.id,V=b===v.id,L=m.find(y=>y.requestId===v.id&&(y.status==="sent"||y.status==="accepted")),j=L&&L.status==="sent",$=L&&L.status==="accepted";return e.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl border-2 p-6 transition-all hover:shadow-xl ${I||$?"border-green-300 bg-green-50/50":j?"border-blue-300 bg-blue-50/50":V?"border-red-300 bg-red-50/50":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${I||$?"bg-green-100 text-green-600":j?"bg-blue-100 text-blue-600":v._originalRequest?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:v.serviceType.includes("Ã‡ekici")?e.jsx(ee,{size:24}):e.jsx(dr,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:v.serviceType}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",v.id]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(ce,{size:12})," Beklemede"]}),$&&e.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(ye,{size:12})," Kabul Edildi"]}),v._originalRequest&&e.jsx("span",{className:"bg-orange-100 text-orange-600 text-xs font-bold px-2 py-1 rounded-full",children:"B2C"}),v.urgency==="high"&&e.jsxs("span",{className:"bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(be,{size:12})," ACÄ°L"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4 pb-4 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ne,{size:16,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"AlÄ±nacak Konum"}),e.jsx("p",{className:"font-bold text-slate-800",children:v.location}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["ðŸ“ ",v.distance," uzakta"]})]})]}),v.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{size:16,className:"text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Teslim NoktasÄ±"}),e.jsx("p",{className:"font-bold text-slate-800",children:v.dropoffLocation})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ce,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-slate-600",children:v.timestamp})]}),v.estimatedPrice&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(js,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-green-600",children:["~â‚º",v.estimatedPrice]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(v),className:"flex-1 py-2 border-2 border-slate-200 text-slate-700 rounded-xl text-sm font-bold hover:border-blue-300 hover:text-blue-600 transition-all",children:"Ä°ncele"}),j?e.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[e.jsxs("div",{className:"py-2 bg-blue-50 text-blue-700 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-blue-200",children:[e.jsx(ce,{size:14})," Teklif DeÄŸerlendiriliyor"]}),e.jsx("button",{onClick:()=>S("offers"),className:"py-1 text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Teklifimi GÃ¶rÃ¼ntÃ¼le â†’"})]}):$?e.jsxs("button",{onClick:()=>z(v),className:"flex-1 py-2 bg-green-600 text-white rounded-xl text-sm font-bold hover:bg-green-700 transition-all flex items-center justify-center gap-2",children:["Operasyonu BaÅŸlat ",e.jsx(Nt,{size:16})]}):I?e.jsxs("button",{onClick:()=>z(v),className:"flex-1 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:["Operasyonu BaÅŸlat ",e.jsx(Nt,{size:16})]}):K?e.jsxs("div",{className:"flex-1 py-2 bg-blue-50 text-blue-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-blue-100",children:[e.jsx(ie,{size:14,className:"animate-spin"})," DeÄŸerlendiriliyor..."]}):V?e.jsxs("div",{className:"flex-1 py-2 bg-red-50 text-red-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-red-100",children:[e.jsx(be,{size:14})," Ret Edildi"]}):e.jsxs("button",{onClick:()=>p(v),className:"flex-1 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:16})," Teklif Ver"]})]}),L&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-600",children:"GÃ¶nderdiÄŸiniz Teklif"}),L.status==="sent"&&e.jsx("span",{className:"text-xs text-blue-600",children:"â³ DeÄŸerlendiriliyor"}),L.status==="accepted"&&e.jsx("span",{className:"text-xs text-green-600",children:"âœ… Kabul Edildi"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["â‚º",L.price]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{size:14,className:"text-blue-600"}),e.jsxs("span",{className:"text-slate-700",children:[L.etaMinutes," dk"]})]}),L.status==="sent"&&e.jsxs("button",{onClick:()=>P(L.id),className:"ml-auto text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[e.jsx(ne,{size:12})," Ä°ptal Et"]})]})]})]},v.id)})}),O.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{size:40,className:"text-slate-300"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"Yeni Ä°ÅŸ BulunamadÄ±"}),e.jsx("p",{className:"text-slate-500",children:"SeÃ§ili filtreye uygun iÅŸ talebi yok"})]})]})},_x=({partnerId:s,onToast:t})=>{const[a,n]=o.useState([]),[i,r]=o.useState(!0),[h,u]=o.useState(!1),[b,m]=o.useState(null),[A,B]=o.useState(""),[x,S]=o.useState([]),[k,z]=o.useState(!1),[P,M]=o.useState(1),[_,O]=o.useState(""),[p,v]=o.useState(!1),[I,K]=o.useState(!1),[V,L]=o.useState(""),[j,$]=o.useState(!1),[y,F]=o.useState(""),q=Object.keys(Na).sort(),W=A?Na[A]||[]:[],G=q.filter(C=>C.toLowerCase().includes(V.toLowerCase())),se=W.filter(C=>C.toLowerCase().includes(y.toLowerCase()));o.useEffect(()=>{U()},[s]);const U=async()=>{r(!0);try{const C=await E.serviceAreas.getByPartnerId(s);n(C)}catch(C){console.error("Hizmet bÃ¶lgeleri yÃ¼klenemedi:",C),t("Hizmet bÃ¶lgeleri yÃ¼klenirken hata oluÅŸtu","error")}finally{r(!1)}},g=()=>{B(""),S([]),z(!1),M(1),O(""),L(""),F("")},D=()=>{g(),m(null),u(!0)},R=C=>{B(C.city),S(C.districts||[]),z(C.isPrimary),M(C.priceMultiplier),O(C.notes||""),m(C),u(!0)},te=async()=>{if(!A){t("LÃ¼tfen bir il seÃ§in","error");return}if(a.find(ae=>ae.city===A&&(!b||ae.id!==b.id))){t("Bu il zaten eklenmiÅŸ","error");return}v(!0);try{b?(await E.serviceAreas.update(b.id,{districts:x.length>0?x:void 0,isPrimary:k,priceMultiplier:P,notes:_||void 0}),t("Hizmet bÃ¶lgesi gÃ¼ncellendi","success")):(await E.serviceAreas.create({partnerId:s,city:A,districts:x.length>0?x:void 0,isPrimary:k,priceMultiplier:P,notes:_||void 0}),t("Hizmet bÃ¶lgesi eklendi","success")),await U(),u(!1),g()}catch(ae){console.error("KayÄ±t hatasÄ±:",ae),t(ae.message||"KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu","error")}finally{v(!1)}},fe=async C=>{if(confirm(`${C.city} hizmet bÃ¶lgesini silmek istediÄŸinize emin misiniz?`))try{await E.serviceAreas.delete(C.id),t("Hizmet bÃ¶lgesi silindi","success"),await U()}catch(ae){console.error("Silme hatasÄ±:",ae),t("Silme sÄ±rasÄ±nda hata oluÅŸtu","error")}},_e=async C=>{try{await E.serviceAreas.setPrimary(s,C.id),t(`${C.city} ana hizmet bÃ¶lgesi olarak ayarlandÄ±`,"success"),await U()}catch(ae){console.error("Ana bÃ¶lge ayarlama hatasÄ±:",ae),t("Ayarlama sÄ±rasÄ±nda hata oluÅŸtu","error")}},Se=C=>{S(ae=>ae.includes(C)?ae.filter(De=>De!==C):[...ae,C])};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ie,{className:"w-8 h-8 animate-spin text-brand-orange"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Hizmet BÃ¶lgelerim"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Hangi illere hizmet verdiÄŸinizi belirleyin"})]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:[e.jsx(as,{size:18}),"BÃ¶lge Ekle"]})]}),a.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(Ne,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"HenÃ¼z hizmet bÃ¶lgesi tanÄ±mlamadÄ±nÄ±z"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"MÃ¼ÅŸterilerinizin sizi bulabilmesi iÃ§in hizmet verdiÄŸiniz illeri ekleyin"}),e.jsx("button",{onClick:D,className:"px-6 py-2 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors",children:"Ä°lk BÃ¶lgeyi Ekle"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(C=>e.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-2xl p-5 border-2 transition-all ${C.isPrimary?"border-brand-orange shadow-lg shadow-orange-100":"border-gray-100 hover:border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[C.isPrimary?e.jsx(xr,{className:"w-5 h-5 text-brand-orange"}):e.jsx(Ne,{className:"w-5 h-5 text-gray-400"}),e.jsx("h4",{className:"font-bold text-gray-900",children:C.city})]}),C.isPrimary&&e.jsx("span",{className:"text-xs font-bold text-brand-orange bg-orange-50 px-2 py-1 rounded-full",children:"Ana BÃ¶lge"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ä°lÃ§eler: "}),C.districts&&C.districts.length>0?C.districts.slice(0,3).join(", ")+(C.districts.length>3?` +${C.districts.length-3}`:""):"TÃ¼m Ä°l"]}),C.priceMultiplier!==1&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fiyat Ã‡arpanÄ±: "}),C.priceMultiplier,"x"]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[!C.isPrimary&&e.jsx("button",{onClick:()=>_e(C),className:"flex-1 text-xs font-medium text-gray-600 hover:text-brand-orange py-2 rounded-lg hover:bg-orange-50 transition-colors",children:"Ana BÃ¶lge Yap"}),e.jsx("button",{onClick:()=>R(C),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>fe(C),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Ma,{size:16})})]})]},C.id))}),e.jsx(pe,{children:h&&e.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>u(!1),children:e.jsxs(H.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:b?"Hizmet BÃ¶lgesi DÃ¼zenle":"Yeni Hizmet BÃ¶lgesi"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ä°l SeÃ§in *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>!b&&K(!I),disabled:!!b,className:`w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between ${b?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer hover:border-brand-orange"}`,children:[e.jsx("span",{className:A?"text-gray-900":"text-gray-400",children:A||"Ä°l seÃ§in..."}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),I&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:V,onChange:C=>L(C.target.value),placeholder:"Ä°l ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:G.map(C=>e.jsx("button",{onClick:()=>{B(C),S([]),K(!1),L("")},className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm",children:C},C))})]})]})]}),A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ä°lÃ§eler (Opsiyonel)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"BoÅŸ bÄ±rakÄ±rsanÄ±z tÃ¼m il kapsamÄ±nda hizmet vereceÄŸiniz anlaÅŸÄ±lÄ±r"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>$(!j),className:"w-full px-4 py-3 border rounded-xl text-left flex items-center justify-between bg-white cursor-pointer hover:border-brand-orange",children:[e.jsx("span",{className:x.length>0?"text-gray-900":"text-gray-400",children:x.length>0?`${x.length} ilÃ§e seÃ§ildi`:"TÃ¼m Ä°l (seÃ§im yapÄ±lmadÄ±)"}),e.jsx(Oe,{size:18,className:"text-gray-400"})]}),j&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white border rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:y,onChange:C=>F(C.target.value),placeholder:"Ä°lÃ§e ara...",className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm",autoFocus:!0})]})}),e.jsx("div",{className:"overflow-y-auto max-h-48",children:se.map(C=>e.jsxs("button",{onClick:()=>Se(C),className:"w-full px-4 py-2 text-left hover:bg-orange-50 text-sm flex items-center justify-between",children:[e.jsx("span",{children:C}),x.includes(C)&&e.jsx(je,{size:16,className:"text-brand-orange"})]},C))})]})]}),x.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x.map(C=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-50 text-brand-orange text-xs rounded-lg",children:[C,e.jsx("button",{onClick:()=>Se(C),className:"hover:text-red-500",children:e.jsx(ne,{size:12})})]},C))})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:C=>z(C.target.checked),className:"w-5 h-5 rounded border-gray-300 text-brand-orange focus:ring-brand-orange"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Ana Hizmet BÃ¶lgesi"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu bÃ¶lge listelerde Ã¶ncelikli gÃ¶sterilir"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat Ã‡arpanÄ±"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:P,onChange:C=>M(parseFloat(C.target.value)),className:"flex-1 accent-brand-orange"}),e.jsxs("span",{className:"font-bold text-gray-900 w-12 text-right",children:[P.toFixed(1),"x"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1.0x = Standart fiyat. Uzak bÃ¶lgeler iÃ§in artÄ±rabilirsiniz."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar (Opsiyonel)"}),e.jsx("textarea",{value:_,onChange:C=>O(C.target.value),placeholder:"Bu bÃ¶lge iÃ§in Ã¶zel notlarÄ±nÄ±z...",rows:2,className:"w-full px-4 py-3 border rounded-xl resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl font-medium text-gray-600 hover:bg-gray-50 transition-colors",children:"Ä°ptal"}),e.jsx("button",{onClick:te,disabled:p||!A,className:"flex-1 px-4 py-3 bg-brand-orange text-white rounded-xl font-medium hover:bg-brand-lightOrange transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18}),b?"GÃ¼ncelle":"Ekle"]})})]})]})})})]})},Sx=[{id:"profile",icon:Ps,label:"Profil"},{id:"notifications",icon:qs,label:"Bildirimler"},{id:"security",icon:br,label:"GÃ¼venlik"},{id:"company",icon:fr,label:"Åžirket Bilgileri"},{id:"vehicles",icon:ee,label:"AraÃ§lar"},{id:"contact",icon:ue,label:"Ä°letiÅŸim"},{id:"services",icon:dr,label:"Hizmetler"},{id:"serviceAreas",icon:so,label:"Hizmet BÃ¶lgeleri"},{id:"returnRoutes",icon:ka,label:"BoÅŸ DÃ¶nÃ¼ÅŸ RotalarÄ±"},{id:"documents",icon:va,label:"Belgeler"}],zx=({CURRENT_PARTNER_ID:s,CURRENT_PARTNER_NAME:t,CURRENT_PARTNER_EMAIL:a,CURRENT_PARTNER_PHONE:n,CURRENT_PARTNER_RATING:i,settingsSubTab:r,setSettingsSubTab:h,companyLogo:u,setCompanyLogo:b,profilePhoto:m,setProfilePhoto:A,existingLogoUrl:B,existingProfilePhotoUrl:x,isEditingProfile:S,setIsEditingProfile:k,isCompressingLogo:z,isCompressingProfile:P,isSavingSettings:M,partnerFormData:_,setPartnerFormData:O,companyFormData:p,setCompanyFormData:v,contactFormData:I,setContactFormData:K,passwordFormData:V,setPasswordFormData:L,notificationPreferences:j,setNotificationPreferences:$,isSavingNotificationPrefs:y,isEditingCompanyInfo:F,setIsEditingCompanyInfo:q,isEditingContactInfo:W,setIsEditingContactInfo:G,isChangingPassword:se,isSavingCompanyInfo:U,isSavingContactInfo:g,isSavingServices:D,selectedServices:R,toggleService:te,fleet:fe,setActiveTab:_e,documents:Se,isLoadingDocuments:C,setShowDocumentUploadModal:ae,setSelectedDocumentDetail:De,setShowDocumentDetailModal:Fe,credits:cs,handleLogoUpload:ks,handleProfilePhotoUpload:me,handleSaveProfileSettings:Ie,handleCancelProfileEdit:ze,handleSaveCompanyInfo:He,handleCancelCompanyEdit:Ke,handleSaveContactInfo:Pe,handleCancelContactEdit:_s,handlePasswordChange:ds,handleSaveNotificationPreferences:xs,handleSaveServices:Ve,showNewToast:Ge})=>e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"w-64 shrink-0 space-y-2",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-200 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[x?e.jsx("img",{src:x,alt:t,className:"w-14 h-14 rounded-xl object-cover border-2 border-blue-200"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-200",children:t.charAt(0)}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx(je,{size:10,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-800 truncate",children:t}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(re,{size:14,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-600",children:i.toFixed(1)})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(to,{size:14}),e.jsx("span",{className:"truncate",children:a})]})})]}),Sx.map(N=>e.jsxs("button",{onClick:()=>h(N.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${r===N.id?"bg-slate-800 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(N.icon,{size:18})," ",N.label]},N.id))]}),e.jsxs("div",{className:"flex-1 bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Profil Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Åžirket Logosu"}),e.jsxs("div",{className:`relative border-2 border-dashed ${S?"border-blue-300 hover:border-blue-400":"border-slate-200"} rounded-2xl p-6 flex flex-col items-center justify-center transition-all ${S?"cursor-pointer bg-blue-50/50":"cursor-not-allowed bg-slate-50"}`,onClick:()=>{var N;return S&&((N=document.getElementById("logoInput"))==null?void 0:N.click())},children:[z?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ie,{size:40,className:"animate-spin text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500",children:"SÄ±kÄ±ÅŸtÄ±rÄ±lÄ±yor..."})]}):u?e.jsx("img",{src:ss(u),alt:"Logo",className:"w-24 h-24 object-contain"}):B?e.jsx("img",{src:B,alt:"Logo",className:"w-24 h-24 object-contain"}):e.jsxs(e.Fragment,{children:[e.jsx(de,{size:40,className:"text-slate-300 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500 text-center",children:S?"Logo YÃ¼kle":"Logo Yok"})]}),e.jsx("input",{type:"file",id:"logoInput",accept:"image/*",className:"hidden",onChange:ks,disabled:!S})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Profil FotoÄŸrafÄ±"}),e.jsxs("div",{className:`relative border-2 border-dashed ${S?"border-blue-300 hover:border-blue-400":"border-slate-200"} rounded-2xl p-6 flex flex-col items-center justify-center transition-all ${S?"cursor-pointer bg-blue-50/50":"cursor-not-allowed bg-slate-50"}`,onClick:()=>{var N;return S&&((N=document.getElementById("profilePhotoInput"))==null?void 0:N.click())},children:[P?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ie,{size:40,className:"animate-spin text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500",children:"SÄ±kÄ±ÅŸtÄ±rÄ±lÄ±yor..."})]}):m?e.jsx("img",{src:ss(m),alt:"Profil",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-200"}):x?e.jsx("img",{src:x,alt:"Profil",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-200"}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:40,className:"text-slate-300 mb-2"}),e.jsx("span",{className:"text-sm text-slate-500 text-center",children:S?"FotoÄŸraf YÃ¼kle":"FotoÄŸraf Yok"})]}),e.jsx("input",{type:"file",id:"profilePhotoInput",accept:"image/*",className:"hidden",onChange:me,disabled:!S})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Åžirket / Ä°ÅŸletme AdÄ± *"}),e.jsx("input",{type:"text",value:_.company_name,onChange:N=>O({..._,company_name:N.target.value}),disabled:!S,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Vergi No *"}),e.jsx("input",{type:"text",placeholder:"1234567890",value:_.tax_number,onChange:N=>O({..._,tax_number:N.target.value}),disabled:!S,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Telefon *"}),e.jsx("input",{type:"tel",placeholder:"+90 5XX XXX XX XX",value:_.phone,onChange:N=>O({..._,phone:N.target.value}),disabled:!S,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"E-posta"}),e.jsx("input",{type:"email",placeholder:"ornek@firma.com",value:_.email,onChange:N=>O({..._,email:N.target.value}),disabled:!S,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Adres"}),e.jsx("textarea",{rows:3,placeholder:"Ä°ÅŸ yeri adresi...",value:_.address,onChange:N=>O({..._,address:N.target.value}),disabled:!S,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:S?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ze,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:Ie,disabled:M,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:M?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," DÃ¼zenle"]})})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Bildirim AyarlarÄ±"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(qs,{size:20,className:"text-blue-600"})," Yeni Ä°ÅŸ Talepleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.new_job_push_enabled,onChange:N=>$({...j,new_job_push_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Push Bildirim"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.new_job_sms_enabled,onChange:N=>$({...j,new_job_sms_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"SMS"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.new_job_email_enabled,onChange:N=>$({...j,new_job_email_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"E-posta"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(je,{size:20,className:"text-green-600"})," Teklif Kabul/Red Bildirimleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.offer_status_push_enabled,onChange:N=>$({...j,offer_status_push_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Push Bildirim"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.offer_status_sms_enabled,onChange:N=>$({...j,offer_status_sms_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"SMS"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all",children:[e.jsx("input",{type:"checkbox",checked:j.offer_status_email_enabled,onChange:N=>$({...j,offer_status_email_enabled:N.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-700",children:"E-posta"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:e.jsxs("button",{onClick:xs,disabled:y,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(je,{size:18})," ",y?"Kaydediliyor...":"Tercihleri Kaydet"]})})]}),r==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"GÃ¼venlik AyarlarÄ±"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Åžifrenizi gÃ¼ncelleyerek hesabÄ±nÄ±zÄ± koruyun."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Mevcut Åžifre *"}),e.jsx("input",{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:V.currentPassword,onChange:N=>L({...V,currentPassword:N.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yeni Åžifre *"}),e.jsx("input",{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:V.newPassword,onChange:N=>L({...V,newPassword:N.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yeni Åžifre Tekrar *"}),e.jsx("input",{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:V.confirmPassword,onChange:N=>L({...V,confirmPassword:N.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>L({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsxs("button",{onClick:ds,disabled:se,className:"bg-red-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-red-700 shadow-lg shadow-red-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(br,{size:18})," ",se?"GÃ¼ncelleniyor...":"Åžifreyi GÃ¼ncelle"]})]})]}),r==="company"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Åžirket Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ticaret Sicil No"}),e.jsx("input",{type:"text",placeholder:"12345/6789",value:p.trade_registry_number,onChange:N=>v({...p,trade_registry_number:N.target.value}),disabled:!F,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Mersis No"}),e.jsx("input",{type:"text",placeholder:"0123456789012345",value:p.mersis_no,onChange:N=>v({...p,mersis_no:N.target.value}),disabled:!F,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Vergi Dairesi"}),e.jsx("input",{type:"text",placeholder:"KadÄ±kÃ¶y",value:p.tax_office,onChange:N=>v({...p,tax_office:N.target.value}),disabled:!F,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Faaliyet AlanÄ±"}),e.jsxs("select",{value:p.sector,onChange:N=>v({...p,sector:N.target.value}),disabled:!F,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"Oto Kurtarma & Yol YardÄ±m",children:"Oto Kurtarma & Yol YardÄ±m"}),e.jsx("option",{value:"Ã‡ekici Hizmeti",children:"Ã‡ekici Hizmeti"}),e.jsx("option",{value:"Genel AraÃ§ Servisi",children:"Genel AraÃ§ Servisi"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"KuruluÅŸ YÄ±lÄ±"}),e.jsx("input",{type:"number",placeholder:"2015",value:p.foundation_year,onChange:N=>v({...p,foundation_year:parseInt(N.target.value)||new Date().getFullYear()}),disabled:!F,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:F?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Ke,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:He,disabled:U,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:U?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>q(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," DÃ¼zenle"]})})]}),r==="vehicles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"AraÃ§ Filosu Bilgileri"}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(ee,{size:16})," Filo YÃ¶netimine Git"]})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["AraÃ§ ekleme ve dÃ¼zenleme iÃ§in ",e.jsx("strong",{children:'"Filo YÃ¶netimi"'})," sekmesini kullanÄ±n. Burada kayÄ±tlÄ± araÃ§larÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyebilirsiniz."]}),fe.length===0?e.jsxs("div",{className:"p-12 text-center bg-slate-50 rounded-2xl border-2 border-dashed border-slate-300",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ee,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"HenÃ¼z kayÄ±tlÄ± araÃ§ yok"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Filo yÃ¶netiminize baÅŸlamak iÃ§in Filo YÃ¶netimi sekmesinden araÃ§ ekleyin"}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 transition-all flex items-center gap-2 mx-auto",children:[e.jsx(ee,{size:16})," Filo YÃ¶netimine Git"]})]}):e.jsx("div",{className:"space-y-3",children:fe.map(N=>e.jsx("div",{className:"p-5 bg-slate-50 border border-slate-200 rounded-2xl hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[N.front_photo_url?e.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border-2 border-blue-200",children:e.jsx("img",{src:N.front_photo_url,alt:N.plate,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600",children:e.jsx(ee,{size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800",children:[N.brand," ",N.model]}),e.jsx("p",{className:"text-sm text-slate-500",children:N.plate}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${N.status==="active"?"bg-green-100 text-green-700":N.status==="maintenance"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-500"}`,children:N.status==="active"?"Aktif":N.status==="maintenance"?"BakÄ±mda":"Pasif"})})]})]}),e.jsxs("button",{onClick:()=>_e("fleet"),className:"text-blue-600 hover:text-blue-700 font-bold text-sm px-4 py-2 hover:bg-blue-50 rounded-lg transition-all flex items-center gap-1",children:["Detay ",e.jsx(Oe,{size:16,className:"-rotate-90"})]})]})},N.id))})]}),r==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Ä°letiÅŸim Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Yetkili KiÅŸi AdÄ± *"}),e.jsx("input",{type:"text",value:I.authorized_person,onChange:N=>K({...I,authorized_person:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cep Telefonu *"}),e.jsx("input",{type:"tel",placeholder:"05XX XXX XX XX",value:I.mobile_phone,onChange:N=>K({...I,mobile_phone:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sabit Telefon"}),e.jsx("input",{type:"tel",placeholder:"+90 216 XXX XX XX",value:I.landline_phone,onChange:N=>K({...I,landline_phone:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Acil Durum Telefonu"}),e.jsx("input",{type:"tel",placeholder:"+90 5XX XXX XX XX",value:I.emergency_phone,onChange:N=>K({...I,emergency_phone:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"E-posta Adresi *"}),e.jsx("input",{type:"email",placeholder:"ornek@firma.com",value:_.email,onChange:N=>O({..._,email:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ä°ÅŸ Yeri Adresi *"}),e.jsx("textarea",{rows:3,value:I.business_address,onChange:N=>K({...I,business_address:N.target.value}),disabled:!W,className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none disabled:opacity-50 disabled:cursor-not-allowed"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end gap-3",children:W?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:_s,className:"px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:Pe,disabled:g,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:18,className:"animate-spin"})," Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18})," Bilgileri Kaydet"]})})]}):e.jsxs("button",{onClick:()=>G(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(gs,{size:18})," DÃ¼zenle"]})})]}),r==="services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Hizmet AyarlarÄ±"}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-100 rounded-xl flex gap-3 text-sm text-yellow-800",children:[e.jsx(be,{className:"shrink-0",size:20}),e.jsx("p",{children:"KayÄ±t olurken seÃ§tiÄŸiniz hizmetler otomatik olarak aktiftir. DeÄŸiÅŸiklik yapmak iÃ§in ilgili hizmeti iÅŸaretleyip kaydedin."})]}),e.jsx("div",{className:"space-y-4",children:["cekici","aku","lastik","yakit","yardim"].map(N=>{const ge={cekici:"Oto Ã‡ekici",aku:"AkÃ¼ Takviye",lastik:"Lastik DeÄŸiÅŸimi",yakit:"YakÄ±t Ä°kmali",yardim:"Genel Yol YardÄ±m"};return e.jsx("div",{className:"flex items-center justify-between p-4 border-2 border-slate-200 rounded-xl hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:R.includes(N),onChange:()=>te(N),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-bold text-slate-700",children:ge[N]})]})},N)})}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:e.jsxs("button",{onClick:Ve,disabled:D,className:"bg-blue-600 text-white px-8 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 disabled:opacity-50",children:[e.jsx(je,{size:18})," ",D?"Kaydediliyor...":"AyarlarÄ± Kaydet"]})})]}),r==="serviceAreas"&&e.jsx(_x,{partnerId:s,onToast:(N,ge)=>Ge(N,ge)}),r==="returnRoutes"&&e.jsx(en,{partnerId:s,partnerVehicles:fe,onToast:(N,ge)=>Ge(N,ge)}),r==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Belgeler & DÃ¶kÃ¼manlar"}),e.jsxs("button",{onClick:()=>ae(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2",children:[e.jsx(Ts,{size:16})," Belge YÃ¼kle"]})]}),C?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Belgeler yÃ¼kleniyor..."})]}):Se.length===0?e.jsxs("div",{className:"p-12 text-center bg-slate-50 rounded-2xl border-2 border-dashed border-slate-300",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"HenÃ¼z yÃ¼klenmiÅŸ belge yok"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Belgelerinizi yÃ¼kleyerek iÅŸlemlere baÅŸlayÄ±n"}),e.jsx("button",{onClick:()=>ae(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-bold hover:bg-blue-700 transition-all",children:"+ Ä°lk Belgeyi YÃ¼kle"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Se.map(N=>e.jsxs("div",{onClick:()=>{De({title:N.fileName,type:N.type,status:N.status==="approved"?"uploaded":N.status==="rejected"?"not_uploaded":"pending",uploadDate:new Date(N.uploadDate).toLocaleDateString("tr-TR"),fileName:N.fileName,fileSize:`${(N.fileSize/1024/1024).toFixed(2)} MB`,expiryDate:N.expiryDate?new Date(N.expiryDate).toLocaleDateString("tr-TR"):void 0}),Fe(!0)},className:"p-5 border-2 border-dashed border-slate-300 rounded-2xl hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${N.status==="approved"?"bg-green-100 text-green-600":N.status==="rejected"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:e.jsx(xe,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:N.fileName}),e.jsx("p",{className:"text-xs text-slate-500",children:N.type.toUpperCase()})]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:N.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(As,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-xs font-bold text-green-600",children:"OnaylandÄ±"})]}):N.status==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx(be,{size:16,className:"text-red-600"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:"Reddedildi"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:16,className:"text-yellow-600"}),e.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"Ä°nceleniyor"})]})})]},N.id))})]})]})]}),Cx=[{id:1,credits:10,price:150,label:"BaÅŸlangÄ±Ã§",recommended:!1},{id:2,credits:50,price:600,label:"Profesyonel",recommended:!0},{id:3,credits:100,price:1e3,label:"AvantajlÄ±",recommended:!1}],Tx=["Kibar MÃ¼ÅŸteri","Sorunsuz Ã–deme","BahÅŸiÅŸ BÄ±raktÄ±","Konum DoÄŸruydu","AnlayÄ±ÅŸlÄ±","Ä°letiÅŸim KolaydÄ±"],Ax=["Ä°letiÅŸim Zor","GeÃ§ Geldi","Ã–deme Sorunu","Konum HatalÄ±","Kaba DavranÄ±ÅŸ","Bekletti"],ku=()=>{const s=qi(),{toast:t,showToast:a,hideToast:n}=Wi(),i=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),r=i.id||i.partner_id||"",h=i.company_name||i.name||"Partner",u=i.phone||"",b=i.email||"",m=i.rating||0,[A,B]=o.useState(!0),[x,S]=o.useState("home"),[k,z]=o.useState(!1),[P,M]=o.useState(void 0),[_,O]=o.useState([]),[p,v]=o.useState(null),[I,K]=o.useState(!1),[V,L]=o.useState(0),[j,$]=o.useState([]),[y,F]=o.useState({lat:41.0082,lng:28.9784,name:"Taksim MeydanÄ±, Ä°stanbul"}),[q,W]=o.useState(null),[G,se]=o.useState(!1),[U,g]=o.useState(!1),[D,R]=o.useState(null),[te,fe]=o.useState(""),[_e,Se]=o.useState(""),[C,ae]=o.useState(null),[De,Fe]=o.useState(null),[cs,ks]=o.useState([]),[me,Ie]=o.useState(null),[ze,He]=o.useState(""),[Ke,Pe]=o.useState(""),[_s,ds]=o.useState(""),[xs,Ve]=o.useState([]),[Ge,N]=o.useState(!1),[ge,It]=o.useState(null),[Pt,Xs]=o.useState([]),[Ee,Zs]=o.useState([]),[Ss,Qs]=o.useState(!1),[ms,Bs]=o.useState({show:!1,type:"info",title:"",message:""}),[oe,us]=o.useState(0),[f,le]=o.useState(!1),[ve,Ye]=o.useState(!1),[Dx,sn]=o.useState(null),[Ix,tn]=o.useState(null),[Ya,qa]=o.useState(!1),[an,Ua]=o.useState(!1),[et,Ja]=o.useState(0),[st,tt]=o.useState([]),[Px,Ex]=o.useState(!1),[ln,Et]=o.useState(!1),[Bt,Mt]=o.useState(""),[Rt,Ot]=o.useState(""),[rn,nn]=o.useState(null),[Lt,Bx]=o.useState("all"),[Mx,Rx]=o.useState("list"),[$t,on]=o.useState(""),[cn,dn]=o.useState("month"),[xn,mn]=o.useState(null),[at,un]=o.useState([]),[hn,pn]=o.useState("all"),[bn,Ms]=o.useState(!1),[fn,Ox]=o.useState([]),[gn,Wa]=o.useState("profile"),[Ft,lt]=o.useState(null),[Ht,rt]=o.useState(null),[jn,Xa]=o.useState(!1),[yn,Za]=o.useState(!1),[Qa,nt]=o.useState(!1),[el,sl]=o.useState(""),[Kt,tl]=o.useState(""),[Vt,Gt]=o.useState({company_name:"",tax_number:"",email:"",phone:"",address:""}),[Nn,al]=o.useState(!1),[qe,ll]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[vn,rl]=o.useState(!1),[Yt,qt]=o.useState({trade_registry_number:"",mersis_no:"",tax_office:"",sector:"",foundation_year:new Date().getFullYear()}),[wn,nl]=o.useState(!1),[il,it]=o.useState(!1),[Ut,Jt]=o.useState({authorized_person:"",mobile_phone:"",landline_phone:"",emergency_phone:"",business_address:""}),[kn,ol]=o.useState(!1),[cl,ot]=o.useState(!1),[Wt,dl]=o.useState([]),[_n,xl]=o.useState(!1),[Sn,ct]=o.useState(!1),[T,X]=o.useState({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),[dt,xt]=o.useState(!1),[Ue,Rs]=o.useState(null),[Je,Os]=o.useState(null),[We,Ls]=o.useState(null),[mt,ml]=o.useState(!1),[ut,ul]=o.useState(!1),[ht,hl]=o.useState(!1),[pt,Xt]=o.useState(null),[zn,Zt]=o.useState(!1),[Cn,Tn]=o.useState([]),[An,pl]=o.useState(!1),bl=l=>{const c=/(\+?\d{1,3}[\s-]?)?\(?\d{3}\)?[\s-]?\d{3}[\s-]?\d{2}[\s-]?\d{2}|05\d{2}\s?\d{3}\s?\d{2}\s?\d{2}|\d{4}\s?\d{3}\s?\d{2}\s?\d{2}/g,d=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,w=/(https?:\/\/[^\s]+)|(www\.[^\s]+)|([a-zA-Z0-9-]+\.(com|net|org|tr|io|co|info|biz|edu|gov)[^\s]*)/g,Y=/@[a-zA-Z0-9_]+/g;let Q=l;return c.test(Q)&&(Q=Q.replace(c,"[telefon kaldÄ±rÄ±ldÄ±]")),d.test(Q)&&(Q=Q.replace(d,"[e-mail kaldÄ±rÄ±ldÄ±]")),w.test(Q)&&(Q=Q.replace(w,"[link kaldÄ±rÄ±ldÄ±]")),Y.test(Q)&&(Q=Q.replace(Y,"[kullanÄ±cÄ± adÄ± kaldÄ±rÄ±ldÄ±]")),Q},[Dn,zs]=o.useState(!1),[hs,Cs]=o.useState(""),[fl,Qt]=o.useState(!1),[gl,ps]=o.useState(null),we=o.useRef(null),[In,$s]=o.useState(!1),[Z,Fs]=o.useState(null),[Pn,En]=o.useState(!1),[Bn,Mn]=o.useState(""),[Rn,On]=o.useState(""),[Ln,$n]=o.useState(""),[Lx,$x]=o.useState(null),[Fx,Hx]=o.useState(!1),[Kx,Vx]=o.useState(""),[Hs,ea]=o.useState([]),[bt,Fn]=o.useState(null),[sa,Hn]=o.useState(!1),[Kn,Vn]=o.useState(null),[Gn,Yn]=o.useState(null),[qn,jl]=o.useState(!1),[yl,Un]=o.useState([]),[Jn,Gx]=o.useState([]),[ta,aa]=o.useState(null),Wn=async l=>{if(!hs){ps("LÃ¼tfen Ã¶nce belge tÃ¼rÃ¼nÃ¼ seÃ§in.");return}if(!l.target.files||!l.target.files.length)return;const c=l.target.files[0];if(c.size>5*1024*1024){ps("Dosya boyutu 5MB'den bÃ¼yÃ¼k olamaz."),we.current&&(we.current.value="");return}Qt(!0),ps(null);try{let d=c;if(Qe(c)){const Ce=await es(c);d=Ce.compressedFile,console.log(`ðŸ“„ Belge sÄ±kÄ±ÅŸtÄ±rÄ±ldÄ±: ${Ce.compressionRatio.toFixed(1)}% kÃ¼Ã§Ã¼ltÃ¼ldÃ¼`)}const w=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),Y=w.id||"",Ze={"K1/K2 Belgesi":"license","K1 Belgesi":"license","K2 Belgesi":"license","Kasko PoliÃ§esi":"insurance","Trafik SigortasÄ±":"insurance","AraÃ§ RuhsatÄ±":"registration","Vergi LevhasÄ±":"tax","Kimlik Fotokopisi":"identity","Ehliyet Fotokopisi":"identity"}[hs]||"registration",Be=await E.storage.uploadPartnerDocument(d,Y,null,Ze);if(!Be.success||!Be.url)throw new Error("Belge yÃ¼klenemedi");await E.documents.create({partnerId:Y,partnerName:w.name||h,type:Ze,fileName:d.name,fileData:Be.url,fileSize:d.size,status:"pending"}),console.log("ðŸ“„ [PartnerDashboard] Document uploaded:",Be.url),a(`${hs} yÃ¼klendi! Admin onayÄ±na gÃ¶nderildi.`,"success"),Qt(!1),zs(!1),Cs(""),we.current&&(we.current.value="")}catch(d){console.error("âŒ Belge yÃ¼kleme hatasÄ±:",d),ps("Belge yÃ¼klenirken hata oluÅŸtu. LÃ¼tfen tekrar deneyin."),Qt(!1),we.current&&(we.current.value="")}},[Yx,qx]=o.useState(""),[Ux,Jx]=o.useState(""),[Wx,Xx]=o.useState(""),[Zx,Qx]=o.useState(""),[em,sm]=o.useState(null),[tm,am]=o.useState(!1),[lm,rm]=o.useState([]),[nm,im]=o.useState(""),[om,cm]=o.useState(""),[dm,Xn]=o.useState(!1),[xm,mm]=o.useState([]),[um,hm]=o.useState(""),[pm,Zn]=o.useState(!1),[bm,fm]=o.useState(""),[gm,jm]=o.useState(""),[ym,Nm]=o.useState(""),[vm,Qn]=o.useState(!1),[wm,km]=o.useState(null),[_m,Sm]=o.useState("intercity"),[zm,Cm]=o.useState(!1),[Tm,Am]=o.useState(null),[Dm,Im]=o.useState(""),[Pm,Em]=o.useState(""),[Bm,Mm]=o.useState(""),[Rm,Om]=o.useState(""),[Lm,$m]=o.useState(""),[ei,Fm]=o.useState([]),[la,Ks]=o.useState(null),[Nl,vl]=o.useState("all"),[ra,wl]=o.useState({new_job_push_enabled:!0,new_job_sms_enabled:!0,new_job_email_enabled:!1,offer_status_push_enabled:!0,offer_status_sms_enabled:!1,offer_status_email_enabled:!1,payment_push_enabled:!0,payment_email_enabled:!0,voice_call_push_enabled:!0,voice_call_sms_enabled:!1,all_notifications_enabled:!0,quiet_hours_enabled:!1,quiet_hours_start:"22:00:00",quiet_hours_end:"08:00:00"}),[si,kl]=o.useState(!1),[_l,ti]=o.useState(!1);o.useEffect(()=>{r&&(localStorage.removeItem("yolmov_admin"),localStorage.removeItem("yolmov_customer"),localStorage.removeItem("yolmov_anonymous_caller_id"),console.log("ðŸ” [PartnerDashboard] Cleared other role sessions, partner active"))},[r]),o.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("tab");c&&S(c)},[]);const Xe=l=>{S(l);const c=new URLSearchParams(window.location.search);c.set("tab",l),window.history.pushState({},"",`${window.location.pathname}?${c.toString()}`)};o.useEffect(()=>{if(!r){console.warn("âš ï¸ Partner ID not found in localStorage");return}const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Gt({company_name:l.company_name||l.name||"",tax_number:l.tax_number||"",email:l.email||"",phone:l.phone||"",address:l.address||""}),sl(l.logo_url||""),tl(l.profile_photo_url||""),qt({trade_registry_number:l.trade_registry_number||"",mersis_no:l.mersis_no||"",tax_office:l.tax_office||"",sector:l.sector||"",foundation_year:l.foundation_year||new Date().getFullYear()}),Jt({authorized_person:l.authorized_person||"",mobile_phone:l.mobile_phone||l.phone||"",landline_phone:l.landline_phone||"",emergency_phone:l.emergency_phone||"",business_address:l.business_address||l.address||""}),dl(l.service_types||[])},[r]),o.useEffect(()=>{if(console.log("ðŸ” [Credits] CURRENT_PARTNER_ID:",r),console.log("ðŸ” [Credits] partnerData:",i),!r){console.warn("âš ï¸ [Credits] Partner ID bulunamadÄ±!");return}const l=async()=>{try{console.log("ðŸ’° [Credits] Loading credits for partner:",r);const d=await E.partnerCredits.getByPartnerId(r);console.log("ðŸ’° [Credits] Response from API:",d),d?(L(d.balance||0),console.log("âœ… [Credits] Partner credits loaded:",d.balance)):console.warn("âš ï¸ [Credits] No credit data found for partner")}catch(d){console.error("âŒ [Credits] Error loading credits:",d)}};l();const c=setInterval(l,1e4);return()=>clearInterval(c)},[r]),o.useEffect(()=>{if(!r)return;const c=setTimeout(async()=>{try{console.log("ðŸ”” [FCM] Requesting notification permission for partner:",r);const d=await cx();d?(console.log("âœ… [FCM] Token received, saving to database..."),await dx(r,d),console.log("âœ… [FCM] Token saved successfully")):console.warn("âš ï¸ [FCM] Permission denied or token not received")}catch(d){console.error("âŒ [FCM] Error registering push notification:",d)}},2e3);return()=>clearTimeout(c)},[r]),o.useEffect(()=>{if(!r||_l)return;(async()=>{try{console.log("ðŸ”” [Notifications] Loading preferences for partner:",r);const{data:c,error:d}=await ke.from("partner_notification_preferences").select("*").eq("partner_id",r).single();if(d&&d.code!=="PGRST116"){console.error("âŒ [Notifications] Error loading preferences:",d);return}if(c)console.log("âœ… [Notifications] Preferences loaded:",c),wl({new_job_push_enabled:c.new_job_push_enabled??!0,new_job_sms_enabled:c.new_job_sms_enabled??!0,new_job_email_enabled:c.new_job_email_enabled??!1,offer_status_push_enabled:c.offer_status_push_enabled??!0,offer_status_sms_enabled:c.offer_status_sms_enabled??!1,offer_status_email_enabled:c.offer_status_email_enabled??!1,payment_push_enabled:c.payment_push_enabled??!0,payment_email_enabled:c.payment_email_enabled??!0,voice_call_push_enabled:c.voice_call_push_enabled??!0,voice_call_sms_enabled:c.voice_call_sms_enabled??!1,all_notifications_enabled:c.all_notifications_enabled??!0,quiet_hours_enabled:c.quiet_hours_enabled??!1,quiet_hours_start:c.quiet_hours_start??"22:00:00",quiet_hours_end:c.quiet_hours_end??"08:00:00"});else{console.log("ðŸ“ [Notifications] No preferences found, creating defaults...");const{error:w}=await ke.from("partner_notification_preferences").insert([{partner_id:r}]);w?console.error("âŒ [Notifications] Error creating default preferences:",w):console.log("âœ… [Notifications] Default preferences created")}ti(!0)}catch(c){console.error("âŒ [Notifications] Unexpected error:",c)}})()},[r,_l]),o.useEffect(()=>{if(!r)return;(async()=>{try{const c=await E.partnerVehicles.getByPartnerId(r);ea(c)}catch(c){console.error("Error loading vehicles:",c)}})()},[r]),o.useEffect(()=>{if(!r)return;(async()=>{pl(!0);try{const c=await E.partnerDocuments.getByPartnerId(r);Tn(c)}catch(c){console.error("Error loading documents:",c)}finally{pl(!1)}})()},[r]);const ai=async()=>{if(!qe.currentPassword||!qe.newPassword||!qe.confirmPassword){alert("âš ï¸ LÃ¼tfen tÃ¼m alanlarÄ± doldurun.");return}if(qe.newPassword.length<8){alert("âš ï¸ Yeni ÅŸifre en az 8 karakter olmalÄ±dÄ±r.");return}if(qe.newPassword!==qe.confirmPassword){alert("âš ï¸ Yeni ÅŸifreler eÅŸleÅŸmiyor!");return}rl(!0);try{const{error:l}=await ke.auth.updateUser({password:qe.newPassword});if(l)throw l;ll({currentPassword:"",newPassword:"",confirmPassword:""}),a("Åžifreniz gÃ¼ncellendi!","success")}catch(l){console.error("Password change error:",l),alert(`âŒ Åžifre deÄŸiÅŸtirme hatasÄ±: ${l.message||"Bilinmeyen hata"}`)}finally{rl(!1)}},li=async()=>{if(!r){alert("âŒ Partner ID bulunamadÄ±.");return}kl(!0);try{console.log("ðŸ”” [Notifications] Saving preferences for partner:",r),console.log("ðŸ“ [Notifications] Data to save:",ra);const{data:l,error:c}=await ke.from("partner_notification_preferences").upsert({partner_id:r,...ra},{onConflict:"partner_id"}).select();if(c)throw console.error("âŒ [Notifications] Error saving preferences:",c),c;console.log("âœ… [Notifications] Preferences saved successfully:",l),a("Bildirim tercihleri kaydedildi!","success")}catch(l){console.error("âŒ [Notifications] Save error:",l),alert(`âŒ Kaydetme hatasÄ±: ${l.message||"Bilinmeyen hata"}`)}finally{kl(!1)}},ri=async()=>{if(!il){it(!0);return}nl(!0);try{await E.partners.update(r,Yt);const l={...i,...Yt};localStorage.setItem("yolmov_partner",JSON.stringify(l)),it(!1),a("Åžirket bilgileriniz gÃ¼ncellendi!","success")}catch(l){console.error("Company info save error:",l),alert("âŒ Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{nl(!1)}},ni=()=>{it(!1);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");qt({trade_registry_number:l.trade_registry_number||"",mersis_no:l.mersis_no||"",tax_office:l.tax_office||"",sector:l.sector||"",foundation_year:l.foundation_year||new Date().getFullYear()})},ii=async()=>{if(!Qa){nt(!0);return}al(!0);try{let l=el,c=Kt;if(Ft){const w=await E.storage.uploadPartnerDocument(Ft,r,null,"logo");w.success&&w.url&&(l=w.url)}if(Ht){const w=await E.storage.uploadPartnerDocument(Ht,r,null,"profile_photo");w.success&&w.url&&(c=w.url)}await E.partners.update(r,{...Vt,logo_url:l,profile_photo_url:c});const d={...i,...Vt,logo_url:l,profile_photo_url:c};localStorage.setItem("yolmov_partner",JSON.stringify(d)),sl(l),tl(c),lt(null),rt(null),nt(!1),a("Profil bilgileriniz gÃ¼ncellendi!","success")}catch(l){console.error("Profile save error:",l),alert("âŒ Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{al(!1)}},oi=()=>{nt(!1),lt(null),rt(null);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Gt({company_name:l.company_name||l.name||"",tax_number:l.tax_number||"",email:l.email||"",phone:l.phone||"",address:l.address||""})},ci=async()=>{if(!cl){ot(!0);return}ol(!0);try{await E.partners.update(r,Ut);const l={...i,...Ut};localStorage.setItem("yolmov_partner",JSON.stringify(l)),ot(!1),a("Ä°letiÅŸim bilgileriniz gÃ¼ncellendi!","success")}catch(l){console.error("Contact info save error:",l),alert("âŒ Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{ol(!1)}},di=()=>{ot(!1);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");Jt({authorized_person:l.authorized_person||"",mobile_phone:l.mobile_phone||"",landline_phone:l.landline_phone||"",emergency_phone:l.emergency_phone||"",business_address:l.business_address||""})},xi=async()=>{xl(!0);try{await E.partners.update(r,{service_types:Wt});const l={...i,service_types:Wt};localStorage.setItem("yolmov_partner",JSON.stringify(l)),a("Hizmet ayarlarÄ±nÄ±z gÃ¼ncellendi!","success")}catch(l){console.error("Services save error:",l),alert("âŒ Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{xl(!1)}},mi=l=>{dl(c=>c.includes(l)?c.filter(d=>d!==l):[...c,l])},ui=async()=>{if(!T.plate||!T.brand||!T.model||!T.type){alert("âš ï¸ LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun (Plaka, Marka, Model, Tip).");return}if(!Ue||!Je||!We){alert("âš ï¸ LÃ¼tfen araÃ§ gÃ¶rsellerini yÃ¼kleyin (Ã–n, Yan, Arka).");return}xt(!0);try{const l=await E.storage.uploadPartnerDocument(Ue,r,null,"vehicle_photos/front"),c=await E.storage.uploadPartnerDocument(Je,r,null,"vehicle_photos/side"),d=await E.storage.uploadPartnerDocument(We,r,null,"vehicle_photos/back");if(!l.success||!c.success||!d.success)throw new Error("GÃ¶rsel yÃ¼kleme baÅŸarÄ±sÄ±z oldu");const w={partner_id:r,partner_name:h,plate_number:T.plate,type:T.type,brand:T.brand,model:T.model,year:T.year,driver:T.driver||h,status:"active",registration_date:new Date().toISOString().split("T")[0],front_photo_url:l.url,side_photo_url:c.url,back_photo_url:d.url,showcase_capacity:T.showcase_capacity||null,showcase_insurance_type:T.showcase_insurance_type||null,showcase_equipment:T.showcase_equipment||[],showcase_description:T.showcase_description||null,is_showcase_vehicle:T.is_showcase_vehicle||!1};console.log("ðŸš— Vehicle Data to be saved:",w);const Y=await E.partnerVehicles.create(w);console.log("âœ… Vehicle created successfully:",Y),ea([...Hs,Y]),X({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),Rs(null),Os(null),Ls(null),ct(!1),a("AraÃ§ baÅŸarÄ±yla eklendi!","success")}catch(l){console.error("Vehicle add error:",l),alert("âŒ AraÃ§ eklenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{xt(!1)}},Sl=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG)");return}try{ml(!0);const w=await es(c);Rs(w.compressedFile),a("Ã–n gÃ¶rsel iÅŸleniyor...","processing",1500)}catch(w){console.error("Front photo compression error:",w),alert("âŒ GÃ¶rsel iÅŸlenirken hata oluÅŸtu.")}finally{ml(!1)}}},zl=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG)");return}try{ul(!0);const w=await es(c);Os(w.compressedFile),a("Yan gÃ¶rsel iÅŸleniyor...","processing",1500)}catch(w){console.error("Side photo compression error:",w),alert("âŒ GÃ¶rsel iÅŸlenirken hata oluÅŸtu.")}finally{ul(!1)}}},Cl=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG)");return}try{hl(!0);const w=await es(c);Ls(w.compressedFile),a("Arka gÃ¶rsel iÅŸleniyor...","processing",1500)}catch(w){console.error("Back photo compression error:",w),alert("âŒ GÃ¶rsel iÅŸlenirken hata oluÅŸtu.")}finally{hl(!1)}}},hi=async()=>{if(!pt||!T.plate||!T.brand||!T.model||!T.type){alert("âš ï¸ LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun (Plaka, Marka, Model, Tip).");return}xt(!0);try{const l={plate_number:T.plate,type:T.type,brand:T.brand,model:T.model,year:T.year,driver:T.driver||h,showcase_capacity:T.showcase_capacity||null,showcase_insurance_type:T.showcase_insurance_type||null,showcase_equipment:T.showcase_equipment||[],showcase_description:T.showcase_description||null,is_showcase_vehicle:T.is_showcase_vehicle||!1};if(Ue){const d=await E.storage.uploadPartnerDocument(Ue,r,null,"vehicle_photos/front");d.success&&(l.front_photo_url=d.url)}if(Je){const d=await E.storage.uploadPartnerDocument(Je,r,null,"vehicle_photos/side");d.success&&(l.side_photo_url=d.url)}if(We){const d=await E.storage.uploadPartnerDocument(We,r,null,"vehicle_photos/back");d.success&&(l.back_photo_url=d.url)}console.log("ðŸ“ Updating vehicle:",pt,l);const c=await E.partnerVehicles.update(pt,l);console.log("âœ… Vehicle updated successfully:",c),ea(Hs.map(d=>d.id===pt?c:d)),X({plate:"",brand:"",model:"",year:new Date().getFullYear(),type:"",driver:"",showcase_capacity:"",showcase_insurance_type:"",showcase_equipment:[],showcase_description:"",is_showcase_vehicle:!1}),Rs(null),Os(null),Ls(null),Xt(null),Zt(!1),a("AraÃ§ gÃ¼ncellendi!","success")}catch(l){console.error("Vehicle update error:",l),alert("âŒ AraÃ§ gÃ¼ncellenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{xt(!1)}},Tl=o.useRef(null),Al=o.useRef(null),Dl=o.useRef(null);o.useEffect(()=>{(async()=>{try{const c=await Ji.getUserRole();(c==null?void 0:c.type)==="partner"?M(c.status||"pending"):M(void 0)}catch{M(void 0)}finally{z(!0)}})()},[]),o.useEffect(()=>{const l=c=>{Tl.current&&!Tl.current.contains(c.target)&&Xn(!1),Al.current&&!Al.current.contains(c.target)&&Zn(!1),Dl.current&&!Dl.current.contains(c.target)&&Qn(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),o.useEffect(()=>{(async()=>{if(r)try{const c=await E.serviceAreas.getByPartnerId(r);if(c&&c.length>0){const d=c.filter(w=>w.isActive!==!1).map(w=>w.city);Zs([...new Set(d)]),console.log("ðŸ“ [PartnerDashboard] Loaded service areas:",d)}else{const d=i.city||i.sehir;d?(Zs([d]),console.log("ðŸ“ [PartnerDashboard] Using partner city as service area:",d)):console.warn("âš ï¸ [PartnerDashboard] No service areas found for partner")}Qs(!0)}catch(c){console.error("Error loading service areas:",c),Qs(!0)}})()},[r]),o.useEffect(()=>{if(!Ss)return;const l=async()=>{try{let d;Ee.length>0?(d=await E.requests.getOpenByServiceAreas(Ee),console.log(`ðŸ”„ [PartnerDashboard] Loaded ${d.length} requests for service areas:`,Ee)):(d=await E.requests.getOpen(),console.warn("âš ï¸ [PartnerDashboard] No service areas defined, showing all requests:",d.length)),ks(d)}catch(d){console.error("Error loading requests:",d)}};l();const c=setInterval(l,3e4);return()=>{clearInterval(c)}},[Ss,Ee]);const Vs=async()=>{if(r)try{const l=await E.offers.getByPartnerId(r);Ve(l),console.log("ðŸ“¨ [PartnerDashboard] Loaded partner offers:",l.length)}catch(l){console.error("Error loading offers:",l)}},pi=async()=>{if(r)try{const l=await E.partnerReviews.getByPartnerId(r);if(l&&Array.isArray(l)){const c=l.map(d=>({id:d.id,jobId:d.jobId,customerName:d.customerName||"MÃ¼ÅŸteri",customerPhone:d.customerPhone||"",rating:d.rating,comment:d.comment||"",tags:d.tags||[],service:d.service||"Ã‡ekici Hizmeti",date:d.createdAt?new Date(d.createdAt).toLocaleDateString("tr-TR"):""}));Un(c),console.log("â­ [PartnerDashboard] Loaded reviews:",c.length)}}catch(l){console.error("Error loading reviews:",l)}},na=async()=>{if(r)try{const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),c=await E.requests.getByPartnerId(l.id);if(c&&Array.isArray(c)){const d=c.filter(w=>w.status==="matched"&&(w.jobStage===0||w.jobStage===null));Xs(d),console.log("âœ… [PartnerDashboard] Loaded accepted jobs:",d.length)}}catch(l){console.error("Error loading accepted jobs:",l)}};o.useEffect(()=>{Vs(),na(),pi();const l=setInterval(()=>{Vs(),na()},15e3);return()=>clearInterval(l)},[r]),o.useEffect(()=>{if(!r)return;console.log("ðŸ”” [Notifications] Setting up real-time offer notifications for partner:",r);const l=ke.channel("partner-offers-notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"offers",filter:`partner_id=eq.${r}`},c=>{console.log("ðŸ”” [Notifications] Offer status changed:",c);const d=c.new;c.old.status!==d.status&&(d.status==="accepted"?(bi(d),gi()):d.status==="rejected"&&fi(d),Vs())}).subscribe();return()=>{console.log("ðŸ”• [Notifications] Unsubscribing from real-time notifications"),ke.removeChannel(l)}},[r]);const Il=(l,c,d)=>{Bs({show:!0,type:l,title:c,message:d}),setTimeout(()=>{Bs(w=>({...w,show:!1}))},5e3)},bi=l=>{if(Il("success","ðŸŽ‰ Teklif Kabul Edildi!",`â‚º${l.price} tutarÄ±ndaki teklifiniz kabul edildi. Hemen yola Ã§Ä±kabilirsiniz!`),"Notification"in window&&Notification.permission==="granted"){const c=new Notification("ðŸŽ‰ Teklif Kabul Edildi!",{body:`â‚º${l.price} tutarÄ±ndaki teklifiniz kabul edildi. Hemen yola Ã§Ä±kabilirsiniz!`,icon:"/logo.png",badge:"/logo.png",tag:`offer-${l.id}`,requireInteraction:!0});c.onclick=()=>{window.focus(),S("offers"),c.close()}}},fi=l=>{Il("error","âŒ Teklif Reddedildi",`â‚º${l.price} tutarÄ±ndaki teklifiniz reddedildi. BaÅŸka iÅŸlere teklif verebilirsiniz.`),"Notification"in window&&Notification.permission==="granted"&&new Notification("âŒ Teklif Reddedildi",{body:`â‚º${l.price} tutarÄ±ndaki teklifiniz reddedildi.`,icon:"/logo.png",tag:`offer-${l.id}`})},gi=()=>{try{const l=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZRA0OVqzn7a5aFgpDm9/0wmwiBjSD0PPYiTcIGWi77eefTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEAKFF606OynVRQKRp/g8r5sIQUxh9Hz04IzBh5uw+/jmUQNDlas5+2uWhYKQ5vf9MJsIgY0g9Dz2Ik3CBlou+3nn00QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBACA==");l.volume=.5,l.play().catch(c=>console.log("Sound play error:",c))}catch{console.log("Audio not supported")}};o.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(l=>{console.log("ðŸ“± Notification permission:",l)})},[]);const ia=async l=>{if(confirm("Bu teklifi iptal etmek istediÄŸinizden emin misiniz?"))try{await E.offers.update(l,{status:"withdrawn"}),a("Teklif iptal edildi.","success"),Vs()}catch(c){console.error("Error canceling offer:",c),alert("âŒ Teklif iptal edilirken hata oluÅŸtu.")}};if(o.useEffect(()=>{if(!p||!p._originalRequest)return;const c=setInterval(async()=>{const d=p._originalRequest;try{const w=await E.requests.getById(d.id);(!w||w.status==="cancelled")&&(w==null?void 0:w.status)==="cancelled"&&(alert("âš ï¸ MÃ¼ÅŸteri bu iÅŸi iptal etti!"),v(null),S("requests"),us(0))}catch(w){console.error("Error checking job status:",w)}},5e3);return()=>clearInterval(c)},[p]),o.useEffect(()=>{const l=async()=>{try{const d=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),w=await E.requests.getByPartnerId(d.id);if(w&&Array.isArray(w)){const Y=w.filter(Q=>Q.status==="completed");un(Y),console.log("ðŸ“‹ [PartnerDashboard] Loaded partner history:",Y.length)}}catch(d){console.error("Error loading history:",d)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[]),o.useEffect(()=>{(async()=>{if(bt&&sa){jl(!0);try{const c=await E.partnerVehicles.getVehicleStats(bt.plate_number,r);Yn(c),console.log("ðŸ“Š [Vehicle Stats]",c)}catch(c){console.error("Error loading vehicle stats:",c)}finally{jl(!1)}}})()},[bt,sa]),!k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600 text-sm",children:"EriÅŸim kontrolÃ¼ yapÄ±lÄ±yor..."})});if(!r)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-8 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"text-red-600",size:32})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-2",children:"Oturum BulunamadÄ±"}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Partner bilgileriniz yÃ¼klenemedi. LÃ¼tfen tekrar giriÅŸ yapÄ±n."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("yolmov_partner"),s("/partner/login")},className:"bg-red-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-red-700 transition-all",children:"GiriÅŸ SayfasÄ±na DÃ¶n"})]})});if(P&&P!=="active")return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pr,{className:"text-yellow-600"})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-2",children:"HesabÄ±nÄ±z Ä°nceleniyor"}),e.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["BaÅŸvurunuz alÄ±nmÄ±ÅŸtÄ±r. Operasyon ekibimiz en kÄ±sa sÃ¼rede deÄŸerlendirecektir. Durumunuz: ",e.jsx("span",{className:"font-bold",children:P}),"."]}),e.jsx("button",{className:"px-6 py-3 bg-slate-900 text-white rounded-xl font-bold",onClick:()=>s("/"),children:"Ana Sayfaya DÃ¶n"})]})});_.filter(l=>Lt==="urgent"?l.urgency==="high":!0).sort((l,c)=>Lt==="highest_price"?c.price-l.price:Lt==="nearest"?parseFloat(l.distance)-parseFloat(c.distance):0);const ji=at.filter(l=>(l.id.toLowerCase().includes($t.toLowerCase())||l.customerName.toLowerCase().includes($t.toLowerCase()))&&l.status==="completed"),yi=()=>{if(!ms.show)return null;const l={success:"bg-gradient-to-r from-green-500 to-emerald-500",error:"bg-gradient-to-r from-red-500 to-rose-500",info:"bg-gradient-to-r from-blue-500 to-cyan-500"},c={success:"âœ“",error:"âœ•",info:"â„¹"};return e.jsx(pe,{children:e.jsx(H.div,{initial:{opacity:0,y:-50,x:50},animate:{opacity:1,y:0,x:0},exit:{opacity:0,y:-50,x:50},className:"fixed top-4 right-4 z-[9999] max-w-md",children:e.jsx("div",{className:`${l[ms.type]} rounded-xl shadow-2xl p-4 text-white`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-xl font-bold",children:c[ms.type]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-base mb-1",children:ms.title}),e.jsx("p",{className:"text-sm text-white/90",children:ms.message})]}),e.jsx("button",{onClick:()=>Bs(d=>({...d,show:!1})),className:"flex-shrink-0 text-white/70 hover:text-white transition-colors",children:e.jsx(ne,{size:20})})]})})})})},Pl=l=>{if(V<=0){alert("Yetersiz bakiye! Teklif vermek iÃ§in kredi yÃ¼kleyiniz.");return}Ie(l),He(""),Pe(""),ds("")},Ni=()=>{if(!D||!te)return;const l=D.id;R(null),ae(l),Fe(null),setTimeout(()=>{Math.random()>.3?(L(d=>d-1),$(d=>[...d,l]),ae(null)):(Fe(l),ae(null),setTimeout(()=>{O(d=>d.filter(w=>w.id!==l)),Fe(null)},3e3))},2500)},vi=async()=>{if(!(!me||!ze))try{console.log("ðŸŸ¢ [PartnerDashboard] Creating offer for request:",me.id);const l=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),c=await E.offers.create({requestId:me.id,partnerId:l.id,partnerName:l.name||h,price:parseFloat(ze),etaMinutes:Ke?parseInt(Ke):30,message:_s||void 0,status:"sent"});console.log("âœ… [PartnerDashboard] Offer created:",c);try{await E.partnerCredits.useCredits(l.id,l.name||h,1,`Teklif gÃ¶nderildi: ${me.id}`,me.id),console.log("ðŸ’° Credit deducted successfully")}catch(d){console.error("âš ï¸ Credit deduction failed:",d)}It(c),N(!0),Ie(null),He(""),Pe(""),ds(""),Vs()}catch(l){console.error("âŒ [PartnerDashboard] Offer creation failed:",l),alert("Teklif gÃ¶nderilemedi. LÃ¼tfen tekrar deneyin.")}},oa=async l=>{try{if(l._originalRequest){const c=l._originalRequest,d=JSON.parse(localStorage.getItem("yolmov_partner")||"{}");await E.requests.update(c.id,{status:"in_progress",jobStage:1,assignedPartnerId:d.id,assignedPartnerName:d.name||h}),console.log("ðŸš€ [PartnerDashboard] Job started:",c.id),Xs(w=>w.filter(Y=>Y.id!==c.id)),na()}v(l),O(c=>c.filter(d=>d.id!==l.id)),us(1),le(!1),Ye(!1),S("active"),F({lat:41.0082,lng:28.9784,name:"Taksim MeydanÄ±, Ä°stanbul"}),g(!1)}catch(c){console.error("âŒ Job start failed:",c),alert("Ä°ÅŸ baÅŸlatÄ±lamadÄ±. LÃ¼tfen tekrar deneyin.")}},wi=async()=>{if(oe===0&&!U){Ti();return}if(oe===2&&!f){alert("LÃ¼tfen hizmete baÅŸlamadan Ã¶nce kanÄ±t fotoÄŸrafÄ± yÃ¼kleyin.");return}if(oe===3&&!ve){alert("LÃ¼tfen gÃ¶revi tamamlamadan Ã¶nce bitiÅŸ fotoÄŸrafÄ± yÃ¼kleyin.");return}if(oe===3){Ua(!0);return}if(oe<4){const l=oe+1;try{if(p&&p._originalRequest){const c=p._originalRequest;await E.requests.update(c.id,{jobStage:l}),console.log("ðŸ“ [PartnerDashboard] Job stage updated:",c.id,"stage:",l)}us(l)}catch(c){console.error("âŒ Stage update failed:",c),alert("AÅŸama gÃ¼ncellenemedi. LÃ¼tfen tekrar deneyin.")}}},ki=async()=>{var l,c;if(p&&p._originalRequest){const d=p._originalRequest;try{await E.requests.update(d.id,{status:"completed",jobStage:4});const w=await E.offers.getByRequestId(d.id);let Y=null;w&&Array.isArray(w)&&(Y=w.find(Hi=>Hi.status==="accepted"),Y&&console.log("âœ… Offer completed:",Y.id));const Q=JSON.parse(localStorage.getItem("yolmov_partner")||"{}"),Ze=new Date().toISOString(),Be=d.stageUpdatedAt||d.createdAt,Ce=Math.round((new Date(Ze).getTime()-new Date(Be).getTime())/6e4);console.log("ðŸ”µ [PartnerDashboard] Creating completed job:",{requestId:d.id,partnerId:Q.id,customerId:d.customerId});const Gs=await E.completedJobs.create({requestId:d.id,partnerId:Q.id,partnerName:Q.name||Q.companyName,customerId:d.customerId,customerName:d.customerName||"MÃ¼ÅŸteri",customerPhone:d.customerPhone||"",serviceType:d.serviceType,startLocation:d.fromLocation,endLocation:d.toLocation||d.fromLocation,distance:0,startTime:Be,completionTime:Ze,duration:Ce,totalAmount:(Y==null?void 0:Y.price)||d.amount||0,commission:Math.round(((Y==null?void 0:Y.price)||d.amount||0)*.15),partnerEarning:Math.round(((Y==null?void 0:Y.price)||d.amount||0)*.85),paymentMethod:"nakit",vehicleType:((l=d.vehicleInfo)==null?void 0:l.split(" - ")[0])||"Bilinmiyor",vehiclePlate:((c=d.vehicleInfo)==null?void 0:c.split(" - ")[1])||"",status:"completed"});console.log("âœ… [PartnerDashboard] Completed job created:",Gs),console.log("âœ… [PartnerDashboard] B2C request completed:",d.id)}catch(w){console.error("âŒ Job completion failed:",w),alert("Ä°ÅŸ tamamlanÄ±rken hata oluÅŸtu. LÃ¼tfen tekrar deneyin.");return}}Ua(!1),v(null),S("requests"),us(0),Ja(0),tt([])},_i=l=>{aa(l),Et(!0),Mt(""),Ot("")},Si=()=>{if(!Bt||!Rt.trim()){alert("LÃ¼tfen itiraz nedenini seÃ§in ve detaylarÄ± yazÄ±n.");return}if(!ta){alert("DeÄŸerlendirme seÃ§ilmedi.");return}const l="PTR-001",c="Demo Partner";try{console.log("âœ… Ä°tiraz GÃ¶nderildi:",{reviewId:ta.id,partnerId:l,partnerName:c,reason:`${Bt}: ${Rt}`}),a("Ä°tirazÄ±nÄ±z gÃ¶nderildi. En kÄ±sa sÃ¼rede incelenecektir.","success"),Et(!1),aa(null),Mt(""),Ot("")}catch(d){console.error("âŒ Ä°tiraz gÃ¶nderme hatasÄ±:",d),alert("Ä°tiraz gÃ¶nderilirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}},El=async(l,c)=>{var w;const d=(w=l.target.files)==null?void 0:w[0];if(d){if(!Qe(d)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG, vb.)");return}qa(!0);try{const Y=await es(d);if(p&&p._originalRequest){const Q=p._originalRequest,Ze=localStorage.getItem("yolmov_partner"),Be=Ze?JSON.parse(Ze).id:"",Ce=await E.storage.uploadPartnerDocument(Y.compressedFile,Be,Q.id,c==="start"?"job_start_proof":"job_end_proof");if(!Ce.success||!Ce.url)throw new Error("FotoÄŸraf yÃ¼klenemedi");const Gs={};c==="start"?Gs.start_proof_photo=Ce.url:Gs.end_proof_photo=Ce.url,await E.requests.update(Q.id,Gs),console.log(`ðŸ“¸ [PartnerDashboard] ${c} proof uploaded:`,Ce.url)}c==="start"?(sn(Y.compressedFile),le(!0)):(tn(Y.compressedFile),Ye(!0)),a("Profil fotoÄŸrafÄ± iÅŸleniyor...","processing",2e3)}catch(Y){alert("âŒ FotoÄŸraf yÃ¼klenirken hata oluÅŸtu. LÃ¼tfen tekrar deneyin."),console.error(Y)}finally{qa(!1)}}},zi=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG, vb.)");return}try{Xa(!0);const w=await es(c);lt(w.compressedFile),alert('âœ… Logo hazÄ±r. "DeÄŸiÅŸiklikleri Kaydet" butonuna basÄ±n.')}catch(w){console.error("Logo compression error:",w),alert("âŒ Logo iÅŸlenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{Xa(!1)}}},Ci=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!Qe(c)){alert("LÃ¼tfen sadece gÃ¶rsel dosyasÄ± yÃ¼kleyin (JPG, PNG, vb.)");return}try{Za(!0);const w=await es(c);rt(w.compressedFile),alert('âœ… Profil fotoÄŸrafÄ± hazÄ±r. "DeÄŸiÅŸiklikleri Kaydet" butonuna basÄ±n.')}catch(w){console.error("Profile photo compression error:",w),alert("âŒ Profil fotoÄŸrafÄ± iÅŸlenirken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{Za(!1)}}},Ti=()=>{const l={lat:41.0082+(Math.random()-.5)*.05,lng:28.9784+(Math.random()-.5)*.05,name:"Mevcut Konumunuz"};W(l),g(!0),se(!0)},Ai=()=>{const c=`https://www.google.com/maps/dir/?api=1&destination=${`${y.lat},${y.lng}`}`;window.open(c,"_blank")},Di=()=>{switch(oe){case 0:return U?"Konuma VardÄ±m":"Navigasyonu BaÅŸlat";case 1:return"Konuma VardÄ±m";case 2:return"Hizmeti BaÅŸlat";case 3:return"GÃ¶revi Tamamla";default:return""}},Ii=()=>{const l=et>=4?Tx:Ax;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-2xl font-bold text-blue-600 mx-auto mb-3 shadow-inner",children:p==null?void 0:p.customerName.charAt(0)}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"GÃ¶revi TamamladÄ±n!"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"MÃ¼ÅŸteriyi deÄŸerlendirerek sistemi iyileÅŸtirmemize yardÄ±m et."})]}),e.jsxs("div",{className:"p-6 flex flex-col items-center",children:[e.jsx("div",{className:"flex gap-2 mb-6",children:[1,2,3,4,5].map(c=>e.jsx("button",{onClick:()=>{Ja(c),tt([])},className:"transition-transform hover:scale-110 focus:outline-none",children:e.jsx(re,{size:36,className:`${c<=et?"fill-yellow-400 text-yellow-400":"text-slate-200 fill-slate-50"}`,strokeWidth:1.5})},c))}),et>0&&e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:l.map(c=>e.jsx("button",{onClick:()=>{st.includes(c)?tt(st.filter(d=>d!==c)):tt([...st,c])},className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-all ${st.includes(c)?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-500 border-slate-200 hover:border-blue-300"}`,children:c},c))}),e.jsx("textarea",{placeholder:"MÃ¼ÅŸteri veya sÃ¼reÃ§ hakkÄ±nda eklemek istediklerin...",className:"w-full p-3 bg-slate-50 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-blue-500 outline-none mb-6 resize-none h-24"}),e.jsxs("button",{onClick:ki,disabled:et===0,className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold shadow-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(je,{size:18})," DeÄŸerlendir ve Bitir"]})]})]})})},Pi=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ka,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Navigasyon BaÅŸlatÄ±ldÄ±"}),e.jsx("p",{className:"text-sm text-blue-100",children:"MÃ¼ÅŸteri konumuna gidiyorsunuz"})]})]}),e.jsx("button",{onClick:()=>se(!1),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Me,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-green-600 uppercase",children:"BaÅŸlangÄ±Ã§ NoktanÄ±z"}),e.jsx("p",{className:"font-bold text-slate-900",children:(q==null?void 0:q.name)||"Konum alÄ±nÄ±yor..."}),q&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[q.lat.toFixed(6),", ",q.lng.toFixed(6)]})]})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-0.5 h-8 bg-gradient-to-b from-green-300 to-blue-300"})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ne,{size:20,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-blue-600 uppercase",children:"Hedef Konum"}),e.jsx("p",{className:"font-bold text-slate-900",children:y.name}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[y.lat.toFixed(6),", ",y.lng.toFixed(6)]})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Tahmini Mesafe"}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:(p==null?void 0:p.distance)||"2.5 km"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Tahmini SÃ¼re"}),e.jsx("p",{className:"text-2xl font-black text-blue-600",children:"8-12 dk"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Ai,className:"w-full py-4 bg-blue-600 text-white rounded-xl font-bold text-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-3 shadow-lg",children:[e.jsx(Me,{size:20})," Google Haritalar'da AÃ§"]}),e.jsx("button",{onClick:()=>{se(!1)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"YerleÅŸik HaritayÄ± Kullan"}),e.jsx("button",{onClick:()=>se(!1),className:"w-full py-3 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Kapat"})]})]})]})}),Ei=()=>{const l=[{value:"trade_registry",label:"Ticaret Sicil Belgesi"},{value:"signature",label:"Ä°mza SirkÃ¼leri"},{value:"vehicle_registration",label:"AraÃ§ RuhsatÄ±"},{value:"insurance",label:"Sorumluluk SigortasÄ±"},{value:"tax_plate",label:"Vergi LevhasÄ±"},{value:"other",label:"DiÄŸer"}];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Ts,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Belge YÃ¼kle"}),e.jsx("p",{className:"text-sm text-blue-100",children:"EvraklarÄ±nÄ±zÄ± yÃ¼kleyin"})]})]}),e.jsx("button",{onClick:()=>{zs(!1),Cs(""),ps(null),we.current&&(we.current.value="")},className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Belge TÃ¼rÃ¼ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:hs,onChange:c=>{Cs(c.target.value),ps(null)},className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium",children:[e.jsx("option",{value:"",children:"Belge tÃ¼rÃ¼nÃ¼ seÃ§in"}),l.map(c=>e.jsx("option",{value:c.label,children:c.label},c.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Dosya SeÃ§in"}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all ${hs?"border-blue-300 bg-blue-50 hover:bg-blue-100 cursor-pointer":"border-slate-200 bg-slate-50 cursor-not-allowed opacity-60"}`,children:fl?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx(ie,{size:40,className:"text-blue-600 animate-spin"}),e.jsx("p",{className:"text-sm font-bold text-blue-700",children:"YÃ¼kleniyor..."}),e.jsx("p",{className:"text-xs text-slate-500",children:"LÃ¼tfen bekleyin"})]}):e.jsxs("label",{className:hs?"cursor-pointer":"cursor-not-allowed",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center",children:e.jsx(xe,{size:32,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Dosya seÃ§mek iÃ§in tÄ±klayÄ±n"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PDF, JPG, PNG â€¢ Maksimum 5MB"})]})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:Wn,disabled:!hs||fl,className:"hidden",ref:we})]})})]}),gl&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(be,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-red-700 mb-1",children:"Hata"}),e.jsx("p",{className:"text-xs text-red-600",children:gl})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ae,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:"Ã–nemli Notlar"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Belgeleriniz 24 saat iÃ§inde incelenecektir"}),e.jsx("li",{children:"â€¢ FotoÄŸraflar net ve okunaklÄ± olmalÄ±dÄ±r"}),e.jsx("li",{children:"â€¢ GeÃ§erlilik tarihi gÃ¼ncel olmalÄ±dÄ±r"})]})]})]})}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:()=>{zs(!1),Cs(""),ps(null),we.current&&(we.current.value="")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Ä°ptal"})})]})]})})},Bi=()=>{if(!Z)return null;const l=()=>{switch(Z.status){case"uploaded":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 border-2 border-green-200 rounded-xl",children:[e.jsx(As,{size:18,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:"YÃ¼klendi ve OnaylandÄ±"})]});case"pending":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 border-2 border-yellow-200 rounded-xl",children:[e.jsx(ce,{size:18,className:"text-yellow-600"}),e.jsx("span",{className:"text-sm font-bold text-yellow-700",children:"Ä°nceleme Bekliyor"})]});case"not_uploaded":return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 border-2 border-red-200 rounded-xl",children:[e.jsx(be,{size:18,className:"text-red-600"}),e.jsx("span",{className:"text-sm font-bold text-red-700",children:"HenÃ¼z YÃ¼klenmedi"})]})}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(va,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:Z.title}),e.jsx("p",{className:"text-sm text-white/80",children:"Belge DetaylarÄ±"})]})]}),e.jsx("button",{onClick:()=>{$s(!1),Fs(null)},className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:l()}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Belge TÃ¼rÃ¼"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:Z.title})]}),Z.uploadDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"YÃ¼klenme Tarihi"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:Z.uploadDate})]})]}),Z.expiryDate&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Son GeÃ§erlilik Tarihi"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:Z.expiryDate})]}),Z.fileName&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Dosya AdÄ±"}),e.jsxs("p",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(xe,{size:16,className:"text-slate-400"}),Z.fileName]})]}),Z.fileSize&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"Dosya Boyutu"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:Z.fileSize})]}),Z.count&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:"YÃ¼klenen Belge SayÄ±sÄ±"}),e.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[Z.count," Adet"]})]})]}),Z.status==="uploaded"&&Z.expiryDate&&e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(As,{size:20,className:"text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-green-800 mb-1",children:"Belge Aktif"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Bu belge ",Z.expiryDate," tarihine kadar geÃ§erlidir. SÃ¼re dolmadan yenilemeyi unutmayÄ±n."]})]})]})}),Z.status==="not_uploaded"&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(be,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-red-800 mb-1",children:"Belge Eksik"}),e.jsx("p",{className:"text-xs text-red-700",children:"Bu belgenin yÃ¼klenmesi zorunludur. LÃ¼tfen en kÄ±sa sÃ¼rede yÃ¼kleyiniz."})]})]})}),Z.status==="pending"&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ce,{size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-yellow-800 mb-1",children:"Ä°nceleme AÅŸamasÄ±nda"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Belgeniz admin ekibi tarafÄ±ndan inceleniyor. 24 saat iÃ§inde sonuÃ§ bildirilecektir."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[Z.status==="uploaded"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ds,{size:18})," GÃ¶rÃ¼ntÃ¼le"]}),e.jsxs("button",{className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(ts,{size:18})," Ä°ndir"]}),e.jsxs("button",{onClick:()=>{$s(!1),Fs(null),zs(!0),Cs(Z.title)},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18})," Yenile"]})]}),Z.status==="not_uploaded"&&e.jsxs("button",{onClick:()=>{$s(!1),Fs(null),zs(!0),Cs(Z.title)},className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ts,{size:18})," Hemen YÃ¼kle"]}),Z.status==="pending"&&e.jsx("button",{onClick:()=>{$s(!1),Fs(null)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Tamam"})]})]})]})})},Mi=()=>{if(!la)return null;const l=la,c=j.includes(l.id),d=l._hasAcceptedOffer||c;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 p-6 text-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-2xl font-bold",children:l.serviceType}),e.jsx("button",{onClick:()=>Ks(null),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ne,{size:20})})]}),e.jsxs("p",{className:"text-sm text-white/80",children:["Ä°ÅŸ DetaylarÄ± - #",l.id]})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-xl",children:[e.jsx(Ne,{size:20,className:"text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"AlÄ±nacak Konum"}),d?e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:l.location}):e.jsxs("p",{className:"font-bold text-slate-600 text-lg",children:["ðŸ“ ",l.location.split(",").slice(-2).join(",").trim()]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[e.jsx(Me,{size:14})," ",l.distance," uzaklÄ±kta"]}),!d&&e.jsx("p",{className:"text-xs text-orange-600 mt-2 bg-orange-50 p-2 rounded",children:"ðŸ”’ Tam adres teklif kabul edildikten sonra gÃ¶rÃ¼nÃ¼r olacak"})]})]}),l.dropoffLocation&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-xl",children:[e.jsx(Me,{size:20,className:"text-green-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Teslim NoktasÄ±"}),d?e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:l.dropoffLocation}):e.jsxs("p",{className:"font-bold text-slate-600 text-lg",children:["ðŸ“ ",l.dropoffLocation.split(",").slice(-2).join(",").trim()]}),!d&&e.jsx("p",{className:"text-xs text-orange-600 mt-2 bg-orange-50 p-2 rounded",children:"ðŸ”’ Tam adres teklif kabul edildikten sonra gÃ¶rÃ¼nÃ¼r olacak"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Hizmet TÃ¼rÃ¼"}),e.jsx("p",{className:"font-bold text-slate-800",children:l.serviceType})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"AraÃ§ Bilgisi"}),e.jsx("p",{className:"font-bold text-slate-800",children:l.vehicleInfo})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Zaman"}),e.jsxs("p",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ce,{size:16})," ",l.timestamp]})]}),l.estimatedPrice&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsx("p",{className:"text-xs font-bold text-green-700 uppercase mb-2",children:"Tahmini Ãœcret"}),e.jsxs("p",{className:"font-black text-green-700 text-2xl",children:["â‚º",l.estimatedPrice]})]})]}),l.urgency==="high"&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(be,{size:24,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-red-800",children:"ACÄ°L TALEP"}),e.jsx("p",{className:"text-sm text-red-600",children:"Bu iÅŸ iÃ§in hÄ±zlÄ± yanÄ±t bekleniyor"})]})]}),l.notes&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-yellow-800 uppercase mb-2",children:"Notlar"}),e.jsx("p",{className:"text-sm text-slate-700",children:l.notes})]}),l._originalRequest&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 uppercase",children:"DetaylÄ± MÃ¼ÅŸteri Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"AraÃ§ Durumu"}),e.jsx("p",{className:`font-bold ${l._originalRequest.vehicleCondition==="broken"?"text-red-600":"text-green-600"}`,children:l._originalRequest.vehicleCondition==="broken"?"ðŸ”´ ArÄ±zalÄ±/KazalÄ±":"ðŸŸ¢ Ã‡alÄ±ÅŸÄ±r Durumda"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Zamanlama"}),e.jsxs("p",{className:"font-bold text-slate-800",children:[l._originalRequest.timing==="now"&&"âš¡ Hemen",l._originalRequest.timing==="week"&&"ðŸ“… Bu Hafta",l._originalRequest.timing==="later"&&"ðŸ—“ï¸ Daha Sonra"]})]})]}),l._originalRequest.hasLoad&&e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[e.jsx("p",{className:"text-xs font-bold text-amber-800 uppercase mb-2",children:"âš ï¸ YÃ¼k Bilgisi"}),e.jsx("p",{className:"font-bold text-amber-700",children:"AraÃ§ta yÃ¼k bulunuyor"}),l._originalRequest.loadDescription&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:l._originalRequest.loadDescription})]}),l._originalRequest.damagePhotoUrls&&l._originalRequest.damagePhotoUrls.length>0&&e.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[e.jsxs("p",{className:"text-xs font-bold text-slate-600 uppercase mb-3",children:["ðŸ“· Hasar FotoÄŸraflarÄ± (",l._originalRequest.damagePhotoUrls.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:l._originalRequest.damagePhotoUrls.slice(0,6).map((w,Y)=>e.jsx("img",{src:w,alt:`Hasar ${Y+1}`,className:"w-full h-20 object-cover rounded-lg border border-slate-200 cursor-pointer hover:opacity-80",onClick:()=>window.open(w,"_blank")},Y))})]}),l._originalRequest.customerPhone&&d&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-green-700 uppercase mb-1",children:"MÃ¼ÅŸteri Telefonu"}),e.jsx("p",{className:"font-bold text-green-800",children:l._originalRequest.customerPhone})]}),e.jsxs("a",{href:`tel:${l._originalRequest.customerPhone}`,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-bold text-sm hover:bg-green-700 flex items-center gap-2",children:[e.jsx(ue,{size:16})," Ara"]})]}),l._originalRequest.customerPhone&&!d&&e.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ue,{size:20,className:"text-orange-600"}),e.jsx("p",{className:"text-sm font-bold text-orange-800",children:"ðŸ”’ MÃ¼ÅŸteri Ä°letiÅŸim Bilgileri Gizli"})]}),e.jsx("p",{className:"text-xs text-orange-600",children:"Telefon numarasÄ± teklifiniz kabul edildikten sonra gÃ¶rÃ¼nÃ¼r olacaktÄ±r."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 flex-shrink-0",children:[!d&&e.jsxs("button",{onClick:()=>{var w;R(l),fe(((w=l.estimatedPrice)==null?void 0:w.toString())||""),Ks(null)},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Is,{size:18})," Teklif GÃ¶nder"]}),e.jsx("button",{onClick:()=>Ks(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Kapat"})]})]})]})})},Ri=()=>D?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Teklif Ver"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",D.id," - ",D.serviceType]})]}),e.jsx("button",{onClick:()=>R(null),className:"p-2 bg-slate-50 rounded-full text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-600 shrink-0 shadow-sm",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase",children:"Mesafe"}),e.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[D.distance," uzaklÄ±kta"]})]})]}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Bu iÅŸ iÃ§in mÃ¼ÅŸteriye sunacaÄŸÄ±nÄ±z KDV dahil toplam tutarÄ± giriniz."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Teklif TutarÄ± (â‚º)"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"number",autoFocus:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-xl font-bold text-slate-900 focus:border-blue-500 focus:ring-0 outline-none transition-colors",value:te,onChange:l=>fe(l.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Not (Opsiyonel)"}),e.jsx("textarea",{placeholder:"Ã–rn: 15 dk iÃ§inde araÃ§ baÅŸÄ±nda olurum.",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:border-blue-500 focus:ring-0 outline-none resize-none h-24",value:_e,onChange:l=>Se(l.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:()=>R(null),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:Ni,disabled:!te,className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Teklifi GÃ¶nder"})]})]})}):null,Oi=()=>!Ge||!ge?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{size:40,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Teklif GÃ¶nderildi!"}),e.jsx("p",{className:"text-sm text-white/90",children:"Teklifiniz mÃ¼ÅŸteriye iletildi"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-blue-900 font-bold mb-2",children:"â³ DeÄŸerlendirme AÅŸamasÄ±nda"}),e.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"Teklifiniz mÃ¼ÅŸteri tarafÄ±ndan deÄŸerlendiriliyor. MÃ¼ÅŸteri yanÄ±t verdiÄŸinde bildirim alacaksÄ±nÄ±z."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Teklif TutarÄ±"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["â‚º",ge.price]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Tahmini VarÄ±ÅŸ"}),e.jsxs("span",{className:"font-bold text-slate-900",children:[ge.etaMinutes," dakika"]})]}),ge.message&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-slate-500 block mb-1",children:"MesajÄ±nÄ±z"}),e.jsx("p",{className:"text-sm text-slate-800",children:ge.message})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-xs text-amber-800 flex items-start gap-2",children:[e.jsx(Ae,{size:16,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:'Teklifinizi "GÃ¶nderilen Tekliflerim" bÃ¶lÃ¼mÃ¼nden takip edebilir veya iptal edebilirsiniz.'})]})})]}),e.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[e.jsx("button",{onClick:()=>{N(!1),S("offers")},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-all",children:"Tekliflerimi GÃ¶r"}),e.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-all",children:"Tamam"})]})]})}),Li=()=>me?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"MÃ¼ÅŸteri Talebine Teklif Ver"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["#",me.id," - ",me.serviceType]})]}),e.jsx("button",{onClick:()=>Ie(null),className:"p-2 bg-slate-50 rounded-full text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Teklif TutarÄ± (â‚º)"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"number",autoFocus:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-xl font-bold text-slate-900 focus:border-blue-500 focus:ring-0 outline-none transition-colors",value:ze,onChange:l=>He(l.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"ETA (dk)"}),e.jsx("input",{type:"number",placeholder:"30",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:border-blue-500 outline-none",value:Ke,onChange:l=>Pe(l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Hizmet TÃ¼rÃ¼"}),e.jsx("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700",children:me.serviceType})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Mesaj (Opsiyonel)"}),e.jsx("textarea",{placeholder:"Ã–rn: 20 dk iÃ§inde araÃ§ baÅŸÄ±nda olurum.",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:border-blue-500 focus:ring-0 outline-none resize-none h-24",value:_s,onChange:l=>ds(l.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:()=>Ie(null),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:vi,disabled:!ze,className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Teklifi GÃ¶nder"})]})]})}):null,$i=()=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:e.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Kredi YÃ¼kle"}),e.jsx("button",{onClick:()=>Ms(!1),children:e.jsx(ne,{size:24,className:"text-slate-400"})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 mb-6 text-sm text-blue-800 flex gap-3",children:[e.jsx(Ae,{size:20,className:"shrink-0"}),e.jsx("p",{children:"1 Kredi = 1 Ä°ÅŸ KabulÃ¼. Kredileriniz hesabÄ±nÄ±za anÄ±nda tanÄ±mlanÄ±r ve sÃ¼resizdir."})]}),e.jsx("div",{className:"space-y-3 mb-6",children:Cx.map(l=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all ${l.recommended?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l.recommended?"bg-blue-500 text-white":"bg-slate-200 text-slate-600"}`,children:e.jsx(rs,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:l.label}),e.jsxs("p",{className:"text-xs text-slate-500",children:[l.credits," Kredi"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg text-slate-900",children:["â‚º",l.price]}),l.recommended&&e.jsx("span",{className:"text-[10px] font-bold text-blue-600 bg-white px-2 py-0.5 rounded-full",children:"Ã–nerilen"})]})]},l.id))}),e.jsxs("button",{className:"w-full py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 flex items-center justify-center gap-2",children:[e.jsx(Ba,{size:18})," Ã–deme Yap ve YÃ¼kle"]})]})}),Fi=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(en,{partnerId:r,partnerVehicles:Hs,onToast:(l,c)=>a(l,c)})});return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex font-sans text-slate-800",children:[I&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40",onClick:()=>K(!1)}),e.jsxs("div",{className:`
        fixed lg:sticky top-0 left-0 h-screen z-50
        w-72 lg:w-64 bg-slate-900 text-white 
        flex flex-col justify-between shrink-0 
        transition-transform duration-300 ease-out
        ${I?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        overflow-y-auto
      `,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-800 sticky top-0 bg-slate-900 z-10",children:[e.jsx("span",{className:"yolmov-logo text-2xl font-bold text-white",children:"yolmov"}),e.jsx("button",{onClick:()=>K(!1),className:"lg:hidden p-2 text-slate-400 hover:text-white",children:e.jsx(ne,{size:24})})]}),e.jsxs("nav",{className:"mt-4 px-3 pb-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Ä°ÅŸ YÃ¶netimi"}),e.jsx("div",{className:"space-y-1",children:[{id:"home",label:"Ana Sayfa",icon:ro},{id:"requests",label:"Ä°ÅŸ Talepleri",icon:qs,badge:_.length>0?_.length:null},{id:"accepted",label:"Kabul Edilenler",icon:As},{id:"offers",label:"GÃ¶nderilen Teklifler",icon:Is},{id:"active",label:"Aktif GÃ¶rev",icon:Me,pulse:!!p},{id:"history",label:"GeÃ§miÅŸ Ä°ÅŸler",icon:hr}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),K(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${x===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label}),l.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:l.badge}),l.pulse&&e.jsx("span",{className:"ml-auto w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse"})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Filo & Operasyon"}),e.jsx("div",{className:"space-y-1",children:[{id:"fleet",label:"Filo YÃ¶netimi",icon:ee},{id:"emptyTrucks",label:"BoÅŸ DÃ¶nen AraÃ§lar",icon:ka},{id:"showcase",label:"Vitrin AyarlarÄ±",icon:fr}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),K(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${x===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Finans"}),e.jsx("div",{className:"space-y-1",children:[{id:"wallet",label:"Finansal Durum",icon:wt},{id:"payments",label:"Ã–demeler",icon:ft},{id:"offer_history",label:"Teklif GeÃ§miÅŸi",icon:xe},{id:"calls",label:"Aramalar",icon:ue}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),K(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${x===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Hesap"}),e.jsx("div",{className:"space-y-1",children:[{id:"documents",label:"Belgelerim",icon:va},{id:"reviews",label:"DeÄŸerlendirmeler",icon:re},{id:"support",label:"Destek Merkezi",icon:jt},{id:"settings",label:"Ayarlar",icon:zt}].map(l=>e.jsxs("button",{onClick:()=>{Xe(l.id),K(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${x===l.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:l.label})]},l.id))})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-800",children:[e.jsxs("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 border border-slate-700",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Bakiye"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(rs,{size:16,className:"text-yellow-400"})," ",V," Kredi"]}),e.jsx("button",{onClick:()=>Ms(!0),className:"text-xs bg-blue-600 px-3 py-1.5 rounded-lg text-white hover:bg-blue-500 transition-colors font-medium",children:"YÃ¼kle"})]})]}),e.jsxs("button",{onClick:()=>{Xe("settings"),Wa("profile"),K(!1)},className:"w-full text-left flex items-center gap-3 mb-4 px-2 hover:bg-slate-800 rounded-lg p-2 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 overflow-hidden border-2 border-slate-600 shrink-0",children:e.jsx("img",{src:Kt||`https://ui-avatars.com/api/?name=${encodeURIComponent(h)}&background=FF6B35&color=fff&size=128`,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"overflow-hidden flex-1",children:[e.jsx("p",{className:"text-sm font-bold truncate",children:h}),e.jsxs("div",{className:"flex items-center text-xs text-yellow-500",children:[e.jsxs("span",{children:["â˜… ",m||0]}),e.jsxs("span",{className:"text-slate-500 ml-1",children:["(",at.length," Ä°ÅŸ)"]})]})]})]}),e.jsxs("button",{onClick:()=>s("/"),className:"w-full flex items-center justify-center gap-2 p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(ao,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Ã‡Ä±kÄ±ÅŸ Yap"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative pb-20 lg:pb-0",children:[e.jsxs("header",{className:"h-14 lg:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-10 sticky top-0 z-20",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx("span",{className:"yolmov-logo text-xl font-bold text-slate-800",children:"yo"})}),e.jsxs("h1",{className:"hidden lg:block text-xl font-bold text-slate-800",children:[x==="home"&&"Ana Sayfa",x==="showcase"&&"Vitrin",x==="newJobs"&&"Yeni Ä°ÅŸ Talepleri",x==="requests"&&"Ä°ÅŸ Talepleri",x==="accepted"&&"Kabul Edilenler",x==="offers"&&"Tekliflerim",x==="active"&&"Aktif GÃ¶rev",x==="emptyTrucks"&&"BoÅŸ AraÃ§lar",x==="offer_history"&&"Teklif GeÃ§miÅŸi",x==="payments"&&"Ã–demeler",x==="documents"&&"Belgelerim",x==="wallet"&&"Finans",x==="history"&&"GeÃ§miÅŸ",x==="reviews"&&"DeÄŸerlendirmeler",x==="settings"&&"Ayarlar",x==="fleet"&&"Filo YÃ¶netimi",x==="support"&&"Destek",x==="calls"&&"Aramalar",x==="service_routes"&&"Rotalar"]}),e.jsxs("h1",{className:"lg:hidden text-sm font-bold text-slate-800 absolute left-1/2 -translate-x-1/2",children:[x==="home"&&"Ana Sayfa",x==="showcase"&&"Vitrin",x==="requests"&&"Ä°ÅŸ Talepleri",x==="accepted"&&"Kabul Edilenler",x==="offers"&&"Tekliflerim",x==="active"&&"Aktif GÃ¶rev",x==="emptyTrucks"&&"BoÅŸ AraÃ§lar",x==="offer_history"&&"GeÃ§miÅŸ",x==="payments"&&"Ã–demeler",x==="documents"&&"Belgeler",x==="wallet"&&"Finans",x==="history"&&"GeÃ§miÅŸ",x==="reviews"&&"Puanlar",x==="settings"&&"Ayarlar",x==="fleet"&&"Filo",x==="support"&&"Destek",x==="more"&&"MenÃ¼"]}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4 shrink-0",children:[e.jsxs("div",{className:`flex items-center gap-1.5 lg:gap-2 px-2.5 lg:px-3 py-1.5 lg:py-2 rounded-full border transition-colors ${A?"bg-green-50 border-green-200":"bg-slate-100 border-slate-200"}`,children:[e.jsx("span",{className:`w-2 h-2 lg:w-2.5 lg:h-2.5 rounded-full ${A?"bg-green-500 animate-pulse":"bg-slate-400"}`}),e.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-700",children:A?"Aktif":"Pasif"}),e.jsx("button",{onClick:()=>B(!A),className:"hidden lg:inline text-xs text-blue-600 font-semibold hover:underline ml-1",children:"DeÄŸiÅŸtir"})]}),e.jsxs("button",{onClick:()=>Ms(!0),className:"lg:hidden flex items-center gap-1 px-2 py-1.5 bg-slate-100 rounded-full",children:[e.jsx(rs,{size:14,className:"text-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-700",children:V})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6 relative",children:[x==="home"&&e.jsx(yx,{requests:_,partnerHistory:at,emptyTrucks:ei,reviews:yl,handleTabChange:Xe,setActiveTab:S,setShowAddCreditModal:Ms}),x==="showcase"&&e.jsx(hx,{partnerId:r,partnerData:i}),x==="requests"&&e.jsx(or,{requests:_,customerRequests:cs,partnerServiceAreas:Ee,serviceAreasLoaded:Ss,newJobsFilter:Nl,setNewJobsFilter:vl,unlockedJobs:j,offeringJobId:C,offerError:De,myOffers:xs,setSelectedJobForDetail:Ks,setSelectedJobForQuote:R,setQuotePrice:fe,setActiveTab:S,handleOpenCustomerOfferModal:Pl,handleStartOperation:oa,handleCancelOffer:ia}),x==="newJobs"&&e.jsx(or,{requests:_,customerRequests:cs,partnerServiceAreas:Ee,serviceAreasLoaded:Ss,newJobsFilter:Nl,setNewJobsFilter:vl,unlockedJobs:j,offeringJobId:C,offerError:De,myOffers:xs,setSelectedJobForDetail:Ks,setSelectedJobForQuote:R,setQuotePrice:fe,setActiveTab:S,handleOpenCustomerOfferModal:Pl,handleStartOperation:oa,handleCancelOffer:ia}),x==="accepted"&&e.jsx(wx,{acceptedJobs:Pt,setActiveTab:S,handleStartOperation:oa}),x==="offers"&&e.jsx(kx,{myOffers:xs,setActiveTab:S,handleCancelOffer:ia}),x==="emptyTrucks"&&Fi(),x==="active"&&e.jsx("div",{className:"h-full flex flex-col lg:flex-row",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 bg-slate-900 relative overflow-hidden min-h-[400px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#475569 1px, transparent 1px)",backgroundSize:"30px 30px"}}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",children:[e.jsx("path",{d:"M 200 150 Q 400 100 600 300 T 900 400",fill:"none",stroke:"#3B82F6",strokeWidth:"6",strokeDasharray:"10 5",className:"animate-pulse"}),e.jsx("circle",{cx:"200",cy:"150",r:"80",fill:"#3B82F6",fillOpacity:"0.1",className:"animate-ping"})]}),e.jsxs("div",{className:"absolute top-[150px] left-[200px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Me,{size:20,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:"Siz"})]}),e.jsxs("div",{className:"absolute top-[300px] left-[600px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Ps,{size:18,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:p.customerName})]}),p.dropoffLocation&&e.jsxs("div",{className:"absolute top-[400px] left-[900px] -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full border-4 border-slate-900 shadow-xl flex items-center justify-center text-white z-10",children:e.jsx(Ne,{size:18,fill:"currentColor"})}),e.jsx("div",{className:"bg-slate-900 text-white text-xs px-2 py-1 rounded mt-2 font-bold",children:"VarÄ±ÅŸ"})]})]}),e.jsxs("div",{className:"w-full lg:w-[450px] bg-white border-l border-slate-200 flex flex-col shadow-2xl z-20",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.serviceType}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded",children:["#",p.id]})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[p.location," ",p.dropoffLocation&&`âž” ${p.dropoffLocation}`]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 border-y border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center text-xl font-bold text-blue-600 shadow-sm",children:p.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:p.customerName}),e.jsx("p",{className:"text-sm text-slate-500",children:p.vehicleInfo})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:"flex items-center justify-center gap-2 bg-white py-3 rounded-xl text-sm font-bold text-slate-700 shadow-sm hover:bg-slate-50",children:[e.jsx(ue,{size:16,className:"text-green-600"})," Ara"]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 bg-white py-3 rounded-xl text-sm font-bold text-slate-700 shadow-sm hover:bg-slate-50",children:[e.jsx(cr,{size:16,className:"text-blue-600"})," Mesaj"]})]})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("div",{className:"relative space-y-8 pl-6 border-l-2 border-slate-100 ml-3 mb-8",children:[{id:0,label:"Kabul Edildi",time:"10:30"},{id:1,label:"Yola Ã‡Ä±kÄ±ldÄ±",time:oe>=1?"10:32":"-"},{id:2,label:"Konuma VarÄ±ldÄ±",time:oe>=2?"10:45":"-"},{id:3,label:"Hizmet TamamlandÄ±",time:oe>=3?"11:15":"-"}].map(l=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-[3px] border-white shadow-sm transition-colors ${oe>=l.id?"bg-green-500":"bg-slate-200"}`}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:`text-sm font-bold ${oe>=l.id?"text-slate-900":"text-slate-400"}`,children:l.label}),e.jsx("span",{className:"text-xs text-slate-400",children:l.time})]})]},l.id))}),oe===2&&!f&&e.jsxs("div",{className:"mb-6 bg-orange-50 p-4 rounded-xl border border-dashed border-orange-300 text-center animate-pulse",children:[e.jsx(de,{className:"mx-auto text-orange-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-bold text-orange-700 mb-1",children:"BaÅŸlangÄ±Ã§ FotoÄŸrafÄ± Zorunlu"}),e.jsx("p",{className:"text-xs text-orange-600 mb-3",children:"Hizmete baÅŸlamadan Ã¶nce aracÄ±n durumunu belgeleyin."}),Ya?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-orange-600",children:[e.jsx(ie,{size:16,className:"animate-spin"}),e.jsx("span",{className:"text-xs font-bold",children:"Ä°ÅŸleniyor..."})]}):e.jsxs("label",{className:"inline-block bg-white border border-orange-200 text-orange-600 px-4 py-2 rounded-lg text-xs font-bold hover:bg-orange-50 shadow-sm cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:l=>El(l,"start"),className:"hidden"}),e.jsx(de,{size:14,className:"inline mr-1"})," FotoÄŸraf Ã‡ek / YÃ¼kle"]})]}),oe===3&&!ve&&e.jsxs("div",{className:"mb-6 bg-green-50 p-4 rounded-xl border border-dashed border-green-300 text-center animate-pulse",children:[e.jsx(de,{className:"mx-auto text-green-400 mb-2",size:24}),e.jsx("p",{className:"text-sm font-bold text-green-700 mb-1",children:"Hizmet KanÄ±tÄ± Zorunlu"}),e.jsx("p",{className:"text-xs text-green-600 mb-3",children:"Tamamlamadan Ã¶nce bitmiÅŸ iÅŸin fotoÄŸrafÄ±nÄ± yÃ¼kleyin."}),Ya?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[e.jsx(ie,{size:16,className:"animate-spin"}),e.jsx("span",{className:"text-xs font-bold",children:"Ä°ÅŸleniyor..."})]}):e.jsxs("label",{className:"inline-block bg-white border border-green-200 text-green-600 px-4 py-2 rounded-lg text-xs font-bold hover:bg-green-50 shadow-sm cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:l=>El(l,"end"),className:"hidden"}),e.jsx(de,{size:14,className:"inline mr-1"})," FotoÄŸraf Ã‡ek / YÃ¼kle"]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("button",{onClick:wi,className:`w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-3 ${oe===0?"bg-blue-600 hover:bg-blue-700 shadow-blue-200":oe===1?"bg-purple-600 hover:bg-purple-700 shadow-purple-200":oe===2?"bg-orange-500 hover:bg-orange-600 shadow-orange-200":"bg-green-600 hover:bg-green-700 shadow-green-200"}`,children:[Di()," ",e.jsx(Nt,{size:20})]}),e.jsx("button",{onClick:()=>v(null),className:"w-full mt-3 py-3 text-sm font-bold text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:"Acil Durum / Ä°ptal"})]})]})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-white",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6",children:e.jsx(Me,{size:40,className:"text-slate-300"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Aktif GÃ¶rev BulunamadÄ±"}),e.jsx("p",{className:"text-slate-400 mt-2 mb-8",children:"LÃ¼tfen talep havuzundan bir iÅŸ kabul edin."}),e.jsx("button",{onClick:()=>Xe("requests"),className:"px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700",children:"Ä°ÅŸ Listesine DÃ¶n"})]})}),x==="offer_history"&&e.jsx(xx,{}),x==="payments"&&e.jsx(mx,{}),x==="documents"&&e.jsx(ux,{}),x==="calls"&&e.jsx(px,{}),x==="history"&&e.jsx(vx,{selectedHistoryItem:xn,setSelectedHistoryItem:mn,historySearch:$t,setHistorySearch:on,historyFilter:cn,setHistoryFilter:dn,filteredHistory:ji}),x==="reviews"&&e.jsx(gx,{reviews:yl,ratingFilter:rn,setRatingFilter:nn,showObjectionPage:ln,setShowObjectionPage:Et,selectedReviewForObjection:ta,setSelectedReviewForObjection:aa,objectionReason:Bt,setObjectionReason:Mt,objectionDetails:Rt,setObjectionDetails:Ot,handleSubmitObjection:Si,handleOpenObjection:_i}),x==="wallet"&&e.jsx(Nx,{credits:V,transactions:fn,walletFilter:hn,setWalletFilter:pn,setShowAddCreditModal:Ms}),x==="settings"&&e.jsx(zx,{CURRENT_PARTNER_ID:r,CURRENT_PARTNER_NAME:h,CURRENT_PARTNER_EMAIL:b,CURRENT_PARTNER_PHONE:u,CURRENT_PARTNER_RATING:m,settingsSubTab:gn,setSettingsSubTab:Wa,companyLogo:Ft,setCompanyLogo:lt,profilePhoto:Ht,setProfilePhoto:rt,existingLogoUrl:el,existingProfilePhotoUrl:Kt,isEditingProfile:Qa,setIsEditingProfile:nt,isCompressingLogo:jn,isCompressingProfile:yn,isSavingSettings:Nn,partnerFormData:Vt,setPartnerFormData:Gt,companyFormData:Yt,setCompanyFormData:qt,contactFormData:Ut,setContactFormData:Jt,passwordFormData:qe,setPasswordFormData:ll,notificationPreferences:ra,setNotificationPreferences:wl,isSavingNotificationPrefs:si,isEditingCompanyInfo:il,setIsEditingCompanyInfo:it,isEditingContactInfo:cl,setIsEditingContactInfo:ot,isChangingPassword:vn,isSavingCompanyInfo:wn,isSavingContactInfo:kn,isSavingServices:_n,selectedServices:Wt,toggleService:mi,fleet:Hs,setActiveTab:S,documents:Cn,isLoadingDocuments:An,setShowDocumentUploadModal:zs,setSelectedDocumentDetail:Fs,setShowDocumentDetailModal:$s,credits:V,handleLogoUpload:zi,handleProfilePhotoUpload:Ci,handleSaveProfileSettings:ii,handleCancelProfileEdit:oi,handleSaveCompanyInfo:ri,handleCancelCompanyEdit:ni,handleSaveContactInfo:ci,handleCancelContactEdit:di,handlePasswordChange:ai,handleSaveNotificationPreferences:li,handleSaveServices:xi,showNewToast:a}),x==="fleet"&&e.jsx(bx,{fleet:Hs,partnerHistory:at,partnerName:h,showVehicleEditPage:sa,setShowVehicleEditPage:Hn,selectedVehicleForSettings:bt,setSelectedVehicleForSettings:Fn,selectedVehicleForHistory:Kn,setSelectedVehicleForHistory:Vn,vehicleStats:Gn,loadingVehicleStats:qn,setShowAddVehicleModal:ct}),x==="support"&&e.jsx(jx,{tickets:Jn,partnerId:r,partnerName:h,showNewTicketPage:Pn,setShowNewTicketPage:En,ticketSubject:Bn,setTicketSubject:Mn,ticketCategory:Rn,setTicketCategory:On,ticketDescription:Ln,setTicketDescription:$n})]})]}),e.jsx(pe,{children:bn&&$i()}),e.jsx(pe,{children:D&&Ri()}),e.jsx(pe,{children:me&&Li()}),e.jsx(pe,{children:Ge&&Oi()}),e.jsx(pe,{children:an&&Ii()}),e.jsx(pe,{children:la&&Mi()}),e.jsx(pe,{children:G&&Pi()}),e.jsx(pe,{children:Dn&&Ei()}),e.jsx(pe,{children:In&&Bi()}),Sn&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col my-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Yeni AraÃ§ Ekle"}),e.jsx("button",{onClick:()=>ct(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-3",children:[e.jsx(de,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"AraÃ§ GÃ¶rselleri (Plaka Okunabilir OlmalÄ±)"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Ã–n GÃ¶rsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Ue?e.jsx("img",{src:ss(Ue),alt:"Ã–n",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Ã–n"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[mt?"Ä°ÅŸleniyor...":"Ã–n YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Sl,disabled:mt})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Yan GÃ¶rsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Je?e.jsx("img",{src:ss(Je),alt:"Yan",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Yan"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[ut?"Ä°ÅŸleniyor...":"Yan YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:zl,disabled:ut})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Arka GÃ¶rsel *"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:We?e.jsx("img",{src:ss(We),alt:"Arka",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Arka"})]})}),e.jsxs("label",{className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700 cursor-pointer block text-center",children:[ht?"Ä°ÅŸleniyor...":"Arka YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Cl,disabled:ht})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka *"}),e.jsx("input",{type:"text",placeholder:"34 ABC 123",value:T.plate,onChange:l=>X({...T,plate:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka *"}),e.jsx("input",{type:"text",placeholder:"Mercedes",value:T.brand,onChange:l=>X({...T,brand:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model *"}),e.jsx("input",{type:"text",placeholder:"Actros",value:T.model,onChange:l=>X({...T,model:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"YÄ±l"}),e.jsx("input",{type:"number",placeholder:"2020",value:T.year,onChange:l=>X({...T,year:parseInt(l.target.value)||new Date().getFullYear()}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Tip *"}),e.jsxs("select",{value:T.type,onChange:l=>X({...T,type:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"cekici",children:"Ã‡ekici"}),e.jsx("option",{value:"vinc",children:"VinÃ§"}),e.jsx("option",{value:"kurtarici",children:"KurtarÄ±cÄ±"}),e.jsx("option",{value:"servis",children:"Servis AracÄ±"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"SÃ¼rÃ¼cÃ¼"}),e.jsx("input",{type:"text",placeholder:"SÃ¼rÃ¼cÃ¼ adÄ± (opsiyonel)",value:T.driver,onChange:l=>X({...T,driver:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsx("p",{className:"text-xs text-slate-500 italic",children:"BoÅŸ bÄ±rakÄ±lÄ±rsa ÅŸirket adÄ± kullanÄ±lÄ±r"})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-purple-50 rounded-xl border border-purple-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-3",children:[e.jsx(vt,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Vitrin Bilgileri (B2C MÃ¼ÅŸterilere GÃ¶sterilecek)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{value:T.showcase_capacity,onChange:l=>X({...T,showcase_capacity:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve Ã¼zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{value:T.showcase_insurance_type,onChange:l=>X({...T,showcase_insurance_type:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"TaÅŸÄ±ma Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk SigortasÄ±"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam KapsamlÄ±"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"VinÃ§"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz Ã‡ekim"},{value:"gps_takip",label:"GPS Takip"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{const c=T.showcase_equipment||[],d=c.includes(l.value)?c.filter(w=>w!==l.value):[...c,l.value];X({...T,showcase_equipment:d})},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${(T.showcase_equipment||[]).includes(l.value)?"bg-purple-600 text-white":"bg-white text-slate-600 border border-slate-200 hover:border-purple-300"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"AraÃ§ AÃ§Ä±klamasÄ± (Vitrin)"}),e.jsx("textarea",{placeholder:"Ã–rn: AracÄ±mÄ±z son model olup, alÃ§ak ÅŸasi spor araÃ§lar dahil tÃ¼m binek ve hafif ticari araÃ§larÄ± hasarsÄ±z yÃ¼kleme garantisi ile taÅŸÄ±maktadÄ±r.",value:T.showcase_description,onChange:l=>{const c=bl(l.target.value);X({...T,showcase_description:c})},rows:3,className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-red-500 font-medium",children:"âš ï¸ Telefon, e-mail, web adresi ve sosyal medya bilgisi otomatik olarak silinir."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-100 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"is_showcase_vehicle",checked:T.is_showcase_vehicle,onChange:l=>X({...T,is_showcase_vehicle:l.target.checked}),className:"w-5 h-5 rounded border-purple-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:"is_showcase_vehicle",className:"text-sm font-medium text-purple-800",children:"Bu aracÄ± vitrin aracÄ± olarak belirle (MÃ¼ÅŸterilere bu araÃ§ gÃ¶sterilecek)"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 flex-shrink-0",children:[e.jsx("button",{onClick:()=>ct(!1),className:"flex-1 px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:ui,disabled:dt,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:dt?"Ekleniyor...":"Ekle"})]})]})}),zn&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col my-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"AraÃ§ DÃ¼zenle"}),e.jsx("button",{onClick:()=>{Zt(!1),Xt(null),Rs(null),Os(null),Ls(null)},className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700 mb-3",children:[e.jsx(de,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"AraÃ§ FotoÄŸraflarÄ±nÄ± GÃ¼ncelle (Opsiyonel)"})]}),e.jsx("p",{className:"text-xs text-amber-600 mb-3",children:"Sadece deÄŸiÅŸtirmek istediÄŸiniz fotoÄŸraflarÄ± yÃ¼kleyin"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Ã–n GÃ¶rsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Ue?e.jsx("img",{src:ss(Ue),alt:"Ã–n",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Ã–n"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[mt?"Ä°ÅŸleniyor...":"YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Sl,disabled:mt})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Yan GÃ¶rsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:Je?e.jsx("img",{src:ss(Je),alt:"Yan",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Yan"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[ut?"Ä°ÅŸleniyor...":"YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:zl,disabled:ut})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block",children:"Arka GÃ¶rsel"}),e.jsx("div",{className:"relative aspect-video bg-white rounded-lg border-2 border-dashed border-slate-300 overflow-hidden",children:We?e.jsx("img",{src:ss(We),alt:"Arka",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(de,{size:24}),e.jsx("span",{className:"text-xs mt-1",children:"Arka"})]})}),e.jsxs("label",{className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-700 cursor-pointer block text-center",children:[ht?"Ä°ÅŸleniyor...":"YÃ¼kle",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Cl,disabled:ht})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Plaka *"}),e.jsx("input",{type:"text",placeholder:"34 ABC 123",value:T.plate,onChange:l=>X({...T,plate:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Marka *"}),e.jsx("input",{type:"text",placeholder:"Mercedes",value:T.brand,onChange:l=>X({...T,brand:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Model *"}),e.jsx("input",{type:"text",placeholder:"Actros",value:T.model,onChange:l=>X({...T,model:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"YÄ±l"}),e.jsx("input",{type:"number",placeholder:"2020",value:T.year,onChange:l=>X({...T,year:parseInt(l.target.value)||new Date().getFullYear()}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Tip *"}),e.jsxs("select",{value:T.type,onChange:l=>X({...T,type:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"cekici",children:"Ã‡ekici"}),e.jsx("option",{value:"vinc",children:"VinÃ§"}),e.jsx("option",{value:"kurtarici",children:"KurtarÄ±cÄ±"}),e.jsx("option",{value:"servis",children:"Servis AracÄ±"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"SÃ¼rÃ¼cÃ¼"}),e.jsx("input",{type:"text",placeholder:"SÃ¼rÃ¼cÃ¼ adÄ± (opsiyonel)",value:T.driver,onChange:l=>X({...T,driver:l.target.value}),className:"w-full p-3 bg-slate-50 rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),e.jsx("p",{className:"text-xs text-slate-500 italic",children:"BoÅŸ bÄ±rakÄ±lÄ±rsa ÅŸirket adÄ± kullanÄ±lÄ±r"})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-purple-50 rounded-xl border border-purple-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-3",children:[e.jsx(vt,{size:20}),e.jsx("h3",{className:"font-bold text-sm",children:"Vitrin Bilgileri (B2C MÃ¼ÅŸterilere GÃ¶sterilecek)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Kapasite"}),e.jsxs("select",{value:T.showcase_capacity,onChange:l=>X({...T,showcase_capacity:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"3.5_ton",children:"3.5 Ton'a kadar"}),e.jsx("option",{value:"7.5_ton",children:"7.5 Ton'a kadar"}),e.jsx("option",{value:"15_ton",children:"15 Ton'a kadar"}),e.jsx("option",{value:"25_ton",children:"25 Ton'a kadar"}),e.jsx("option",{value:"40_ton",children:"40 Ton ve Ã¼zeri"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Sigorta Tipi"}),e.jsxs("select",{value:T.showcase_insurance_type,onChange:l=>X({...T,showcase_insurance_type:l.target.value}),className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"SeÃ§iniz"}),e.jsx("option",{value:"tasima_kaskosu",children:"TaÅŸÄ±ma Kaskosu Var"}),e.jsx("option",{value:"sorumluluk",children:"Sorumluluk SigortasÄ±"}),e.jsx("option",{value:"tam_kapsamli",children:"Tam KapsamlÄ±"}),e.jsx("option",{value:"yok",children:"Sigorta Yok"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ekipman"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"vinc",label:"VinÃ§"},{value:"hidrolik_platform",label:"Hidrolik Platform"},{value:"uzun_platform",label:"Uzun Platform"},{value:"tekerleksiz_cekim",label:"Tekerleksiz Ã‡ekim"},{value:"gps_takip",label:"GPS Takip"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{const c=T.showcase_equipment||[],d=c.includes(l.value)?c.filter(w=>w!==l.value):[...c,l.value];X({...T,showcase_equipment:d})},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${(T.showcase_equipment||[]).includes(l.value)?"bg-purple-600 text-white":"bg-white text-slate-600 border border-slate-200 hover:border-purple-300"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"AraÃ§ AÃ§Ä±klamasÄ± (Vitrin)"}),e.jsx("textarea",{placeholder:"Ã–rn: AracÄ±mÄ±z son model olup, alÃ§ak ÅŸasi spor araÃ§lar dahil tÃ¼m binek ve hafif ticari araÃ§larÄ± hasarsÄ±z yÃ¼kleme garantisi ile taÅŸÄ±maktadÄ±r.",value:T.showcase_description,onChange:l=>{const c=bl(l.target.value);X({...T,showcase_description:c})},rows:3,className:"w-full p-3 bg-white rounded-xl border-2 border-slate-200 text-sm text-slate-800 font-medium focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all resize-none"}),e.jsx("p",{className:"text-xs text-red-500 font-medium",children:"âš ï¸ Telefon, e-mail, web adresi ve sosyal medya bilgisi otomatik olarak silinir."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-100 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"edit_is_showcase_vehicle",checked:T.is_showcase_vehicle,onChange:l=>X({...T,is_showcase_vehicle:l.target.checked}),className:"w-5 h-5 rounded border-purple-300 text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:"edit_is_showcase_vehicle",className:"text-sm font-medium text-purple-800",children:"Bu aracÄ± vitrin aracÄ± olarak belirle"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 flex-shrink-0",children:[e.jsx("button",{onClick:()=>{Zt(!1),Xt(null),Rs(null),Os(null),Ls(null)},className:"flex-1 px-6 py-3 rounded-xl font-bold text-sm text-slate-600 hover:bg-slate-100 transition-all",children:"Ä°ptal"}),e.jsx("button",{onClick:hi,disabled:dt,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:dt?"GÃ¼ncelleniyor...":"GÃ¼ncelle"})]})]})}),yi(),e.jsx(Xi,{message:t.message,type:t.type,duration:t.duration,onClose:n,isVisible:t.isVisible}),e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 z-40 safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:(()=>{const l=[{id:"home",label:"Ana Sayfa",icon:xr},{id:"requests",label:"Ä°ÅŸ Talepleri",icon:qs,badge:_.length>0?_.length:null},{id:"fleet",label:"Filo",icon:ee},{id:"wallet",label:"Finans",icon:wt}],d=["showcase","settings","support","documents","history","reviews","emptyTrucks","offers","accepted","active","payments"].includes(x);return e.jsxs(e.Fragment,{children:[l.map(w=>e.jsxs("button",{onClick:()=>Xe(w.id),className:`flex flex-col items-center justify-center flex-1 h-full relative transition-colors ${x===w.id?"text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(w.icon,{size:22,strokeWidth:x===w.id?2.5:2}),w.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:w.badge>9?"9+":w.badge})]}),e.jsx("span",{className:`text-[10px] mt-1 font-medium ${x===w.id?"font-bold":""}`,children:w.label}),x===w.id&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-blue-600 rounded-b-full"})]},w.id)),e.jsxs("button",{onClick:()=>K(!0),className:`flex flex-col items-center justify-center flex-1 h-full relative transition-colors ${d?"text-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(Ui,{size:22,strokeWidth:d?2.5:2}),e.jsx("span",{className:`text-[10px] mt-1 font-medium ${d?"font-bold":""}`,children:"Daha Fazla"}),d&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-blue-600 rounded-b-full"})]})]})})()})})]})};export{ku as default};
